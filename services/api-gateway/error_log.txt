    Checking api-gateway v0.1.0 (/Users/domoblock/Documents/Projycto/VibeStream/services/api-gateway)
warning: unused imports: `Bn254` and `Fr`
 --> services/zk-service/src/zkp.rs:2:17
  |
2 | use ark_bn254::{Bn254, Fr};
  |                 ^^^^^  ^^
  |
  = note: `#[warn(unused_imports)]` on by default

warning: unused imports: `Groth16`, `Proof`, `ProvingKey`, and `VerifyingKey`
 --> services/zk-service/src/zkp.rs:3:19
  |
3 | use ark_groth16::{Groth16, Proof, ProvingKey, VerifyingKey};
  |                   ^^^^^^^  ^^^^^  ^^^^^^^^^^  ^^^^^^^^^^^^

warning: unused imports: `CanonicalDeserialize` and `CanonicalSerialize`
 --> services/zk-service/src/zkp.rs:4:21
  |
4 | use ark_serialize::{CanonicalDeserialize, CanonicalSerialize};
  |                     ^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^

warning: unused import: `ark_ff::PrimeField`
 --> services/zk-service/src/zkp.rs:5:5
  |
5 | use ark_ff::PrimeField;
  |     ^^^^^^^^^^^^^^^^^^

warning: unused import: `debug`
  --> services/zk-service/src/zkp.rs:13:34
   |
13 | use tracing::{info, warn, error, debug};
   |                                  ^^^^^

warning: unused import: `Context`
  --> services/zk-service/src/zkp.rs:14:35
   |
14 | use anyhow::{Result as AnyResult, Context};
   |                                   ^^^^^^^

warning: unused import: `tower::ServiceBuilder`
  --> services/zk-service/src/service.rs:17:5
   |
17 | use tower::ServiceBuilder;
   |     ^^^^^^^^^^^^^^^^^^^^^

warning: unused variable: `compiled`
   --> services/zk-service/src/zkp.rs:271:13
    |
271 |         let compiled = self.compiled_circuits.get(&proof.circuit_id)
    |             ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_compiled`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: unused variable: `has_valid_signature`
   --> services/zk-service/src/zkp.rs:397:13
    |
397 |         let has_valid_signature = signature_nums.iter().all(|&x| x != 0);
    |             ^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_has_valid_signature`

warning: unused variable: `has_valid_public_key`
   --> services/zk-service/src/zkp.rs:398:13
    |
398 |         let has_valid_public_key = public_key_nums.iter().all(|&x| x != 0);
    |             ^^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_has_valid_public_key`

warning: field `redis_client` is never read
  --> services/zk-service/src/zkp.rs:36:5
   |
33 | pub struct CircuitManager {
   |            -------------- field in this struct
...
36 |     redis_client: Option<redis::Client>,
   |     ^^^^^^^^^^^^
   |
   = note: `#[warn(dead_code)]` on by default

warning: field `r1cs_path` is never read
  --> services/zk-service/src/zkp.rs:45:5
   |
41 | struct CompiledCircuit {
   |        --------------- field in this struct
...
45 |     r1cs_path: std::path::PathBuf,
   |     ^^^^^^^^^
   |
   = note: `CompiledCircuit` has derived impls for the traits `Clone` and `Debug`, but these are intentionally ignored during dead code analysis

warning: function `download_powers_of_tau` is never used
   --> services/zk-service/src/zkp.rs:514:10
    |
514 | async fn download_powers_of_tau() -> AnyResult<()> {
    |          ^^^^^^^^^^^^^^^^^^^^^^

warning: `zk-service` (lib) generated 13 warnings (run `cargo fix --lib -p zk-service` to apply 7 suggestions)
warning: unused variable: `to_address`
  --> services/ethereum/src/ethereum.rs:66:13
   |
66 |         let to_address: Address = to.parse()
   |             ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_to_address`
   |
   = note: `#[warn(unused_variables)]` on by default

warning: unused variable: `client`
  --> services/ethereum/src/main.rs:24:9
   |
24 |     let client = EthereumClient::new(
   |         ^^^^^^ help: if this is intentional, prefix it with an underscore: `_client`

warning: `ethereum-service` (bin "ethereum-service") generated 2 warnings
error: error returned from database: column t.payment_id does not exist
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:139:27
    |
139 |           let payment_row = sqlx::query!(
    |  ___________________________^
140 | |             "SELECT p.* FROM payments p 
141 | |              JOIN transactions t ON p.id = t.payment_id 
142 | |              WHERE t.id = $1",
143 | |             transaction_id.value()
144 | |         )
    | |_________^
    |
    = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query` (in Nightly builds, run with -Z macro-backtrace for more info)

error: error returned from database: column "payment_id" does not exist
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:457:20
    |
457 |           let rows = sqlx::query!(
    |  ____________________^
458 | |             "SELECT * FROM payment_events WHERE payment_id = $1 ORDER BY occurred_at",
459 | |             payment_id.value()
460 | |         )
    | |_________^
    |
    = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query` (in Nightly builds, run with -Z macro-backtrace for more info)

error: error returned from database: relation "user_followers" does not exist
   --> services/api-gateway/src/shared/infrastructure/database/postgres.rs:715:21
    |
715 |           let count = sqlx::query_scalar!(
    |  _____________________^
716 | |             "SELECT COUNT(*) FROM user_followers WHERE follower_id = $1 AND followee_id = $2",
717 | |             follower_uuid,
718 | |             followee_uuid
719 | |         )
    | |_________^
    |
    = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query_scalar` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0432]: unresolved import `crate::bounded_contexts::payment::infrastructure::gateways::MultiGatewayRouter`
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/services/payment_processing_service.rs:12:5
   |
12 |     MultiGatewayRouter, GatewayRoutingResult
   |     ^^^^^^^^^^^^^^^^^^ no `MultiGatewayRouter` in `bounded_contexts::payment::infrastructure::gateways`
   |
   = help: consider importing this struct instead:
           crate::bounded_contexts::payment::gateway_router::MultiGatewayRouter

error[E0432]: unresolved imports `crate::bounded_contexts::payment::application::commands::ProcessPaymentCommand`, `crate::bounded_contexts::payment::application::queries::GetWalletQuery`, `crate::bounded_contexts::payment::application::queries::GetWalletBalanceQuery`
  --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:16:33
   |
16 |         InitiatePaymentCommand, ProcessPaymentCommand, CompletePaymentCommand, 
   |                                 ^^^^^^^^^^^^^^^^^^^^^ no `ProcessPaymentCommand` in `bounded_contexts::payment::application::commands`
...
32 |         GetWalletQuery, GetWalletBalanceQuery,
   |         ^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^ no `GetWalletBalanceQuery` in `bounded_contexts::payment::application::queries`
   |         |
   |         no `GetWalletQuery` in `bounded_contexts::payment::application::queries`
   |
help: a similar name exists in the module
   |
16 -         InitiatePaymentCommand, ProcessPaymentCommand, CompletePaymentCommand, 
16 +         InitiatePaymentCommand, CancelPaymentCommand, CompletePaymentCommand, 
   |
help: a similar name exists in the module
   |
32 -         GetWalletQuery, GetWalletBalanceQuery,
32 +         GetPaymentQuery, GetWalletBalanceQuery,
   |

error[E0433]: failed to resolve: use of undeclared type `HashMap`
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:662:25
    |
662 |             other_fees: HashMap::new(),
    |                         ^^^^^^^ use of undeclared type `HashMap`
    |
help: consider importing this struct
    |
1   + use std::collections::HashMap;
    |

error[E0433]: failed to resolve: use of undeclared type `HashMap`
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:666:36
    |
666 |                 bonus_multipliers: HashMap::new(),
    |                                    ^^^^^^^ use of undeclared type `HashMap`
    |
help: consider importing this struct
    |
1   + use std::collections::HashMap;
    |

error[E0433]: failed to resolve: use of undeclared type `HashMap`
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:667:29
    |
667 |                 deductions: HashMap::new(),
    |                             ^^^^^^^ use of undeclared type `HashMap`
    |
help: consider importing this struct
    |
1   + use std::collections::HashMap;
    |

error[E0422]: cannot find struct, variant or union type `PaymentPurposeDto` in this scope
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:196:23
    |
196 |         let purpose = PaymentPurposeDto {
    |                       ^^^^^^^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/payment/application/dto.rs:67:1
    |
67  | pub struct PaymentPurposeDTO {
    | ---------------------------- similarly named struct `PaymentPurposeDTO` defined here
    |
help: a struct with a similar name exists
    |
196 -         let purpose = PaymentPurposeDto {
196 +         let purpose = PaymentPurposeDTO {
    |
help: consider importing one of these structs
    |
1   + use crate::bounded_contexts::payment::PaymentPurposeDto;
    |
1   + use crate::bounded_contexts::payment::queries::PaymentPurposeDto;
    |

error[E0422]: cannot find struct, variant or union type `StartPaymentProcessingCommand` in this scope
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:274:23
    |
274 |         let command = StartPaymentProcessingCommand {
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ not found in this scope
    |
help: consider importing this struct through its public re-export
    |
1   + use crate::bounded_contexts::payment::StartPaymentProcessingCommand;
    |

error[E0433]: failed to resolve: use of undeclared type `Currency`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:419:30
    |
419 |             refund_currency: Currency::USD, // TODO: Get from request or original payment
    |                              ^^^^^^^^ use of undeclared type `Currency`
    |
help: consider importing this enum through its public re-export
    |
1   + use crate::bounded_contexts::payment::Currency;
    |

error[E0422]: cannot find struct, variant or union type `DistributeRoyaltiesCommand` in this scope
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:593:23
    |
593 |         let command = DistributeRoyaltiesCommand {
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: a struct with a similar name exists: `DistributeRoyaltiesRequest`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/application/dto.rs:203:1
    |
203 | pub struct DistributeRoyaltiesRequest {
    | ------------------------------------- similarly named struct `DistributeRoyaltiesRequest` defined here

error[E0422]: cannot find struct, variant or union type `CreateWalletCommand` in this scope
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:659:23
    |
659 |         let command = CreateWalletCommand {
    |                       ^^^^^^^^^^^^^^^^^^^ not found in this scope

error[E0412]: cannot find type `PostgresPaymentRepository` in this scope
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:933:29
    |
933 |     payment_repository: Arc<PostgresPaymentRepository>,
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:18:1
    |
18  | pub struct PostgreSQLPaymentRepository {
    | -------------------------------------- similarly named struct `PostgreSQLPaymentRepository` defined here
    |
help: a struct with a similar name exists
    |
933 -     payment_repository: Arc<PostgresPaymentRepository>,
933 +     payment_repository: Arc<PostgreSQLPaymentRepository>,
    |
help: you might be missing a type parameter
    |
932 | pub fn create_payment_controller<PostgresPaymentRepository>(
    |                                 +++++++++++++++++++++++++++

error[E0412]: cannot find type `PostgresPaymentRepository` in this scope
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:947:29
    |
947 |     payment_repository: Arc<PostgresPaymentRepository>,
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:18:1
    |
18  | pub struct PostgreSQLPaymentRepository {
    | -------------------------------------- similarly named struct `PostgreSQLPaymentRepository` defined here
    |
help: a struct with a similar name exists
    |
947 -     payment_repository: Arc<PostgresPaymentRepository>,
947 +     payment_repository: Arc<PostgreSQLPaymentRepository>,
    |
help: you might be missing a type parameter
    |
946 | pub fn create_payment_routes<PostgresPaymentRepository>(
    |                             +++++++++++++++++++++++++++

error[E0433]: failed to resolve: could not find `MultiGatewayRouter` in `gateways`
  --> services/api-gateway/src/gateways/payment_gateway.rs:43:90
   |
43 |     let mut gateway_router = crate::bounded_contexts::payment::infrastructure::gateways::MultiGatewayRouter::new();
   |                                                                                          ^^^^^^^^^^^^^^^^^^ could not find `MultiGatewayRouter` in `gateways`
   |
help: consider importing this struct
   |
5  + use crate::bounded_contexts::payment::gateway_router::MultiGatewayRouter;
   |
help: if you import `MultiGatewayRouter`, refer to it directly
   |
43 -     let mut gateway_router = crate::bounded_contexts::payment::infrastructure::gateways::MultiGatewayRouter::new();
43 +     let mut gateway_router = MultiGatewayRouter::new();
   |

error[E0603]: trait import `PaymentGatewayRouter` is private
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/mod.rs:9:26
    |
9   | pub use gateway_router::{PaymentGatewayRouter, GatewayRoutingResult};
    |                          ^^^^^^^^^^^^^^^^^^^^ private trait import
    |
note: the trait import `PaymentGatewayRouter` is defined here...
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/gateway_router.rs:13:5
    |
13  |     PaymentGatewayRouter, GatewayRoutingResult, GatewayResult,
    |     ^^^^^^^^^^^^^^^^^^^^
note: ...and refers to the trait `PaymentGatewayRouter` which is defined here
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/mod.rs:105:1
    |
105 | pub trait PaymentGatewayRouter: Send + Sync {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ you could import this directly
help: import `PaymentGatewayRouter` directly
    |
9   | pub use gateway_router::{bounded_contexts::payment::infrastructure::gateways::PaymentGatewayRouter, GatewayRoutingResult};
    |                          +++++++++++++++++++++++++++++++++++++++++++++++++++++

error[E0603]: struct import `GatewayRoutingResult` is private
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/mod.rs:9:48
    |
9   | pub use gateway_router::{PaymentGatewayRouter, GatewayRoutingResult};
    |                                                ^^^^^^^^^^^^^^^^^^^^ private struct import
    |
note: the struct import `GatewayRoutingResult` is defined here...
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/gateway_router.rs:13:27
    |
13  |     PaymentGatewayRouter, GatewayRoutingResult, GatewayResult,
    |                           ^^^^^^^^^^^^^^^^^^^^
note: ...and refers to the struct `GatewayRoutingResult` which is defined here
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/mod.rs:115:1
    |
115 | pub struct GatewayRoutingResult {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ you could import this directly
help: import `GatewayRoutingResult` directly
    |
9   | pub use gateway_router::{PaymentGatewayRouter, bounded_contexts::payment::infrastructure::gateways::GatewayRoutingResult};
    |                                                +++++++++++++++++++++++++++++++++++++++++++++++++++++

error[E0603]: struct import `PaymentBatch` is private
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/webhook_queue.rs:14:5
    |
14  |     PaymentBatch, 
    |     ^^^^^^^^^^^^ private struct import
    |
note: the struct import `PaymentBatch` is defined here...
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:9:5
    |
9   | use super::entities::*;
    |     ^^^^^^^^^^^^^^^^^^
note: ...and refers to the struct `PaymentBatch` which is defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/entities.rs:336:1
    |
336 | pub struct PaymentBatch {
    | ^^^^^^^^^^^^^^^^^^^^^^^ you could import this directly
help: import `PaymentBatch` through the re-export
    |
14  |     entities::PaymentBatch, 
    |     ++++++++++

error[E0603]: enum import `BatchType` is private
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/webhook_queue.rs:15:5
    |
15  |     BatchType,
    |     ^^^^^^^^^ private enum import
    |
note: the enum import `BatchType` is defined here...
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:9:5
    |
9   | use super::entities::*;
    |     ^^^^^^^^^^^^^^^^^^
note: ...and refers to the enum `BatchType` which is defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/entities.rs:348:1
    |
348 | pub enum BatchType {
    | ^^^^^^^^^^^^^^^^^^ you could import this directly
help: import `BatchType` through the re-export
    |
15  |     entities::BatchType,
    |     ++++++++++

error[E0603]: enum import `BatchStatus` is private
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/webhook_queue.rs:16:5
    |
16  |     BatchStatus
    |     ^^^^^^^^^^^ private enum import
    |
note: the enum import `BatchStatus` is defined here...
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:9:5
    |
9   | use super::entities::*;
    |     ^^^^^^^^^^^^^^^^^^
note: ...and refers to the enum `BatchStatus` which is defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/entities.rs:356:1
    |
356 | pub enum BatchStatus {
    | ^^^^^^^^^^^^^^^^^^^^ you could import this directly
help: import `BatchStatus` through the re-export
    |
16  |     entities::BatchStatus
    |     ++++++++++

error[E0603]: struct `MockPaymentProcessingService` is private
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:38:9
    |
38  |         MockPaymentProcessingService, MockFraudDetectionService, MockNotificationService,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ private struct
    |
note: the struct `MockPaymentProcessingService` is defined here
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:504:1
    |
504 | struct MockPaymentProcessingService;
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0603]: struct `MockFraudDetectionService` is private
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:38:39
    |
38  |         MockPaymentProcessingService, MockFraudDetectionService, MockNotificationService,
    |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^ private struct
    |
note: the struct `MockFraudDetectionService` is defined here
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:526:1
    |
526 | struct MockFraudDetectionService;
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0603]: struct `MockNotificationService` is private
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:38:66
    |
38  |         MockPaymentProcessingService, MockFraudDetectionService, MockNotificationService,
    |                                                                  ^^^^^^^^^^^^^^^^^^^^^^^ private struct
    |
note: the struct `MockNotificationService` is defined here
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:568:1
    |
568 | struct MockNotificationService;
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0603]: struct `MockFraudDetectionService` is private
   --> services/api-gateway/src/gateways/payment_gateway.rs:71:101
    |
71  |     let fraud_detection_service = Arc::new(crate::bounded_contexts::payment::application::services::MockFraudDetectionService {});
    |                                                                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^ private struct
    |
note: the struct `MockFraudDetectionService` is defined here
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:526:1
    |
526 | struct MockFraudDetectionService;
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0603]: struct `MockNotificationService` is private
   --> services/api-gateway/src/gateways/payment_gateway.rs:72:98
    |
72  |     let notification_service = Arc::new(crate::bounded_contexts::payment::application::services::MockNotificationService {});
    |                                                                                                  ^^^^^^^^^^^^^^^^^^^^^^^ private struct
    |
note: the struct `MockNotificationService` is defined here
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:568:1
    |
568 | struct MockNotificationService;
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
 --> services/api-gateway/src/bounded_contexts/campaign/application/services.rs:1:5
  |
1 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

warning: unused import: `uuid::Uuid`
  --> services/api-gateway/src/bounded_contexts/user/application/services.rs:20:5
   |
20 | use uuid::Uuid;
   |     ^^^^^^^^^^

warning: unused import: `crate::shared::domain::errors::AppError`
  --> services/api-gateway/src/bounded_contexts/user/presentation/controllers/user_controller.rs:26:5
   |
26 | use crate::shared::domain::errors::AppError;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: ambiguous glob re-exports
 --> services/api-gateway/src/bounded_contexts/user/presentation/mod.rs:7:9
  |
7 | pub use controllers::*;
  |         ^^^^^^^^^^^^^^ the name `create_user_routes` in the value namespace is first re-exported here
8 | pub use routes::*; 
  |         --------- but the name `create_user_routes` in the value namespace is also re-exported here
  |
  = note: `#[warn(ambiguous_glob_reexports)]` on by default

warning: unused imports: `PlaylistId` and `PlaylistName`
 --> services/api-gateway/src/bounded_contexts/music/infrastructure/repositories/postgres_playlist_repository.rs:8:21
  |
8 |     value_objects::{PlaylistId, PlaylistName},
  |                     ^^^^^^^^^^  ^^^^^^^^^^^^

warning: unused import: `crate::bounded_contexts::user::domain::UserId`
  --> services/api-gateway/src/bounded_contexts/music/infrastructure/repositories/postgres_playlist_repository.rs:10:5
   |
10 | use crate::bounded_contexts::user::domain::UserId;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `CDNError`
 --> services/api-gateway/src/bounded_contexts/music/infrastructure/storage/cdn_storage.rs:6:84
  |
6 | use crate::shared::infrastructure::cdn::{CloudCDNService, CDNService, ContentType, CDNError};
  |                                                                                    ^^^^^^^^

warning: unused import: `RepositoryError`
 --> services/api-gateway/src/bounded_contexts/music/infrastructure/mock_repository.rs:7:94
  |
7 | use crate::bounded_contexts::music::domain::repositories::{SongRepository, RepositoryResult, RepositoryError};
  |                                                                                              ^^^^^^^^^^^^^^^

warning: unused import: `crate::shared::domain::errors::AppError`
  --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/song_controller.rs:17:5
   |
17 | use crate::shared::domain::errors::AppError;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `Deserialize`
 --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/artist_controller.rs:6:13
  |
6 | use serde::{Deserialize, Serialize};
  |             ^^^^^^^^^^^

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/mod.rs:9:9
   |
9  | pub use upload_controller::*;
   |         ^^^^^^^^^^^^^^^^^^^^ the name `UploadProgressResponse` in the type namespace is first re-exported here
10 | pub use video_upload_controller::*;
   |         -------------------------- but the name `UploadProgressResponse` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/mod.rs:9:9
   |
9  | pub use upload_controller::*;
   |         ^^^^^^^^^^^^^^^^^^^^ the name `UploadStatus` in the type namespace is first re-exported here
10 | pub use video_upload_controller::*;
   |         -------------------------- but the name `UploadStatus` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/mod.rs:9:9
   |
9  | pub use upload_controller::*;
   |         ^^^^^^^^^^^^^^^^^^^^ the name `ApiResponse` in the type namespace is first re-exported here
10 | pub use video_upload_controller::*;
   |         -------------------------- but the name `ApiResponse` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
 --> services/api-gateway/src/bounded_contexts/listen_reward/domain/mod.rs:6:9
  |
6 | pub use value_objects::*;
  |         ^^^^^^^^^^^^^^^^ the name `SessionStatus` in the type namespace is first re-exported here
7 | pub use events::*;
8 | pub use entities::*;
  |         ----------- but the name `SessionStatus` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
 --> services/api-gateway/src/bounded_contexts/listen_reward/domain/mod.rs:6:9
  |
6 | pub use value_objects::*;
  |         ^^^^^^^^^^^^^^^^ the name `RewardPool` in the type namespace is first re-exported here
...
9 | pub use aggregates::*; 
  |         ------------- but the name `RewardPool` in the type namespace is also re-exported here

warning: unused import: `uuid::Uuid`
 --> services/api-gateway/src/bounded_contexts/listen_reward/application/use_cases/complete_listen_session.rs:2:5
  |
2 | use uuid::Uuid;
  |     ^^^^^^^^^^

warning: unused imports: `aggregates::RewardPool` and `value_objects::RewardAmount`
  --> services/api-gateway/src/bounded_contexts/listen_reward/application/listen_reward_application_service.rs:15:9
   |
15 |         value_objects::RewardAmount,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
16 |         aggregates::RewardPool,
   |         ^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
 --> services/api-gateway/src/bounded_contexts/listen_reward/infrastructure/integration/mod.rs:6:5
  |
6 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^

warning: unused import: `crate::bounded_contexts::listen_reward::application::ListenRewardApplicationService`
  --> services/api-gateway/src/bounded_contexts/listen_reward/infrastructure/integration/mod.rs:17:5
   |
17 | use crate::bounded_contexts::listen_reward::application::ListenRewardApplicationService;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `ListenSessionFilter` and `Pagination`
 --> services/api-gateway/src/bounded_contexts/listen_reward/infrastructure/mock_repository.rs:8:54
  |
8 |     infrastructure::repositories::{RepositoryResult, Pagination, ListenSessionFilter},
  |                                                      ^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^

warning: unused imports: `BenefitType` and `DeliveryMethod`
 --> services/api-gateway/src/bounded_contexts/fan_ventures/application/simple_service.rs:6:54
  |
6 |     VentureStatus, InvestmentStatus, InvestmentType, BenefitType, DeliveryMethod,
  |                                                      ^^^^^^^^^^^  ^^^^^^^^^^^^^^

warning: unused import: `async_trait::async_trait`
 --> services/api-gateway/src/bounded_contexts/fan_ventures/application/services.rs:2:5
  |
2 | use async_trait::async_trait;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `serde_json::Value`
 --> services/api-gateway/src/bounded_contexts/fan_ventures/application/services.rs:3:5
  |
3 | use serde_json::Value;
  |     ^^^^^^^^^^^^^^^^^

warning: unused import: `sqlx::PgPool`
 --> services/api-gateway/src/bounded_contexts/fan_ventures/application/services.rs:5:5
  |
5 | use sqlx::PgPool;
  |     ^^^^^^^^^^^^

warning: unused imports: `FanInvestment` and `VentureBenefit`
 --> services/api-gateway/src/bounded_contexts/fan_ventures/application/services.rs:7:39
  |
7 |     domain::entities::{ArtistVenture, FanInvestment, VentureBenefit},
  |                                       ^^^^^^^^^^^^^  ^^^^^^^^^^^^^^

warning: unused imports: `RiskLevel`, `VentureCategory`, and `VentureStatus`
 --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:2:64
  |
2 |     ArtistVenture, FanInvestment, VentureTier, VentureBenefit, VentureCategory, RiskLevel, VentureStatus, InvestmentType
  |                                                                ^^^^^^^^^^^^^^^  ^^^^^^^^^  ^^^^^^^^^^^^^

warning: unused import: `chrono::Utc`
 --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:7:5
  |
7 | use chrono::Utc;
  |     ^^^^^^^^^^^

warning: unused imports: `FanInvestment` and `VentureBenefit`
 --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/mock_repository.rs:4:31
  |
4 |     entities::{ArtistVenture, FanInvestment, VentureBenefit},
  |                               ^^^^^^^^^^^^^  ^^^^^^^^^^^^^^

warning: unused import: `Deserialize`
 --> services/api-gateway/src/bounded_contexts/fan_ventures/presentation/routes.rs:9:13
  |
9 | use serde::{Deserialize, Serialize};
  |             ^^^^^^^^^^^

warning: unused import: `Query`
 --> services/api-gateway/src/bounded_contexts/fan_ventures/presentation/handlers.rs:2:21
  |
2 |     extract::{Path, Query, State, Json},
  |                     ^^^^^

warning: unused import: `controllers::{
             // create_fan_ventures_routes, 
         }`
  --> services/api-gateway/src/bounded_contexts/fan_ventures/presentation/mod.rs:12:9
   |
12 |   pub use controllers::{
   |  _________^
13 | |     // create_fan_ventures_routes, 
14 | | };
   | |_^

warning: unused imports: `NotificationFilters` and `NotificationStatus`
 --> services/api-gateway/src/bounded_contexts/notifications/domain/services.rs:3:23
  |
3 |     NotificationType, NotificationStatus, NotificationFilters,
  |                       ^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^

warning: unused import: `crate::bounded_contexts::user::domain::value_objects::UserId`
 --> services/api-gateway/src/bounded_contexts/notifications/domain/services.rs:5:5
  |
5 | use crate::bounded_contexts::user::domain::value_objects::UserId;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::collections::HashMap`
 --> services/api-gateway/src/bounded_contexts/notifications/domain/services.rs:6:5
  |
6 | use std::collections::HashMap;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `NotificationStatus`, `NotificationTemplate`, and `UpdateNotificationRequest`
 --> services/api-gateway/src/bounded_contexts/notifications/application/services.rs:3:44
  |
3 |     Notification, NotificationPreferences, NotificationTemplate,
  |                                            ^^^^^^^^^^^^^^^^^^^^
4 |     NotificationType, NotificationPriority, NotificationStatus,
  |                                             ^^^^^^^^^^^^^^^^^^
5 |     CreateNotificationRequest, UpdateNotificationRequest, NotificationFilters,
  |                                ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `SystemNotificationService`
 --> services/api-gateway/src/bounded_contexts/notifications/application/services.rs:9:32
  |
9 |     NotificationDomainService, SystemNotificationService,
  |                                ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
  --> services/api-gateway/src/bounded_contexts/notifications/application/services.rs:14:5
   |
14 | use std::sync::Arc;
   |     ^^^^^^^^^^^^^^

warning: unused import: `use_cases::*`
 --> services/api-gateway/src/bounded_contexts/notifications/application/mod.rs:5:9
  |
5 | pub use use_cases::*; 
  |         ^^^^^^^^^^^^

warning: unused import: `serde_json::Value`
 --> services/api-gateway/src/bounded_contexts/notifications/infrastructure/postgres_repository.rs:9:5
  |
9 | use serde_json::Value;
  |     ^^^^^^^^^^^^^^^^^

warning: unused imports: `BiometricScore`, `FanVerifiedEvent`, and `LoyaltyTier`
 --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repository.rs:5:33
  |
5 |     aggregates::{BiometricData, BiometricScore, LoyaltyTier},
  |                                 ^^^^^^^^^^^^^^  ^^^^^^^^^^^
6 |     entities::{NftWristband, WristbandId, FanVerificationResult, FanVerificationResultId},
7 |     events::{FanVerifiedEvent, FanVerificationResultLoyaltyEvent},
  |              ^^^^^^^^^^^^^^^^

warning: unused import: `WristbandType`
 --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:5:82
  |
5 | use crate::bounded_contexts::fan_loyalty::domain::entities::{FanId, WristbandId, WristbandType, NftWristband, FanVerificationResult};
  |                                                                                  ^^^^^^^^^^^^^

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/mod.rs:10:9
   |
10 | pub use aggregates::*;
   |         ^^^^^^^^^^^^^ the name `FanId` in the type namespace is first re-exported here
11 | pub use entities::*;
   |         ----------- but the name `FanId` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/mod.rs:10:9
   |
10 | pub use aggregates::*;
   |         ^^^^^^^^^^^^^ the name `FanId` in the value namespace is first re-exported here
11 | pub use entities::*;
   |         ----------- but the name `FanId` in the value namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/mod.rs:10:9
   |
10 | pub use aggregates::*;
   |         ^^^^^^^^^^^^^ the name `BiometricData` in the type namespace is first re-exported here
...
13 | pub use services::*;
   |         ----------- but the name `BiometricData` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/mod.rs:10:9
   |
10 | pub use aggregates::*;
   |         ^^^^^^^^^^^^^ the name `BehavioralPatterns` in the type namespace is first re-exported here
...
13 | pub use services::*;
   |         ----------- but the name `BehavioralPatterns` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/mod.rs:11:9
   |
11 | pub use entities::*;
   |         ^^^^^^^^^^^ the name `QrCode` in the type namespace is first re-exported here
12 | pub use events::*;
13 | pub use services::*;
   |         ----------- but the name `QrCode` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/mod.rs:11:9
   |
11 | pub use entities::*;
   |         ^^^^^^^^^^^ the name `DeviceCharacteristics` in the type namespace is first re-exported here
12 | pub use events::*;
13 | pub use services::*;
   |         ----------- but the name `DeviceCharacteristics` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/mod.rs:11:9
   |
11 | pub use entities::*;
   |         ^^^^^^^^^^^ the name `LocationData` in the type namespace is first re-exported here
12 | pub use events::*;
13 | pub use services::*;
   |         ----------- but the name `LocationData` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/mod.rs:11:9
   |
11 | pub use entities::*;
   |         ^^^^^^^^^^^ the name `NftCreationResult` in the type namespace is first re-exported here
12 | pub use events::*;
13 | pub use services::*;
   |         ----------- but the name `NftCreationResult` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/mod.rs:12:9
   |
12 | pub use events::*;
   |         ^^^^^^^^^ the name `FanVerifiedEvent` in the type namespace is first re-exported here
13 | pub use services::*;
   |         ----------- but the name `FanVerifiedEvent` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/mod.rs:12:9
   |
12 | pub use events::*;
   |         ^^^^^^^^^ the name `WristbandCreatedEvent` in the type namespace is first re-exported here
13 | pub use services::*;
   |         ----------- but the name `WristbandCreatedEvent` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/mod.rs:12:9
   |
12 | pub use events::*;
   |         ^^^^^^^^^ the name `WristbandActivatedEvent` in the type namespace is first re-exported here
13 | pub use services::*;
   |         ----------- but the name `WristbandActivatedEvent` in the type namespace is also re-exported here

warning: unused imports: `database::FanLoyaltyRepository`, `nft_service::WristbandNftService`, `qr_service::QrCodeService as QrCodeServiceImpl`, and `zk_integration::ZkBiometricService`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:19:9
   |
19 |         database::FanLoyaltyRepository,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
20 |         nft_service::WristbandNftService,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
21 |         qr_service::QrCodeService as QrCodeServiceImpl,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
22 |         zk_integration::ZkBiometricService,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `BiometricVerificationService`, `FanId`, `NftRepository`, `WristbandId`, `WristbandService`, `WristbandType`, `ZkProofRepository`, and `ZkProofService`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/event_handlers.rs:10:17
   |
10 |                 ZkProofRepository, NftRepository
   |                 ^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^
...
13 |                 BiometricVerificationService, WristbandService, QrCodeService,
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^
14 |                 NftService, ZkProofService, EventPublisher, QrCodeScannedEvent,
   |                             ^^^^^^^^^^^^^^
...
17 |             entities::{FanId, WristbandId, WristbandType, NftWristband, FanVerificationResult},
   |                        ^^^^^  ^^^^^^^^^^^  ^^^^^^^^^^^^^

warning: unused import: `uuid::Uuid`
 --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/nft_service.rs:2:5
  |
2 | use uuid::Uuid;
  |     ^^^^^^^^^^

warning: unused imports: `NftWristband` and `WristbandNftResult`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:13:59
   |
13 |     domain::entities::{FanId, WristbandId, WristbandType, NftWristband},
   |                                                           ^^^^^^^^^^^^
...
22 |         nft_service::{WristbandNftService, WristbandNftResult},
   |                                            ^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
 --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:2:5
  |
2 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^

warning: unused imports: `Deserialize` and `Serialize`
 --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:5:13
  |
5 | use serde::{Serialize, Deserialize};
  |             ^^^^^^^^^  ^^^^^^^^^^^

warning: unused imports: `ActivateWristbandCommand`, `CreateWristbandCommand`, `FanVerificationRepository`, `GenerateZkProofCommand`, `NftRepository`, `QrCodeRepository`, `QrCodeService`, `ScanQrCodeCommand`, `ValidateQrCodeQuery`, `VerifyFanCommand`, `VerifyZkProofCommand`, `WristbandRepository`, `WristbandService`, and `ZkProofRepository`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:10:13
   |
10 |             FanVerificationRepository, WristbandRepository, QrCodeRepository,
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^
11 |             ZkProofRepository, NftRepository
   |             ^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^
...
14 |             BiometricVerificationService, WristbandService, QrCodeService,
   |                                           ^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^
...
20 |         VerifyFanCommand, CreateWristbandCommand, ActivateWristbandCommand,
   |         ^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^
21 |         ValidateQrCodeQuery, ScanQrCodeCommand, GenerateZkProofCommand, VerifyZkProofCommand,
   |         ^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^

warning: unused import: `async_trait::async_trait`
 --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/database.rs:1:5
  |
1 | use async_trait::async_trait;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `NftCreationResult`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:10:27
   |
10 |     NftWristband, QrCode, NftCreationResult
   |                           ^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
 --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:5:5
  |
5 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^

warning: unused import: `DateTime`
 --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:9:14
  |
9 | use chrono::{DateTime, Utc};
  |              ^^^^^^^^

warning: unused import: `super::entities::*`
 --> services/api-gateway/src/bounded_contexts/payment/domain/services.rs:8:5
  |
8 | use super::entities::*;
  |     ^^^^^^^^^^^^^^^^^^

warning: unused import: `uuid::Uuid`
 --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:3:5
  |
3 | use uuid::Uuid;
  |     ^^^^^^^^^^

warning: unused import: `entities::*`
 --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:9:9
  |
9 |         entities::*,
  |         ^^^^^^^^^^^

warning: unused imports: `aggregates::*`, `handlers::*`, `queries::*`, `repository::*`, and `value_objects::*`
  --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:12:9
   |
12 |         aggregates::*,
   |         ^^^^^^^^^^^^^
13 |         value_objects::*,
   |         ^^^^^^^^^^^^^^^^
14 |         repository::*,
   |         ^^^^^^^^^^^^^
...
21 |         queries::*,
   |         ^^^^^^^^^^
22 |         handlers::*,
   |         ^^^^^^^^^^^

warning: ambiguous glob re-exports
 --> services/api-gateway/src/bounded_contexts/payment/application/mod.rs:7:9
  |
7 | pub use commands::*;
  |         ^^^^^^^^^^^ the name `PaymentMethodDto` in the type namespace is first re-exported here
8 | pub use queries::*;
  |         ---------- but the name `PaymentMethodDto` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
 --> services/api-gateway/src/bounded_contexts/payment/application/mod.rs:7:9
  |
7 | pub use commands::*;
  |         ^^^^^^^^^^^ the name `PaymentPurposeDto` in the type namespace is first re-exported here
8 | pub use queries::*;
  |         ---------- but the name `PaymentPurposeDto` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
 --> services/api-gateway/src/bounded_contexts/payment/application/mod.rs:7:9
  |
7 | pub use commands::*;
  |         ^^^^^^^^^^^ the name `PaymentMetadataDto` in the type namespace is first re-exported here
8 | pub use queries::*;
  |         ---------- but the name `PaymentMetadataDto` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
  --> services/api-gateway/src/bounded_contexts/payment/application/mod.rs:8:9
   |
8  | pub use queries::*;
   |         ^^^^^^^^^^ the name `PaymentTrendData` in the type namespace is first re-exported here
...
11 | pub use dto::*; 
   |         ------ but the name `PaymentTrendData` in the type namespace is also re-exported here

warning: unused import: `crate::shared::domain::errors::AppError`
 --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/royalty_repository.rs:9:5
  |
9 | use crate::shared::domain::errors::AppError;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `crate::shared::domain::errors::AppError`
 --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/revenue_sharing_repository.rs:9:5
  |
9 | use crate::shared::domain::errors::AppError;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `GatewayRoutingResult`
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/services/payment_processing_service.rs:12:25
   |
12 |     MultiGatewayRouter, GatewayRoutingResult
   |                         ^^^^^^^^^^^^^^^^^^^^

warning: unused import: `TransactionHash`
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/stripe_gateway.rs:13:54
   |
13 |     value_objects::{Amount, Currency, TransactionId, TransactionHash, PaymentMethod},
   |                                                      ^^^^^^^^^^^^^^^

warning: unused import: `json`
 --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:5:18
  |
5 | use serde_json::{json, Value};
  |                  ^^^^

warning: unused import: `TransactionHash`
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:11:54
   |
11 |     value_objects::{Amount, Currency, TransactionId, TransactionHash, PaymentMethod},
   |                                                      ^^^^^^^^^^^^^^^

warning: unused import: `GatewayResult`
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/gateway_router.rs:13:49
   |
13 |     PaymentGatewayRouter, GatewayRoutingResult, GatewayResult,
   |                                                 ^^^^^^^^^^^^^

warning: unused import: `std::time::Instant`
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/mod.rs:13:5
   |
13 | use std::time::Instant;
   |     ^^^^^^^^^^^^^^^^^^

warning: unused import: `uuid::Uuid`
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/mod.rs:14:5
   |
14 | use uuid::Uuid;
   |     ^^^^^^^^^^

warning: unused import: `Serialize`
 --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/stripe_webhook.rs:3:26
  |
3 | use serde::{Deserialize, Serialize};
  |                          ^^^^^^^^^

warning: unused import: `aggregates::PaymentAggregate`
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/stripe_webhook.rs:11:9
   |
11 |         aggregates::PaymentAggregate,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `async_trait::async_trait`
 --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/webhook_router.rs:2:5
  |
2 | use async_trait::async_trait;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `async_trait::async_trait`
 --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/webhook_queue.rs:5:5
  |
5 | use async_trait::async_trait;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `WebhookEventData` and `WebhookEventType`
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/webhook_queue.rs:19:46
   |
19 |     WebhookHandler, WebhookProcessingResult, WebhookEventData, WebhookEventType
   |                                              ^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^

warning: unused imports: `TransactionId` and `aggregates::PaymentAggregate`
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/mod.rs:21:5
   |
21 |     aggregates::PaymentAggregate,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
22 |     value_objects::{TransactionId, PaymentStatus},
   |                     ^^^^^^^^^^^^^

warning: unused imports: `delete` and `put`
 --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:5:26
  |
5 |     routing::{get, post, put, delete},
  |                          ^^^  ^^^^^^

warning: unused import: `Deserialize`
 --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:8:13
  |
8 | use serde::{Deserialize, Serialize};
  |             ^^^^^^^^^^^

warning: unused imports: `CreateRoyaltyDistributionCommand`, `GetArtistRevenueSummaryQuery`, `GetPaymentAnalyticsQuery`, `GetPaymentStatisticsQuery`, `GetRoyaltyDistributionsQuery`, `GetUserPaymentHistoryQuery`, `GetUserPaymentSummaryQuery`, `PaymentApplicationService`, `ProcessRoyaltyDistributionCommand`, `RoyaltyCommandHandlerImpl`, `RoyaltyCommandHandler`, `RoyaltyDistributionApplicationService`, and `query_handlers::*`
  --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:18:9
   |
18 |         CreateRoyaltyDistributionCommand, ProcessRoyaltyDistributionCommand,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
23 |             RoyaltyCommandHandler, RoyaltyCommandHandlerImpl,
   |             ^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^^
24 |         },
25 |         query_handlers::*,
   |         ^^^^^^^^^^^^^^^^^
...
29 |         GetPaymentByTransactionQuery, GetUserPaymentHistoryQuery, GetUserPaymentSummaryQuery,
   |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^^^
30 |         GetPaymentStatisticsQuery, GetPaymentAnalyticsQuery, 
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^
31 |         GetRoyaltyDistributionsQuery, GetArtistRevenueSummaryQuery,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
37 |         PaymentApplicationService, RoyaltyDistributionApplicationService,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `CoinbaseWebhookHandler`, `PayPalWebhookHandler`, and `StripeWebhookHandler`
  --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:46:20
   |
46 |     WebhookRouter, StripeWebhookHandler, PayPalWebhookHandler, CoinbaseWebhookHandler,
   |                    ^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `crate::services::MessageQueue`
  --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:49:5
   |
49 | use crate::services::MessageQueue;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `CoinbaseGateway`, `PayPalGateway`, and `StripeGateway`
  --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:51:5
   |
51 |     StripeGateway, PayPalGateway, CoinbaseGateway,
   |     ^^^^^^^^^^^^^  ^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^

warning: ambiguous glob re-exports
 --> services/api-gateway/src/bounded_contexts/payment/mod.rs:6:9
  |
6 | pub use domain::*;
  |         ^^^^^^^^^ the name `services` in the type namespace is first re-exported here
7 | pub use application::*;
8 | pub use infrastructure::*;
  |         ----------------- but the name `services` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
 --> services/api-gateway/src/bounded_contexts/payment/mod.rs:6:9
  |
6 | pub use domain::*;
  |         ^^^^^^^^^ the name `BatchType` in the type namespace is first re-exported here
7 | pub use application::*;
  |         -------------- but the name `BatchType` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
 --> services/api-gateway/src/bounded_contexts/payment/mod.rs:6:9
  |
6 | pub use domain::*;
  |         ^^^^^^^^^ the name `PaymentStatistics` in the type namespace is first re-exported here
7 | pub use application::*;
  |         -------------- but the name `PaymentStatistics` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
 --> services/api-gateway/src/bounded_contexts/payment/mod.rs:6:9
  |
6 | pub use domain::*;
  |         ^^^^^^^^^ the name `RefundResult` in the type namespace is first re-exported here
7 | pub use application::*;
8 | pub use infrastructure::*;
  |         ----------------- but the name `RefundResult` in the type namespace is also re-exported here

warning: ambiguous glob re-exports
 --> services/api-gateway/src/bounded_contexts/payment/mod.rs:6:9
  |
6 | pub use domain::*;
  |         ^^^^^^^^^ the name `GatewayResult` in the type namespace is first re-exported here
7 | pub use application::*;
8 | pub use infrastructure::*;
  |         ----------------- but the name `GatewayResult` in the type namespace is also re-exported here

warning: unused import: `crate::shared::infrastructure::database::postgres::PostgresUserRepository`
  --> services/api-gateway/src/gateways/user_gateway.rs:20:5
   |
20 | use crate::shared::infrastructure::database::postgres::PostgresUserRepository;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `create_payment_controller`
  --> services/api-gateway/src/gateways/payment_gateway.rs:16:24
   |
16 |     PaymentController, create_payment_controller,
   |                        ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `delete`
 --> services/api-gateway/src/gateways/listen_reward_gateway.rs:5:46
  |
5 | use axum::{Router, routing::{get, post, put, delete}, response::Json as ResponseJson};
  |                                              ^^^^^^

warning: unused import: `post`
 --> services/api-gateway/src/gateways/fan_loyalty_gateway.rs:6:20
  |
6 |     routing::{get, post},
  |                    ^^^^

warning: unused import: `std::sync::Arc`
  --> services/api-gateway/src/gateways/mod.rs:32:5
   |
32 | use std::sync::Arc;
   |     ^^^^^^^^^^^^^^

warning: unused import: `crate::shared::domain::errors::AppError`
 --> services/api-gateway/src/services.rs:3:5
  |
3 | use crate::shared::domain::errors::AppError;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `RedisStreamsEventBus` and `RedisStreamsEventWorker`
 --> services/api-gateway/src/shared/infrastructure/app_state.rs:3:68
  |
3 | use crate::bounded_contexts::orchestrator::{EventBus, DomainEvent, RedisStreamsEventBus, RedisStreamsEventWorker};
  |                                                                    ^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `AlbumRepository` and `PlaylistRepository`
 --> services/api-gateway/src/shared/infrastructure/app_state.rs:4:60
  |
4 | use crate::bounded_contexts::music::domain::repositories::{AlbumRepository, PlaylistRepository};
  |                                                            ^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
  --> services/api-gateway/src/shared/infrastructure/auth/middleware.rs:12:5
   |
12 | use std::sync::Arc;
   |     ^^^^^^^^^^^^^^

warning: unused import: `crate::shared::domain::errors::AppError`
   --> services/api-gateway/src/shared/infrastructure/auth/middleware.rs:108:5
    |
108 | use crate::shared::domain::errors::AppError;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `generate_openapi_spec`
  --> services/api-gateway/src/openapi/router.rs:14:30
   |
14 | use crate::openapi::{ApiDoc, generate_openapi_spec};
   |                              ^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `utoipa::path`
 --> services/api-gateway/src/openapi/paths.rs:5:5
  |
5 | use utoipa::path;
  |     ^^^^^^^^^^^^

warning: unused import: `uuid::Uuid`
 --> services/api-gateway/src/openapi/paths.rs:6:5
  |
6 | use uuid::Uuid;
  |     ^^^^^^^^^^

warning: unused imports: `AddSongToPlaylistRequest`, `AlbumListResponse`, `Album`, `ApiError`, `ApiResponse`, `Campaign`, `CreateAlbumRequest`, `CreatePlaylistRequest`, `CreateSongRequest`, `CreateUserRequest`, `LoginRequest`, `LoginResponse`, `PlaylistListResponse`, `Playlist`, `SongListResponse`, `Song`, `UpdateAlbumRequest`, and `User`
  --> services/api-gateway/src/openapi/paths.rs:9:5
   |
9  |     User, CreateUserRequest, LoginRequest, LoginResponse, 
   |     ^^^^  ^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^  ^^^^^^^^^^^^^
10 |     Song, CreateSongRequest, SongListResponse,
   |     ^^^^  ^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^
11 |     Album, AlbumListResponse, CreateAlbumRequest, UpdateAlbumRequest,
   |     ^^^^^  ^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^
12 |     Playlist, PlaylistListResponse, CreatePlaylistRequest, AddSongToPlaylistRequest,
   |     ^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^
13 |     Campaign, ApiError, ApiResponse
   |     ^^^^^^^^  ^^^^^^^^  ^^^^^^^^^^^

warning: unused import: `super::*`
   --> services/api-gateway/src/openapi/mod.rs:458:9
    |
458 |     use super::*;
    |         ^^^^^^^^

warning: unused import: `Serialize`
  --> services/api-gateway/src/oauth/real_providers.rs:10:26
   |
10 | use serde::{Deserialize, Serialize};
   |                          ^^^^^^^^^

warning: unused import: `State`
 --> services/api-gateway/src/oauth/handlers.rs:9:22
  |
9 |     extract::{Query, State},
  |                      ^^^^^

warning: unused import: `std::collections::HashMap`
  --> services/api-gateway/src/oauth/handlers.rs:16:5
   |
16 | use std::collections::HashMap;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: use of deprecated function `base64::encode`: Use Engine::encode
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/nft_service.rs:75:49
   |
75 |         let ipfs_hash = format!("Qm{}", base64::encode(&json_data)[..46].to_string());
   |                                                 ^^^^^^
   |
   = note: `#[warn(deprecated)]` on by default

warning: use of deprecated function `base64::encode`: Use Engine::encode
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/nft_service.rs:90:21
   |
90 |             base64::encode(format!("{}{}{}", fan_wallet_address, ipfs_hash, wristband_id.0))
   |                     ^^^^^^

warning: use of deprecated function `base64::encode`: Use Engine::encode
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/nft_service.rs:185:21
    |
185 |             base64::encode(format!("{}{}{}", from_address, to_address, token_id))
    |                     ^^^^^^

error[E0782]: expected a type, found a trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:367:36
    |
367 |     async fn publish(&self, event: DomainEvent) -> Result<(), AppError> {
    |                                    ^^^^^^^^^^^
    |
help: use a new generic type parameter, constrained by `DomainEvent`
    |
367 -     async fn publish(&self, event: DomainEvent) -> Result<(), AppError> {
367 +     async fn publish(&self, event: T, T: DomainEvent) -> Result<(), AppError> {
    |
help: you can also use an opaque type, but users won't be able to specify the type parameter when calling the `fn`, having to rely exclusively on type inference
    |
367 |     async fn publish(&self, event: impl DomainEvent) -> Result<(), AppError> {
    |                                    ++++
help: alternatively, use a trait object to accept any type that implements `DomainEvent`, accessing its methods at runtime using dynamic dispatch
    |
367 |     async fn publish(&self, event: &dyn DomainEvent) -> Result<(), AppError> {
    |                                    ++++

warning: unused variable: `tradeable`
   --> services/api-gateway/src/bounded_contexts/campaign/infrastructure/postgres_repository.rs:276:17
    |
276 |             let tradeable = row.try_get::<bool, _>("tradeable").map_err(|e| format!("Failed to get tradeable: {}", e))?;
    |                 ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_tradeable`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: unused variable: `purchased_at`
   --> services/api-gateway/src/bounded_contexts/campaign/infrastructure/postgres_repository.rs:278:17
    |
278 | ...   let purchased_at = row.try_get::<Option<DateTime<Utc>>, _>("purchased_at").map_err(|e| format!("Failed to get purchased_at: {}", e))?;
    |           ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_purchased_at`

warning: unused variable: `created_at`
   --> services/api-gateway/src/bounded_contexts/campaign/infrastructure/postgres_repository.rs:279:17
    |
279 |             let created_at = row.try_get::<DateTime<Utc>, _>("created_at").map_err(|e| format!("Failed to get created_at: {}", e))?;
    |                 ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_created_at`

warning: unused variable: `state`
  --> services/api-gateway/src/bounded_contexts/campaign/presentation/mod.rs:42:32
   |
42 | async fn create_campaign(State(state): State<AppState>, Json(req): Json<CampaignApiRequest>) -> Result<(StatusCode, Json<CreateCampaignRe...
   |                                ^^^^^ help: if this is intentional, prefix it with an underscore: `_state`

warning: unused variable: `cmd`
  --> services/api-gateway/src/bounded_contexts/campaign/presentation/mod.rs:52:9
   |
52 |     let cmd = CreateCampaign {
   |         ^^^ help: if this is intentional, prefix it with an underscore: `_cmd`

error[E0046]: not all trait items implemented, missing: `get_followers`, `get_following`, `is_following`
  --> services/api-gateway/src/bounded_contexts/user/infrastructure/in_memory_repository.rs:28:1
   |
28 | impl UserRepository for InMemoryUserRepository {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `get_followers`, `get_following`, `is_following` in implementation
   |
  ::: services/api-gateway/src/bounded_contexts/user/domain/repository.rs:63:5
   |
63 |     async fn get_followers(&self, user_id: &UserId, page: u32, page_size: u32) -> Result<Vec<UserSummary>, AppError>;
   |     ----------------------------------------------------------------------------------------------------------------- `get_followers` from trait
...
66 |     async fn get_following(&self, user_id: &UserId, page: u32, page_size: u32) -> Result<Vec<UserSummary>, AppError>;
   |     ----------------------------------------------------------------------------------------------------------------- `get_following` from trait
...
69 |     async fn is_following(&self, follower_id: &UserId, followee_id: &UserId) -> Result<bool, AppError>;
   |     --------------------------------------------------------------------------------------------------- `is_following` from trait

warning: unused variable: `is_own_profile`
   --> services/api-gateway/src/bounded_contexts/user/presentation/controllers/user_controller.rs:485:9
    |
485 |     let is_own_profile = authenticated_user_id == user_id;
    |         ^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_is_own_profile`

error[E0599]: no method named `get_user_stats` found for struct `Arc<PostgresUserRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/user/presentation/controllers/user_controller.rs:590:41
    |
590 |     let stats = user_service.repository.get_user_stats(&user_id_vo).await
    |                                         ^^^^^^^^^^^^^^ method not found in `Arc<PostgresUserRepository>`
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `UserRepository` which provides `get_user_stats` is implemented but not in scope; perhaps you want to import it
    |
4   + use crate::bounded_contexts::user::domain::repository::UserRepository;
    |

error[E0599]: no method named `find_by_id` found for struct `Arc<PostgresUserRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/user/presentation/controllers/user_controller.rs:764:50
    |
764 |     let user_aggregate = user_service.repository.find_by_id(&user_id_vo).await
    |                                                  ^^^^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: there is a method `find_by_tier` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/user/domain/repository.rs:51:5
    |
51  |     async fn find_by_tier(&self, tier: &str, page: u32, page_size: u32) -> Result<Vec<UserSummary>, AppError>;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
help: trait `UserRepository` which provides `find_by_id` is implemented but not in scope; perhaps you want to import it
    |
4   + use crate::bounded_contexts::user::domain::repository::UserRepository;
    |

error[E0599]: no method named `update` found for struct `Arc<PostgresUserRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/user/presentation/controllers/user_controller.rs:793:29
    |
793 |     user_service.repository.update(&updated_aggregate).await
    |                             ^^^^^^ method not found in `Arc<PostgresUserRepository>`
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `UserRepository` which provides `update` is implemented but not in scope; perhaps you want to import it
    |
4   + use crate::bounded_contexts::user::domain::repository::UserRepository;
    |

error[E0599]: no method named `find_by_id` found for struct `Arc<PostgresUserRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/user/presentation/controllers/user_controller.rs:838:54
    |
838 |     let mut user_aggregate = user_service.repository.find_by_id(&user_id_vo).await
    |                                                      ^^^^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: there is a method `find_by_tier` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/user/domain/repository.rs:51:5
    |
51  |     async fn find_by_tier(&self, tier: &str, page: u32, page_size: u32) -> Result<Vec<UserSummary>, AppError>;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
help: trait `UserRepository` which provides `find_by_id` is implemented but not in scope; perhaps you want to import it
    |
4   + use crate::bounded_contexts::user::domain::repository::UserRepository;
    |

error[E0599]: no method named `update` found for struct `Arc<PostgresUserRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/user/presentation/controllers/user_controller.rs:847:29
    |
847 |     user_service.repository.update(&user_aggregate).await
    |                             ^^^^^^ method not found in `Arc<PostgresUserRepository>`
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `UserRepository` which provides `update` is implemented but not in scope; perhaps you want to import it
    |
4   + use crate::bounded_contexts::user::domain::repository::UserRepository;
    |

error[E0599]: no method named `find_by_id` found for struct `Arc<PostgresUserRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/user/presentation/controllers/user_controller.rs:878:54
    |
878 |     let mut user_aggregate = user_service.repository.find_by_id(&user_id_vo).await
    |                                                      ^^^^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: there is a method `find_by_tier` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/user/domain/repository.rs:51:5
    |
51  |     async fn find_by_tier(&self, tier: &str, page: u32, page_size: u32) -> Result<Vec<UserSummary>, AppError>;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
help: trait `UserRepository` which provides `find_by_id` is implemented but not in scope; perhaps you want to import it
    |
4   + use crate::bounded_contexts::user::domain::repository::UserRepository;
    |

error[E0599]: no method named `update` found for struct `Arc<PostgresUserRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/user/presentation/controllers/user_controller.rs:886:29
    |
886 |     user_service.repository.update(&user_aggregate).await
    |                             ^^^^^^ method not found in `Arc<PostgresUserRepository>`
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `UserRepository` which provides `update` is implemented but not in scope; perhaps you want to import it
    |
4   + use crate::bounded_contexts::user::domain::repository::UserRepository;
    |

error[E0599]: no method named `get_followers` found for struct `Arc<PostgresUserRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/user/presentation/controllers/user_controller.rs:913:55
    |
913 |     let followers_summaries = user_service.repository.get_followers(&user_id_vo, page, page_size).await
    |                                                       ^^^^^^^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `UserRepository` which provides `get_followers` is implemented but not in scope; perhaps you want to import it
    |
4   + use crate::bounded_contexts::user::domain::repository::UserRepository;
    |
help: there is a method `get_following` with a similar name
    |
913 -     let followers_summaries = user_service.repository.get_followers(&user_id_vo, page, page_size).await
913 +     let followers_summaries = user_service.repository.get_following(&user_id_vo, page, page_size).await
    |

error[E0599]: no method named `get_following` found for struct `Arc<PostgresUserRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/user/presentation/controllers/user_controller.rs:973:55
    |
973 |     let following_summaries = user_service.repository.get_following(&user_id_vo, page, page_size).await
    |                                                       ^^^^^^^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `UserRepository` which provides `get_following` is implemented but not in scope; perhaps you want to import it
    |
4   + use crate::bounded_contexts::user::domain::repository::UserRepository;
    |
help: there is a method `get_followers` with a similar name
    |
973 -     let following_summaries = user_service.repository.get_following(&user_id_vo, page, page_size).await
973 +     let following_summaries = user_service.repository.get_followers(&user_id_vo, page, page_size).await
    |

warning: unused variable: `user_id`
  --> services/api-gateway/src/bounded_contexts/music/application/use_cases/discover_music.rs:84:58
   |
84 |     pub async fn get_personalized_recommendations(&self, user_id: Uuid, limit: Option<usize>) -> Result<Vec<Song>, String> {
   |                                                          ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_user_id`

warning: unused variable: `video_hash`
   --> services/api-gateway/src/bounded_contexts/music/infrastructure/storage/ipfs_video_storage.rs:295:42
    |
295 |     async fn get_best_video_peers(&self, video_hash: &str, quality: &VideoQuality) -> IoResult<Vec<String>> {
    |                                          ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_video_hash`

error[E0046]: not all trait items implemented, missing: `find_all`, `count`
  --> services/api-gateway/src/bounded_contexts/music/infrastructure/mock_repository.rs:14:1
   |
14 | impl SongRepository for MockMusicRepository {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `find_all`, `count` in implementation
   |
  ::: services/api-gateway/src/bounded_contexts/music/domain/repositories/song_repository.rs:29:5
   |
29 |     async fn find_all(&self, limit: usize, offset: usize) -> RepositoryResult<Vec<Song>>;
   |     ------------------------------------------------------------------------------------- `find_all` from trait
...
37 |     async fn count(&self) -> RepositoryResult<usize>;
   |     ------------------------------------------------- `count` from trait

warning: unused variable: `end`
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/song_controller.rs:164:17
    |
164 |             let end = (offset + limit).min(total);
    |                 ^^^ help: if this is intentional, prefix it with an underscore: `_end`

warning: unused variable: `new_title`
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/song_controller.rs:405:17
    |
405 |             let new_title = SongTitle::new(title)
    |                 ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_new_title`

warning: unused variable: `new_genre`
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/song_controller.rs:417:17
    |
417 |             let new_genre = Genre::new(genre)
    |                 ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_new_genre`

warning: unused variable: `new_royalty`
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/song_controller.rs:429:17
    |
429 |             let new_royalty = RoyaltyPercentage::new(royalty_percentage)
    |                 ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_new_royalty`

warning: variable does not need to be mutable
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/song_controller.rs:375:13
    |
375 |         let mut song = state.song_repository
    |             ----^^^^
    |             |
    |             help: remove this `mut`
    |
    = note: `#[warn(unused_mut)]` on by default

warning: unused variable: `state`
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/song_controller.rs:641:15
    |
641 |         State(state): State<MusicAppState>,
    |               ^^^^^ help: if this is intentional, prefix it with an underscore: `_state`

error[E0599]: no method named `find_all` found for struct `Arc<postgres_album_repository::PostgresAlbumRepository>` in the current scope
  --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/album_controller.rs:77:14
   |
76 |           let albums = state.album_repository
   |  ______________________-
77 | |             .find_all(page, page_size)
   | |             -^^^^^^^^ method not found in `Arc<PostgresAlbumRepository>`
   | |_____________|
   |
   |
   = help: items from traits can only be used if the trait is in scope
help: trait `AlbumRepository` which provides `find_all` is implemented but not in scope; perhaps you want to import it
   |
1  + use crate::bounded_contexts::music::domain::repositories::album_repository::AlbumRepository;
   |

error[E0599]: `Arc<postgres_album_repository::PostgresAlbumRepository>` is not an iterator
  --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/album_controller.rs:89:14
   |
88 |           let total = state.album_repository
   |  _____________________-
89 | |             .count()
   | |             -^^^^^ `Arc<postgres_album_repository::PostgresAlbumRepository>` is not an iterator
   | |_____________|
   |
   |
  ::: services/api-gateway/src/bounded_contexts/music/infrastructure/repositories/postgres_album_repository.rs:21:1
   |
21 |   pub struct PostgresAlbumRepository {
   |   ---------------------------------- doesn't satisfy `_: Iterator`
   |
   = note: the following trait bounds were not satisfied:
           `Arc<postgres_album_repository::PostgresAlbumRepository>: Iterator`
           which is required by `&mut Arc<postgres_album_repository::PostgresAlbumRepository>: Iterator`
           `postgres_album_repository::PostgresAlbumRepository: Iterator`
           which is required by `&mut postgres_album_repository::PostgresAlbumRepository: Iterator`
note: the trait `Iterator` must be implemented
  --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/iter/traits/iterator.rs:39:1
   = help: items from traits can only be used if the trait is in scope
help: trait `AlbumRepository` which provides `count` is implemented but not in scope; perhaps you want to import it
   |
1  + use crate::bounded_contexts::music::domain::repositories::album_repository::AlbumRepository;
   |

error[E0599]: no method named `save` found for struct `Arc<postgres_album_repository::PostgresAlbumRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/album_controller.rs:176:14
    |
175 | /         state.album_repository
176 | |             .save(&album)
    | |             -^^^^ method not found in `Arc<PostgresAlbumRepository>`
    | |_____________|
    |
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `AlbumRepository` which provides `save` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::album_repository::AlbumRepository;
    |

error[E0599]: no method named `find_by_id` found for struct `Arc<postgres_album_repository::PostgresAlbumRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/album_controller.rs:208:14
    |
207 |           let album = state.album_repository
    |  _____________________-
208 | |             .find_by_id(&album_id)
    | |_____________-^^^^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `AlbumRepository` which provides `find_by_id` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::album_repository::AlbumRepository;
    |
help: there is a method `find_by_artist_id` with a similar name
    |
208 |             .find_by_artist_id(&album_id)
    |                      +++++++

error[E0599]: no method named `find_by_id` found for struct `Arc<postgres_album_repository::PostgresAlbumRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/album_controller.rs:248:14
    |
247 |           let mut album = state.album_repository
    |  _________________________-
248 | |             .find_by_id(&album_id)
    | |_____________-^^^^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `AlbumRepository` which provides `find_by_id` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::album_repository::AlbumRepository;
    |
help: there is a method `find_by_artist_id` with a similar name
    |
248 |             .find_by_artist_id(&album_id)
    |                      +++++++

error[E0599]: no method named `update` found for struct `Arc<postgres_album_repository::PostgresAlbumRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/album_controller.rs:301:14
    |
300 | /         state.album_repository
301 | |             .update(&album)
    | |             -^^^^^^ method not found in `Arc<PostgresAlbumRepository>`
    | |_____________|
    |
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `AlbumRepository` which provides `update` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::album_repository::AlbumRepository;
    |

error[E0599]: no method named `find_by_id` found for struct `Arc<postgres_album_repository::PostgresAlbumRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/album_controller.rs:334:14
    |
333 |           let album = state.album_repository
    |  _____________________-
334 | |             .find_by_id(&album_id)
    | |_____________-^^^^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `AlbumRepository` which provides `find_by_id` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::album_repository::AlbumRepository;
    |
help: there is a method `find_by_artist_id` with a similar name
    |
334 |             .find_by_artist_id(&album_id)
    |                      +++++++

error[E0599]: no method named `delete` found for struct `Arc<postgres_album_repository::PostgresAlbumRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/album_controller.rs:368:14
    |
367 | /         state.album_repository
368 | |             .delete(&album_id)
    | |             -^^^^^^ method not found in `Arc<PostgresAlbumRepository>`
    | |_____________|
    |
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `AlbumRepository` which provides `delete` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::album_repository::AlbumRepository;
    |

error[E0599]: no method named `find_all` found for struct `Arc<postgres_playlist_repository::PostgresPlaylistRepository>` in the current scope
  --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/playlist_controller.rs:74:14
   |
73 |           let playlists = state.playlist_repository
   |  _________________________-
74 | |             .find_all(page, page_size)
   | |             -^^^^^^^^ method not found in `Arc<PostgresPlaylistRepository>`
   | |_____________|
   |
   |
   = help: items from traits can only be used if the trait is in scope
help: trait `PlaylistRepository` which provides `find_all` is implemented but not in scope; perhaps you want to import it
   |
1  + use crate::bounded_contexts::music::domain::repositories::playlist_repository::PlaylistRepository;
   |

error[E0599]: `Arc<postgres_playlist_repository::PostgresPlaylistRepository>` is not an iterator
  --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/playlist_controller.rs:86:14
   |
85 |           let total = state.playlist_repository
   |  _____________________-
86 | |             .count()
   | |             -^^^^^ `Arc<postgres_playlist_repository::PostgresPlaylistRepository>` is not an iterator
   | |_____________|
   |
   |
  ::: services/api-gateway/src/bounded_contexts/music/infrastructure/repositories/postgres_playlist_repository.rs:26:1
   |
26 |   pub struct PostgresPlaylistRepository {
   |   ------------------------------------- doesn't satisfy `_: Iterator`
   |
   = note: the following trait bounds were not satisfied:
           `Arc<postgres_playlist_repository::PostgresPlaylistRepository>: Iterator`
           which is required by `&mut Arc<postgres_playlist_repository::PostgresPlaylistRepository>: Iterator`
           `postgres_playlist_repository::PostgresPlaylistRepository: Iterator`
           which is required by `&mut postgres_playlist_repository::PostgresPlaylistRepository: Iterator`
note: the trait `Iterator` must be implemented
  --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/iter/traits/iterator.rs:39:1
   = help: items from traits can only be used if the trait is in scope
help: trait `PlaylistRepository` which provides `count` is implemented but not in scope; perhaps you want to import it
   |
1  + use crate::bounded_contexts::music::domain::repositories::playlist_repository::PlaylistRepository;
   |

error[E0599]: no method named `save` found for struct `Arc<postgres_playlist_repository::PostgresPlaylistRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/playlist_controller.rs:154:14
    |
153 | /         state.playlist_repository
154 | |             .save(&playlist)
    | |             -^^^^ method not found in `Arc<PostgresPlaylistRepository>`
    | |_____________|
    |
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `PlaylistRepository` which provides `save` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::playlist_repository::PlaylistRepository;
    |

error[E0599]: no method named `find_by_id` found for struct `Arc<postgres_playlist_repository::PostgresPlaylistRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/playlist_controller.rs:186:14
    |
185 |           let playlist = state.playlist_repository
    |  ________________________-
186 | |             .find_by_id(&playlist_id)
    | |             -^^^^^^^^^^ method not found in `Arc<PostgresPlaylistRepository>`
    | |_____________|
    |
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `PlaylistRepository` which provides `find_by_id` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::playlist_repository::PlaylistRepository;
    |

error[E0599]: no method named `find_by_id` found for struct `Arc<postgres_playlist_repository::PostgresPlaylistRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/playlist_controller.rs:226:14
    |
225 |           let playlist = state.playlist_repository
    |  ________________________-
226 | |             .find_by_id(&playlist_id)
    | |             -^^^^^^^^^^ method not found in `Arc<PostgresPlaylistRepository>`
    | |_____________|
    |
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `PlaylistRepository` which provides `find_by_id` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::playlist_repository::PlaylistRepository;
    |

error[E0599]: no method named `add_song` found for struct `Arc<postgres_playlist_repository::PostgresPlaylistRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/playlist_controller.rs:255:14
    |
254 | /         state.playlist_repository
255 | |             .add_song(&playlist_id, &request.song_id)
    | |             -^^^^^^^^ method not found in `Arc<PostgresPlaylistRepository>`
    | |_____________|
    |
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `PlaylistRepository` which provides `add_song` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::playlist_repository::PlaylistRepository;
    |

error[E0599]: no method named `update` found for struct `Arc<postgres_playlist_repository::PostgresPlaylistRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/playlist_controller.rs:271:14
    |
270 | /         state.playlist_repository
271 | |             .update(&updated_playlist)
    | |             -^^^^^^ method not found in `Arc<PostgresPlaylistRepository>`
    | |_____________|
    |
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `PlaylistRepository` which provides `update` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::playlist_repository::PlaylistRepository;
    |

error[E0599]: no method named `find_by_id` found for struct `Arc<postgres_playlist_repository::PostgresPlaylistRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/playlist_controller.rs:297:14
    |
296 |           let playlist = state.playlist_repository
    |  ________________________-
297 | |             .find_by_id(&playlist_id)
    | |             -^^^^^^^^^^ method not found in `Arc<PostgresPlaylistRepository>`
    | |_____________|
    |
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `PlaylistRepository` which provides `find_by_id` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::playlist_repository::PlaylistRepository;
    |

error[E0599]: no method named `get_songs` found for struct `Arc<postgres_playlist_repository::PostgresPlaylistRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/playlist_controller.rs:326:14
    |
325 |           let playlist_songs = state.playlist_repository
    |  ______________________________-
326 | |             .get_songs(&playlist_id)
    | |             -^^^^^^^^^ method not found in `Arc<PostgresPlaylistRepository>`
    | |_____________|
    |
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `PlaylistRepository` which provides `get_songs` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::playlist_repository::PlaylistRepository;
    |

error[E0599]: no method named `remove_song` found for struct `Arc<postgres_playlist_repository::PostgresPlaylistRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/playlist_controller.rs:348:14
    |
347 | /         state.playlist_repository
348 | |             .remove_song(&playlist_id, &song_id)
    | |             -^^^^^^^^^^^ method not found in `Arc<PostgresPlaylistRepository>`
    | |_____________|
    |
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `PlaylistRepository` which provides `remove_song` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::playlist_repository::PlaylistRepository;
    |

error[E0599]: no method named `update` found for struct `Arc<postgres_playlist_repository::PostgresPlaylistRepository>` in the current scope
   --> services/api-gateway/src/bounded_contexts/music/presentation/controllers/playlist_controller.rs:366:14
    |
365 | /         state.playlist_repository
366 | |             .update(&updated_playlist)
    | |             -^^^^^^ method not found in `Arc<PostgresPlaylistRepository>`
    | |_____________|
    |
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `PlaylistRepository` which provides `update` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::music::domain::repositories::playlist_repository::PlaylistRepository;
    |

warning: unused variable: `session_id`
   --> services/api-gateway/src/bounded_contexts/listen_reward/application/listen_reward_application_service.rs:348:13
    |
348 |         let session_id = command.session_id.to_string(); // Temporary mock
    |             ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_session_id`

warning: unused variable: `session_for_usecase`
   --> services/api-gateway/src/bounded_contexts/listen_reward/application/listen_reward_application_service.rs:421:13
    |
421 |         let session_for_usecase = session;
    |             ^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_session_for_usecase`

warning: unused variable: `use_case_command`
   --> services/api-gateway/src/bounded_contexts/listen_reward/application/listen_reward_application_service.rs:431:13
    |
431 |         let use_case_command = CompleteListeningCommand {
    |             ^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_use_case_command`

warning: unused variable: `filter`
   --> services/api-gateway/src/bounded_contexts/listen_reward/application/listen_reward_application_service.rs:494:13
    |
494 |         let filter = crate::bounded_contexts::listen_reward::infrastructure::repositories::ListenSessionFilter {
    |             ^^^^^^ help: if this is intentional, prefix it with an underscore: `_filter`

warning: unused variable: `connection_string`
   --> services/api-gateway/src/bounded_contexts/listen_reward/infrastructure/event_publishers/mod.rs:115:21
    |
115 |                 let connection_string = config["connection_string"]
    |                     ^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_connection_string`

warning: unused variable: `controller`
   --> services/api-gateway/src/bounded_contexts/listen_reward/presentation/controllers/listen_reward_controller.rs:291:15
    |
291 |         State(controller): State<Arc<Self>>,
    |               ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_controller`

warning: unused variable: `controller`
   --> services/api-gateway/src/bounded_contexts/listen_reward/presentation/controllers/listen_reward_controller.rs:318:15
    |
318 |         State(controller): State<Arc<Self>>,
    |               ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_controller`

warning: unused variable: `controller`
   --> services/api-gateway/src/bounded_contexts/listen_reward/presentation/controllers/listen_reward_controller.rs:360:15
    |
360 |         State(controller): State<Arc<Self>>,
    |               ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_controller`

warning: unused variable: `controller`
   --> services/api-gateway/src/bounded_contexts/listen_reward/presentation/controllers/analytics_controller.rs:292:15
    |
292 |         State(controller): State<Arc<Self>>,
    |               ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_controller`

warning: unused variable: `controller`
   --> services/api-gateway/src/bounded_contexts/listen_reward/presentation/controllers/analytics_controller.rs:370:15
    |
370 |         State(controller): State<Arc<Self>>,
    |               ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_controller`

error[E0560]: struct `listen_reward::presentation::handlers::CompleteListenSessionResponse` has no field named `tier_progress`
   --> services/api-gateway/src/bounded_contexts/listen_reward/presentation/handlers.rs:366:9
    |
366 |         tier_progress,
    |         ^^^^^^^^^^^^^ `listen_reward::presentation::handlers::CompleteListenSessionResponse` does not have this field
    |
    = note: available fields are: `next_tier_progress`

warning: unused variable: `expected_return`
   --> services/api-gateway/src/bounded_contexts/fan_ventures/application/simple_service.rs:113:9
    |
113 |         expected_return: f64,
    |         ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_expected_return`

warning: unused variable: `duration_months`
   --> services/api-gateway/src/bounded_contexts/fan_ventures/application/simple_service.rs:114:9
    |
114 |         duration_months: u32,
    |         ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_duration_months`

warning: unused variable: `venture_ids`
   --> services/api-gateway/src/bounded_contexts/fan_ventures/application/simple_service.rs:272:13
    |
272 |         let venture_ids: Vec<Uuid> = investments.iter()
    |             ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_venture_ids`

error[E0308]: mismatched types
  --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:53:13
   |
53 |             serde_json::to_value(&venture.tags).map_err(|e| AppError::SerializationError(e.to_string()))?,
   |             ^^^^^^^^^^
   |             |
   |             expected `&[String]`, found `Value`
   |             expected due to the type of this binding
   |
   = note: expected reference `&[std::string::String]`
                   found enum `JsonValue`

error[E0308]: mismatched types
    --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:91:64
     |
91   |                 let tags: Vec<String> = serde_json::from_value(row.tags)
     |                                         ---------------------- ^^^^^^^^ expected `Value`, found `Option<Vec<String>>`
     |                                         |
     |                                         arguments to this function are incorrect
     |
     = note: expected enum `JsonValue`
                found enum `std::option::Option<Vec<std::string::String>>`
note: function defined here
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde_json-1.0.140/src/value/mod.rs:1030:8
     |
1030 | pub fn from_value<T>(value: Value) -> Result<T, Error>
     |        ^^^^^^^^^^
help: call `Into::into` on this expression to convert `std::option::Option<Vec<std::string::String>>` into `JsonValue`
     |
91   |                 let tags: Vec<String> = serde_json::from_value(row.tags.into())
     |                                                                        +++++++

error[E0599]: no method named `parse` found for enum `std::option::Option` in the current scope
  --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:99:44
   |
99 |                     category: row.category.parse().unwrap_or_default(),
   |                                            ^^^^^ method not found in `Option<String>`
   |
note: the method `parse` exists on the type `std::string::String`
  --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/str/mod.rs:2599:5
help: consider using `Option::expect` to unwrap the `std::string::String` value, panicking if the value is an `Option::None`
   |
99 |                     category: row.category.expect("REASON").parse().unwrap_or_default(),
   |                                           +++++++++++++++++

error[E0599]: no method named `parse` found for enum `std::option::Option` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:101:48
    |
101 |                     risk_level: row.risk_level.parse().unwrap_or_default(),
    |                                                ^^^^^ method not found in `Option<String>`
    |
note: the method `parse` exists on the type `std::string::String`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/str/mod.rs:2599:5
help: consider using `Option::expect` to unwrap the `std::string::String` value, panicking if the value is an `Option::None`
    |
101 |                     risk_level: row.risk_level.expect("REASON").parse().unwrap_or_default(),
    |                                               +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:102:38
    |
102 |                     expected_return: row.expected_return,
    |                                      ^^^^^^^^^^^^^^^^^^^ expected `f64`, found `Option<f64>`
    |
    = note: expected type `f64`
               found enum `std::option::Option<f64>`
help: consider using `Option::expect` to unwrap the `std::option::Option<f64>` value, panicking if the value is an `Option::None`
    |
102 |                     expected_return: row.expected_return.expect("REASON"),
    |                                                         +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:103:36
    |
103 |                     artist_rating: row.artist_rating,
    |                                    ^^^^^^^^^^^^^^^^^ expected `f64`, found `Option<f64>`
    |
    = note: expected type `f64`
               found enum `std::option::Option<f64>`
help: consider using `Option::expect` to unwrap the `std::option::Option<f64>` value, panicking if the value is an `Option::None`
    |
103 |                     artist_rating: row.artist_rating.expect("REASON"),
    |                                                     +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:104:47
    |
104 |                     artist_previous_ventures: row.artist_previous_ventures,
    |                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `i32`, found `Option<i32>`
    |
    = note: expected type `i32`
               found enum `std::option::Option<i32>`
help: consider using `Option::expect` to unwrap the `std::option::Option<i32>` value, panicking if the value is an `Option::None`
    |
104 |                     artist_previous_ventures: row.artist_previous_ventures.expect("REASON"),
    |                                                                           +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:105:42
    |
105 |                     artist_success_rate: row.artist_success_rate,
    |                                          ^^^^^^^^^^^^^^^^^^^^^^^ expected `f64`, found `Option<f64>`
    |
    = note: expected type `f64`
               found enum `std::option::Option<f64>`
help: consider using `Option::expect` to unwrap the `std::option::Option<f64>` value, panicking if the value is an `Option::None`
    |
105 |                     artist_success_rate: row.artist_success_rate.expect("REASON"),
    |                                                                 +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:107:38
    |
107 |                     current_funding: row.current_funding,
    |                                      ^^^^^^^^^^^^^^^^^^^ expected `f64`, found `Option<f64>`
    |
    = note: expected type `f64`
               found enum `std::option::Option<f64>`
help: consider using `Option::expect` to unwrap the `std::option::Option<f64>` value, panicking if the value is an `Option::None`
    |
107 |                     current_funding: row.current_funding.expect("REASON"),
    |                                                         +++++++++++++++++

error[E0599]: no method named `parse` found for enum `std::option::Option` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:110:40
    |
110 |                     status: row.status.parse().unwrap_or_default(),
    |                                        ^^^^^ method not found in `Option<String>`
    |
note: the method `parse` exists on the type `std::string::String`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/str/mod.rs:2599:5
help: consider using `Option::expect` to unwrap the `std::string::String` value, panicking if the value is an `Option::None`
    |
110 |                     status: row.status.expect("REASON").parse().unwrap_or_default(),
    |                                       +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:113:33
    |
113 |                     created_at: row.created_at,
    |                                 ^^^^^^^^^^^^^^ expected `DateTime<Utc>`, found `Option<DateTime<Utc>>`
    |
    = note: expected struct `chrono::DateTime<_>`
                 found enum `std::option::Option<chrono::DateTime<_>>`
help: consider using `Option::expect` to unwrap the `std::option::Option<chrono::DateTime<Utc>>` value, panicking if the value is an `Option::None`
    |
113 |                     created_at: row.created_at.expect("REASON"),
    |                                               +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:114:33
    |
114 |                     updated_at: row.updated_at,
    |                                 ^^^^^^^^^^^^^^ expected `DateTime<Utc>`, found `Option<DateTime<Utc>>`
    |
    = note: expected struct `chrono::DateTime<_>`
                 found enum `std::option::Option<chrono::DateTime<_>>`
help: consider using `Option::expect` to unwrap the `std::option::Option<chrono::DateTime<Utc>>` value, panicking if the value is an `Option::None`
    |
114 |                     updated_at: row.updated_at.expect("REASON"),
    |                                               +++++++++++++++++

error[E0308]: mismatched types
    --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:143:60
     |
143  |             let tags: Vec<String> = serde_json::from_value(row.tags)
     |                                     ---------------------- ^^^^^^^^ expected `Value`, found `Option<Vec<String>>`
     |                                     |
     |                                     arguments to this function are incorrect
     |
     = note: expected enum `JsonValue`
                found enum `std::option::Option<Vec<std::string::String>>`
note: function defined here
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde_json-1.0.140/src/value/mod.rs:1030:8
     |
1030 | pub fn from_value<T>(value: Value) -> Result<T, Error>
     |        ^^^^^^^^^^
help: call `Into::into` on this expression to convert `std::option::Option<Vec<std::string::String>>` into `JsonValue`
     |
143  |             let tags: Vec<String> = serde_json::from_value(row.tags.into())
     |                                                                    +++++++

error[E0599]: no method named `parse` found for enum `std::option::Option` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:151:40
    |
151 |                 category: row.category.parse().unwrap_or_default(),
    |                                        ^^^^^ method not found in `Option<String>`
    |
note: the method `parse` exists on the type `std::string::String`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/str/mod.rs:2599:5
help: consider using `Option::expect` to unwrap the `std::string::String` value, panicking if the value is an `Option::None`
    |
151 |                 category: row.category.expect("REASON").parse().unwrap_or_default(),
    |                                       +++++++++++++++++

error[E0599]: no method named `parse` found for enum `std::option::Option` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:153:44
    |
153 |                 risk_level: row.risk_level.parse().unwrap_or_default(),
    |                                            ^^^^^ method not found in `Option<String>`
    |
note: the method `parse` exists on the type `std::string::String`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/str/mod.rs:2599:5
help: consider using `Option::expect` to unwrap the `std::string::String` value, panicking if the value is an `Option::None`
    |
153 |                 risk_level: row.risk_level.expect("REASON").parse().unwrap_or_default(),
    |                                           +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:154:34
    |
154 |                 expected_return: row.expected_return,
    |                                  ^^^^^^^^^^^^^^^^^^^ expected `f64`, found `Option<f64>`
    |
    = note: expected type `f64`
               found enum `std::option::Option<f64>`
help: consider using `Option::expect` to unwrap the `std::option::Option<f64>` value, panicking if the value is an `Option::None`
    |
154 |                 expected_return: row.expected_return.expect("REASON"),
    |                                                     +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:155:32
    |
155 |                 artist_rating: row.artist_rating,
    |                                ^^^^^^^^^^^^^^^^^ expected `f64`, found `Option<f64>`
    |
    = note: expected type `f64`
               found enum `std::option::Option<f64>`
help: consider using `Option::expect` to unwrap the `std::option::Option<f64>` value, panicking if the value is an `Option::None`
    |
155 |                 artist_rating: row.artist_rating.expect("REASON"),
    |                                                 +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:156:43
    |
156 |                 artist_previous_ventures: row.artist_previous_ventures,
    |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `i32`, found `Option<i32>`
    |
    = note: expected type `i32`
               found enum `std::option::Option<i32>`
help: consider using `Option::expect` to unwrap the `std::option::Option<i32>` value, panicking if the value is an `Option::None`
    |
156 |                 artist_previous_ventures: row.artist_previous_ventures.expect("REASON"),
    |                                                                       +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:157:38
    |
157 |                 artist_success_rate: row.artist_success_rate,
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^ expected `f64`, found `Option<f64>`
    |
    = note: expected type `f64`
               found enum `std::option::Option<f64>`
help: consider using `Option::expect` to unwrap the `std::option::Option<f64>` value, panicking if the value is an `Option::None`
    |
157 |                 artist_success_rate: row.artist_success_rate.expect("REASON"),
    |                                                             +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:159:34
    |
159 |                 current_funding: row.current_funding,
    |                                  ^^^^^^^^^^^^^^^^^^^ expected `f64`, found `Option<f64>`
    |
    = note: expected type `f64`
               found enum `std::option::Option<f64>`
help: consider using `Option::expect` to unwrap the `std::option::Option<f64>` value, panicking if the value is an `Option::None`
    |
159 |                 current_funding: row.current_funding.expect("REASON"),
    |                                                     +++++++++++++++++

error[E0599]: no method named `parse` found for enum `std::option::Option` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:162:36
    |
162 |                 status: row.status.parse().unwrap_or_default(),
    |                                    ^^^^^ method not found in `Option<String>`
    |
note: the method `parse` exists on the type `std::string::String`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/str/mod.rs:2599:5
help: consider using `Option::expect` to unwrap the `std::string::String` value, panicking if the value is an `Option::None`
    |
162 |                 status: row.status.expect("REASON").parse().unwrap_or_default(),
    |                                   +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:165:29
    |
165 |                 created_at: row.created_at,
    |                             ^^^^^^^^^^^^^^ expected `DateTime<Utc>`, found `Option<DateTime<Utc>>`
    |
    = note: expected struct `chrono::DateTime<_>`
                 found enum `std::option::Option<chrono::DateTime<_>>`
help: consider using `Option::expect` to unwrap the `std::option::Option<chrono::DateTime<Utc>>` value, panicking if the value is an `Option::None`
    |
165 |                 created_at: row.created_at.expect("REASON"),
    |                                           +++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:166:29
    |
166 |                 updated_at: row.updated_at,
    |                             ^^^^^^^^^^^^^^ expected `DateTime<Utc>`, found `Option<DateTime<Utc>>`
    |
    = note: expected struct `chrono::DateTime<_>`
                 found enum `std::option::Option<chrono::DateTime<_>>`
help: consider using `Option::expect` to unwrap the `std::option::Option<chrono::DateTime<Utc>>` value, panicking if the value is an `Option::None`
    |
166 |                 updated_at: row.updated_at.expect("REASON"),
    |                                           +++++++++++++++++

error[E0599]: `InvestmentStatus` doesn't implement `std::fmt::Display`
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:247:31
    |
247 |             investment.status.to_string(),
    |                               ^^^^^^^^^ `InvestmentStatus` cannot be formatted with the default formatter
    |
   ::: services/api-gateway/src/bounded_contexts/fan_ventures/domain/entities.rs:59:1
    |
59  | pub enum InvestmentStatus {
    | ------------------------- method `to_string` not found for this enum because it doesn't satisfy `InvestmentStatus: ToString` or `InvestmentStatus: std::fmt::Display`
    |
    = note: the following trait bounds were not satisfied:
            `InvestmentStatus: std::fmt::Display`
            which is required by `InvestmentStatus: ToString`
    = note: in format strings you may be able to use `{:?}` (or {:#?} for pretty-print) instead
note: the trait `std::fmt::Display` must be implemented
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/fmt/mod.rs:1019:1
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following trait defines an item `to_string`, perhaps you need to implement it:
            candidate #1: `ToString`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:246:13
    |
246 |             serde_json::to_value(&investment.investment_type).map_err(|e| AppError::SerializationError(e.to_string()))?,
    |             ^^^^^^^^^^
    |             |
    |             expected `&str`, found `Value`
    |             expected due to the type of this binding

error[E0277]: the trait bound `InvestmentStatus: From<std::option::Option<std::string::String>>` is not satisfied
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:293:28
    |
293 |                 row.status.into(),
    |                            ^^^^ the trait `From<std::option::Option<std::string::String>>` is not implemented for `InvestmentStatus`
    |
    = note: required for `std::option::Option<std::string::String>` to implement `Into<InvestmentStatus>`

error[E0277]: the trait bound `InvestmentStatus: From<std::option::Option<std::string::String>>` is not satisfied
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:322:28
    |
322 |                 row.status.into(),
    |                            ^^^^ the trait `From<std::option::Option<std::string::String>>` is not implemented for `InvestmentStatus`
    |
    = note: required for `std::option::Option<std::string::String>` to implement `Into<InvestmentStatus>`

error[E0609]: no field `name` on type `&VentureTier`
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:364:18
    |
364 |             tier.name,
    |                  ^^^^ unknown field
    |
    = note: available fields are: `id`, `venture_id`, `tier_name`, `min_investment`, `max_investment` ... and 4 others

error[E0560]: struct `VentureTier` has no field named `name`
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:396:17
    |
396 |                 name: row.name,
    |                 ^^^^ `VentureTier` does not have this field
    |
    = note: available fields are: `tier_name`

error[E0609]: no field `benefits` on type `PostgresFanVenturesRepository::get_venture_tiers::{closure#0}::Record`
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:400:38
    |
400 | benefits: serde_json::from_value(row.benefits.unwrap_or(serde_json::Value::Null))
    |                                      ^^^^^^^^ unknown field
    |
    = note: available fields are: `id`, `venture_id`, `name`, `min_investment`, `max_investment` ... and 2 others

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:402:29
    |
402 |                 created_at: row.created_at,
    |                             ^^^^^^^^^^^^^^ expected `DateTime<Utc>`, found `Option<DateTime<Utc>>`
    |
    = note: expected struct `chrono::DateTime<_>`
                 found enum `std::option::Option<chrono::DateTime<_>>`
help: consider using `Option::expect` to unwrap the `std::option::Option<chrono::DateTime<Utc>>` value, panicking if the value is an `Option::None`
    |
402 |                 created_at: row.created_at.expect("REASON"),
    |                                           +++++++++++++++++

error[E0609]: no field `updated_at` on type `PostgresFanVenturesRepository::get_venture_tiers::{closure#0}::Record`
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:403:33
    |
403 |                 updated_at: row.updated_at,
    |                                 ^^^^^^^^^^ unknown field
    |
help: a field with a similar name exists
    |
403 -                 updated_at: row.updated_at,
403 +                 updated_at: row.created_at,
    |

error[E0560]: struct `VentureTier` has no field named `name`
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:438:17
    |
438 |                 name: row.name,
    |                 ^^^^ `VentureTier` does not have this field
    |
    = note: available fields are: `tier_name`

error[E0609]: no field `benefits` on type `PostgresFanVenturesRepository::get_tier_by_id::{closure#0}::Record`
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:442:38
    |
442 | benefits: serde_json::from_value(row.benefits.unwrap_or(serde_json::Value::Null))
    |                                      ^^^^^^^^ unknown field
    |
    = note: available fields are: `id`, `venture_id`, `name`, `min_investment`, `max_investment` ... and 2 others

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:444:29
    |
444 |                 created_at: row.created_at,
    |                             ^^^^^^^^^^^^^^ expected `DateTime<Utc>`, found `Option<DateTime<Utc>>`
    |
    = note: expected struct `chrono::DateTime<_>`
                 found enum `std::option::Option<chrono::DateTime<_>>`
help: consider using `Option::expect` to unwrap the `std::option::Option<chrono::DateTime<Utc>>` value, panicking if the value is an `Option::None`
    |
444 |                 created_at: row.created_at.expect("REASON"),
    |                                           +++++++++++++++++

error[E0609]: no field `updated_at` on type `PostgresFanVenturesRepository::get_tier_by_id::{closure#0}::Record`
   --> services/api-gateway/src/bounded_contexts/fan_ventures/infrastructure/postgres_repository.rs:445:33
    |
445 |                 updated_at: row.updated_at,
    |                                 ^^^^^^^^^^ unknown field
    |
help: a field with a similar name exists
    |
445 -                 updated_at: row.updated_at,
445 +                 updated_at: row.created_at,
    |

error: cannot construct `app_state::AppState` with struct literal syntax due to private fields
   --> services/api-gateway/src/bounded_contexts/fan_ventures/presentation/routes.rs:164:17
    |
164 |     let state = AppState {
    |                 ^^^^^^^^
    |
    = note: ...and other private field `_event_worker_handle` that was not provided

error: cannot construct `app_state::AppState` with struct literal syntax due to private fields
   --> services/api-gateway/src/bounded_contexts/fan_ventures/presentation/routes.rs:180:17
    |
180 |     let state = AppState {
    |                 ^^^^^^^^
    |
    = note: ...and other private field `_event_worker_handle` that was not provided

error: cannot construct `app_state::AppState` with struct literal syntax due to private fields
   --> services/api-gateway/src/bounded_contexts/fan_ventures/presentation/routes.rs:240:21
    |
240 |         let state = AppState {
    |                     ^^^^^^^^
    |
    = note: ...and other private field `_event_worker_handle` that was not provided

warning: unused variable: `user_id`
   --> services/api-gateway/src/bounded_contexts/notifications/domain/services.rs:152:9
    |
152 |         user_id: Uuid,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_user_id`

warning: unused variable: `artist_id`
   --> services/api-gateway/src/bounded_contexts/notifications/domain/services.rs:161:9
    |
161 |         artist_id: Uuid,
    |         ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_artist_id`

warning: unused variable: `venture_title`
   --> services/api-gateway/src/bounded_contexts/notifications/domain/services.rs:162:9
    |
162 |         venture_title: &str,
    |         ^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_venture_title`

warning: unused variable: `venture_id`
   --> services/api-gateway/src/bounded_contexts/notifications/domain/services.rs:163:9
    |
163 |         venture_id: Uuid,
    |         ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_venture_id`

warning: unused variable: `user_id`
   --> services/api-gateway/src/bounded_contexts/notifications/domain/services.rs:180:9
    |
180 |         user_id: Uuid,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_user_id`

warning: unused variable: `title`
   --> services/api-gateway/src/bounded_contexts/notifications/domain/services.rs:181:9
    |
181 |         title: &str,
    |         ^^^^^ help: if this is intentional, prefix it with an underscore: `_title`

warning: unused variable: `message`
   --> services/api-gateway/src/bounded_contexts/notifications/domain/services.rs:182:9
    |
182 |         message: &str,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_message`

warning: unused variable: `notification_type`
   --> services/api-gateway/src/bounded_contexts/notifications/domain/services.rs:183:9
    |
183 |         notification_type: NotificationType,
    |         ^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_notification_type`

warning: unused variable: `priority`
   --> services/api-gateway/src/bounded_contexts/notifications/domain/services.rs:184:9
    |
184 |         priority: NotificationPriority,
    |         ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_priority`

error[E0277]: `?` couldn't convert the error to `std::string::String`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/event_handlers.rs:432:108
    |
432 |                 let fan_verified_event: FanVerifiedEvent = serde_json::from_value(event.event_data.clone())?;
    |                                                            ------------------------------------------------^ the trait `From<serde_json::Error>` is not implemented for `std::string::String`
    |                                                            |
    |                                                            this can't be annotated with `?` because it has type `Result<_, serde_json::Error>`
    |
    = note: the question mark operation (`?`) implicitly performs a conversion on the error value using the `From` trait
    = help: the following other types implement trait `From<T>`:
              `std::string::String` implements `From<&mut str>`
              `std::string::String` implements `From<&std::string::String>`
              `std::string::String` implements `From<&str>`
              `std::string::String` implements `From<Box<str>>`
              `std::string::String` implements `From<Cow<'_, str>>`
              `std::string::String` implements `From<PgCiText>`
              `std::string::String` implements `From<Uuid>`
              `std::string::String` implements `From<char>`
              `std::string::String` implements `From<reqwest::Url>`

error[E0277]: the trait bound `fan_loyalty::domain::services::FanVerifiedEvent: DeserializeOwned` is not satisfied
    --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/event_handlers.rs:432:60
     |
432  |                 let fan_verified_event: FanVerifiedEvent = serde_json::from_value(event.event_data.clone())?;
     |                                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `for<'de> Deserialize<'de>` is not implemented for `fan_loyalty::domain::services::FanVerifiedEvent`
     |
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1331 others
     = note: required for `fan_loyalty::domain::services::FanVerifiedEvent` to implement `DeserializeOwned`
note: required by a bound in `from_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde_json-1.0.140/src/value/mod.rs:1032:8
     |
1030 | pub fn from_value<T>(value: Value) -> Result<T, Error>
     |        ---------- required by a bound in this function
1031 | where
1032 |     T: DeserializeOwned,
     |        ^^^^^^^^^^^^^^^^ required by this bound in `from_value`

error[E0277]: `?` couldn't convert the error to `std::string::String`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/event_handlers.rs:436:118
    |
436 |                 let wristband_created_event: WristbandCreatedEvent = serde_json::from_value(event.event_data.clone())?;
    |                                                                      ------------------------------------------------^ the trait `From<serde_json::Error>` is not implemented for `std::string::String`
    |                                                                      |
    |                                                                      this can't be annotated with `?` because it has type `Result<_, serde_json::Error>`
    |
    = note: the question mark operation (`?`) implicitly performs a conversion on the error value using the `From` trait
    = help: the following other types implement trait `From<T>`:
              `std::string::String` implements `From<&mut str>`
              `std::string::String` implements `From<&std::string::String>`
              `std::string::String` implements `From<&str>`
              `std::string::String` implements `From<Box<str>>`
              `std::string::String` implements `From<Cow<'_, str>>`
              `std::string::String` implements `From<PgCiText>`
              `std::string::String` implements `From<Uuid>`
              `std::string::String` implements `From<char>`
              `std::string::String` implements `From<reqwest::Url>`

error[E0277]: the trait bound `fan_loyalty::domain::services::WristbandCreatedEvent: DeserializeOwned` is not satisfied
    --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/event_handlers.rs:436:70
     |
436  |                 let wristband_created_event: WristbandCreatedEvent = serde_json::from_value(event.event_data.clone())?;
     |                                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `for<'de> Deserialize<'de>` is not implemented for `fan_loyalty::domain::services::WristbandCreatedEvent`
     |
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1331 others
     = note: required for `fan_loyalty::domain::services::WristbandCreatedEvent` to implement `DeserializeOwned`
note: required by a bound in `from_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde_json-1.0.140/src/value/mod.rs:1032:8
     |
1030 | pub fn from_value<T>(value: Value) -> Result<T, Error>
     |        ---------- required by a bound in this function
1031 | where
1032 |     T: DeserializeOwned,
     |        ^^^^^^^^^^^^^^^^ required by this bound in `from_value`

error[E0277]: `?` couldn't convert the error to `std::string::String`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/event_handlers.rs:440:122
    |
440 |                 let wristband_activated_event: WristbandActivatedEvent = serde_json::from_value(event.event_data.clone())?;
    |                                                                          ------------------------------------------------^ the trait `From<serde_json::Error>` is not implemented for `std::string::String`
    |                                                                          |
    |                                                                          this can't be annotated with `?` because it has type `Result<_, serde_json::Error>`
    |
    = note: the question mark operation (`?`) implicitly performs a conversion on the error value using the `From` trait
    = help: the following other types implement trait `From<T>`:
              `std::string::String` implements `From<&mut str>`
              `std::string::String` implements `From<&std::string::String>`
              `std::string::String` implements `From<&str>`
              `std::string::String` implements `From<Box<str>>`
              `std::string::String` implements `From<Cow<'_, str>>`
              `std::string::String` implements `From<PgCiText>`
              `std::string::String` implements `From<Uuid>`
              `std::string::String` implements `From<char>`
              `std::string::String` implements `From<reqwest::Url>`

error[E0277]: the trait bound `fan_loyalty::domain::services::WristbandActivatedEvent: DeserializeOwned` is not satisfied
    --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/event_handlers.rs:440:74
     |
440  |                 let wristband_activated_event: WristbandActivatedEvent = serde_json::from_value(event.event_data.clone())?;
     |                                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `for<'de> Deserialize<'de>` is not implemented for `fan_loyalty::domain::services::WristbandActivatedEvent`
     |
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1331 others
     = note: required for `fan_loyalty::domain::services::WristbandActivatedEvent` to implement `DeserializeOwned`
note: required by a bound in `from_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde_json-1.0.140/src/value/mod.rs:1032:8
     |
1030 | pub fn from_value<T>(value: Value) -> Result<T, Error>
     |        ---------- required by a bound in this function
1031 | where
1032 |     T: DeserializeOwned,
     |        ^^^^^^^^^^^^^^^^ required by this bound in `from_value`

error[E0277]: `?` couldn't convert the error to `std::string::String`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/event_handlers.rs:444:113
    |
444 |                 let qr_code_scanned_event: QrCodeScannedEvent = serde_json::from_value(event.event_data.clone())?;
    |                                                                 ------------------------------------------------^ the trait `From<serde_json::Error>` is not implemented for `std::string::String`
    |                                                                 |
    |                                                                 this can't be annotated with `?` because it has type `Result<_, serde_json::Error>`
    |
    = note: the question mark operation (`?`) implicitly performs a conversion on the error value using the `From` trait
    = help: the following other types implement trait `From<T>`:
              `std::string::String` implements `From<&mut str>`
              `std::string::String` implements `From<&std::string::String>`
              `std::string::String` implements `From<&str>`
              `std::string::String` implements `From<Box<str>>`
              `std::string::String` implements `From<Cow<'_, str>>`
              `std::string::String` implements `From<PgCiText>`
              `std::string::String` implements `From<Uuid>`
              `std::string::String` implements `From<char>`
              `std::string::String` implements `From<reqwest::Url>`

error[E0277]: the trait bound `fan_loyalty::domain::services::QrCodeScannedEvent: DeserializeOwned` is not satisfied
    --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/event_handlers.rs:444:65
     |
444  |                 let qr_code_scanned_event: QrCodeScannedEvent = serde_json::from_value(event.event_data.clone())?;
     |                                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `for<'de> Deserialize<'de>` is not implemented for `fan_loyalty::domain::services::QrCodeScannedEvent`
     |
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1331 others
     = note: required for `fan_loyalty::domain::services::QrCodeScannedEvent` to implement `DeserializeOwned`
note: required by a bound in `from_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde_json-1.0.140/src/value/mod.rs:1032:8
     |
1030 | pub fn from_value<T>(value: Value) -> Result<T, Error>
     |        ---------- required by a bound in this function
1031 | where
1032 |     T: DeserializeOwned,
     |        ^^^^^^^^^^^^^^^^ required by this bound in `from_value`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:28:13
    |
26  |         let verification_result = self.container.biometric_verification_service.verify_fan(
    |                                                                                 ---------- arguments to this method are incorrect
27  |             &command.fan_id,
28  |             &command.biometric_data,
    |             ^^^^^^^^^^^^^^^^^^^^^^^ expected `BiometricData`, found a different `BiometricData`
    |
    = note: `BiometricData` and `BiometricData` have similar names, but are actually distinct types
note: `BiometricData` is defined in module `crate::bounded_contexts::fan_loyalty::domain::entities` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/entities.rs:186:1
    |
186 | pub struct BiometricData {
    | ^^^^^^^^^^^^^^^^^^^^^^^^
note: `BiometricData` is defined in module `crate::bounded_contexts::fan_loyalty::domain::services` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:131:1
    |
131 | pub struct BiometricData {
    | ^^^^^^^^^^^^^^^^^^^^^^^^
note: method defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:12:14
    |
12  |     async fn verify_fan(&self, fan_id: &FanId, biometric_data: &BiometricData) -> Result<FanVerificationResult, String>;
    |              ^^^^^^^^^^                        --------------

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:46:61
    |
46  |         self.container.event_publisher.publish_fan_verified(&event).await?;
    |                                        -------------------- ^^^^^^ expected `FanVerifiedEvent`, found a different `FanVerifiedEvent`
    |                                        |
    |                                        arguments to this method are incorrect
    |
    = note: `FanVerifiedEvent` and `FanVerifiedEvent` have similar names, but are actually distinct types
note: `FanVerifiedEvent` is defined in module `crate::bounded_contexts::fan_loyalty::domain::events` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/events.rs:15:1
    |
15  | pub struct FanVerifiedEvent {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^
note: `FanVerifiedEvent` is defined in module `crate::bounded_contexts::fan_loyalty::domain::services` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:292:1
    |
292 | pub struct FanVerifiedEvent {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^
note: method defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:110:14
    |
110 |     async fn publish_fan_verified(&self, event: &FanVerifiedEvent) -> Result<(), String>;
    |              ^^^^^^^^^^^^^^^^^^^^        -----

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:90:66
    |
90  |         self.container.event_publisher.publish_wristband_created(&event).await?;
    |                                        ------------------------- ^^^^^^ expected `WristbandCreatedEvent`, found a different `WristbandCreatedEvent`
    |                                        |
    |                                        arguments to this method are incorrect
    |
    = note: `WristbandCreatedEvent` and `WristbandCreatedEvent` have similar names, but are actually distinct types
note: `WristbandCreatedEvent` is defined in module `crate::bounded_contexts::fan_loyalty::domain::events` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/events.rs:25:1
    |
25  | pub struct WristbandCreatedEvent {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
note: `WristbandCreatedEvent` is defined in module `crate::bounded_contexts::fan_loyalty::domain::services` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:303:1
    |
303 | pub struct WristbandCreatedEvent {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
note: method defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:113:14
    |
113 |     async fn publish_wristband_created(&self, event: &WristbandCreatedEvent) -> Result<(), String>;
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^        -----

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:115:68
    |
115 |         self.container.event_publisher.publish_wristband_activated(&event).await?;
    |                                        --------------------------- ^^^^^^ expected `WristbandActivatedEvent`, found a different `WristbandActivatedEvent`
    |                                        |
    |                                        arguments to this method are incorrect
    |
    = note: `WristbandActivatedEvent` and `WristbandActivatedEvent` have similar names, but are actually distinct types
note: `WristbandActivatedEvent` is defined in module `crate::bounded_contexts::fan_loyalty::domain::events` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/events.rs:35:1
    |
35  | pub struct WristbandActivatedEvent {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
note: `WristbandActivatedEvent` is defined in module `crate::bounded_contexts::fan_loyalty::domain::services` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:314:1
    |
314 | pub struct WristbandActivatedEvent {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
note: method defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:116:14
    |
116 |     async fn publish_wristband_activated(&self, event: &WristbandActivatedEvent) -> Result<(), String>;
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^        -----

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:149:16
    |
149 |         if let Some(wristband_id) = wristband_id {
    |                ^^^^^^^^^^^^^^^^^^   ------------ this expression has type `fan_loyalty::domain::services::QrCodeValidation`
    |                |
    |                expected `QrCodeValidation`, found `Option<_>`
    |
    = note: expected struct `fan_loyalty::domain::services::QrCodeValidation`
                 found enum `std::option::Option<_>`
help: you might have meant to use field `wristband_id` whose type is `std::option::Option<fan_loyalty::domain::entities::WristbandId>`
    |
149 |         if let Some(wristband_id) = wristband_id.wristband_id {
    |                                                 +++++++++++++

error[E0061]: this method takes 3 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:177:43
    |
177 |         self.container.qr_code_repository.save_qr_code(&qr_code).await?;
    |                                           ^^^^^^^^^^^^----------
    |                                                       ||
    |                                                       |expected `&WristbandId`, found `&QrCode`
    |                                                       two arguments of type `&str` and `chrono::DateTime<Utc>` are missing
    |
    = note: expected reference `&fan_loyalty::domain::entities::WristbandId`
               found reference `&fan_loyalty::domain::services::QrCode`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:58:14
    |
58  |     async fn save_qr_code(
    |              ^^^^^^^^^^^^
59  |         &self,
60  |         wristband_id: &WristbandId,
    |         ------------
61  |         qr_code: &str,
    |         -------
62  |         expires_at: DateTime<Utc>,
    |         ----------
help: provide the arguments
    |
177 -         self.container.qr_code_repository.save_qr_code(&qr_code).await?;
177 +         self.container.qr_code_repository.save_qr_code(/* &fan_loyalty::domain::entities::WristbandId */, /* &str */, /* chrono::DateTime<Utc> */).await?;
    |

error[E0599]: no method named `publish_qr_code_generated` found for struct `Arc<(dyn fan_loyalty::domain::services::EventPublisher + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:186:40
    |
186 |         self.container.event_publisher.publish_qr_code_generated(&event).await?;
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
help: there is a method `publish_qr_code_scanned` with a similar name
    |
186 -         self.container.event_publisher.publish_qr_code_generated(&event).await?;
186 +         self.container.event_publisher.publish_qr_code_scanned(&event).await?;
    |

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:188:12
    |
188 |         Ok(qr_code)
    |         -- ^^^^^^^ expected `fan_loyalty::domain::entities::QrCode`, found `fan_loyalty::domain::services::QrCode`
    |         |
    |         arguments to this enum variant are incorrect
    |
    = note: `fan_loyalty::domain::services::QrCode` and `fan_loyalty::domain::entities::QrCode` have similar names, but are actually distinct types
note: `fan_loyalty::domain::services::QrCode` is defined in module `crate::bounded_contexts::fan_loyalty::domain::services` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:176:1
    |
176 | pub struct QrCode {
    | ^^^^^^^^^^^^^^^^^
note: `fan_loyalty::domain::entities::QrCode` is defined in module `crate::bounded_contexts::fan_loyalty::domain::entities` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/entities.rs:123:1
    |
123 | pub struct QrCode {
    | ^^^^^^^^^^^^^^^^^
help: the type constructed contains `fan_loyalty::domain::services::QrCode` due to the type of the argument passed
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:188:9
    |
188 |         Ok(qr_code)
    |         ^^^-------^
    |            |
    |            this argument influences the type of `Ok`
note: tuple variant defined here
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:532:5

warning: unused variable: `fan_wallet_address`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/nft_service.rs:167:9
    |
167 |         fan_wallet_address: &str,
    |         ^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_fan_wallet_address`

warning: unused variable: `token_id`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/nft_service.rs:168:9
    |
168 |         token_id: &str,
    |         ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_token_id`

warning: unused variable: `wristband_id`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/nft_service.rs:255:9
    |
255 |         wristband_id: &WristbandId,
    |         ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_wristband_id`

warning: unused variable: `fan_wallet_address`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/nft_service.rs:256:9
    |
256 |         fan_wallet_address: &str,
    |         ^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_fan_wallet_address`

error[E0507]: cannot move out of `*wristband_id` which is behind a shared reference
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/qr_service.rs:35:27
   |
35 |             wristband_id: *wristband_id,
   |                           ^^^^^^^^^^^^^ move occurs because `*wristband_id` has type `fan_loyalty::domain::entities::WristbandId`, which does not implement the `Copy` trait
   |
help: consider cloning the value if the performance cost is acceptable
   |
35 -             wristband_id: *wristband_id,
35 +             wristband_id: wristband_id.clone(),
   |

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/qr_service.rs:47:50
    |
47  |         if !self.verify_signature(&wristband_id, signature) {
    |                  ----------------                ^^^^^^^^^ expected `&str`, found `String`
    |                  |
    |                  arguments to this method are incorrect
    |
note: method defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/qr_service.rs:143:8
    |
143 |     fn verify_signature(&self, wristband_id: &WristbandId, signature: &str) -> bool {
    |        ^^^^^^^^^^^^^^^^                                    ---------------
help: consider borrowing here
    |
47  |         if !self.verify_signature(&wristband_id, &signature) {
    |                                                  +

warning: unused variable: `wristband_id`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/qr_service.rs:174:9
    |
174 |         wristband_id: &WristbandId,
    |         ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_wristband_id`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:209:29
    |
209 |             biometric_data: request.biometric_data,
    |                             ^^^^^^^^^^^^^^^^^^^^^^ expected `BiometricData`, found `rest_handlers::BiometricData`
    |
    = note: `rest_handlers::BiometricData` and `BiometricData` have similar names, but are actually distinct types
note: `rest_handlers::BiometricData` is defined in module `crate::bounded_contexts::fan_loyalty::infrastructure::rest_handlers` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:79:1
    |
79  | pub struct BiometricData {
    | ^^^^^^^^^^^^^^^^^^^^^^^^
note: `BiometricData` is defined in module `crate::bounded_contexts::fan_loyalty::domain::entities` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/entities.rs:186:1
    |
186 | pub struct BiometricData {
    | ^^^^^^^^^^^^^^^^^^^^^^^^

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:211:23
    |
211 |             location: request.location,
    |                       ^^^^^^^^^^^^^^^^ expected `LocationData`, found `rest_handlers::LocationData`
    |
    = note: `rest_handlers::LocationData` and `LocationData` have similar names, but are actually distinct types
note: `rest_handlers::LocationData` is defined in module `crate::bounded_contexts::fan_loyalty::infrastructure::rest_handlers` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:102:1
    |
102 | pub struct LocationData {
    | ^^^^^^^^^^^^^^^^^^^^^^^
note: `LocationData` is defined in module `crate::bounded_contexts::fan_loyalty::domain::entities` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/entities.rs:226:1
    |
226 | pub struct LocationData {
    | ^^^^^^^^^^^^^^^^^^^^^^^

error[E0599]: no method named `verify_fan` found for struct `fan_loyalty::application::handlers::FanVerificationHandler` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:214:41
    |
214 |         match handlers.fan_verification.verify_fan(command).await {
    |                                         ^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:12:1
    |
12  | pub struct FanVerificationHandler {
    | --------------------------------- method `verify_fan` not found for this struct
    |
    = help: items from traits can only be used if the trait is implemented and in scope
note: `BiometricVerificationService` defines an item `verify_fan`, perhaps you need to implement it
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:10:1
    |
10  | pub trait BiometricVerificationService: Send + Sync {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
help: there is a method `handle_verify_fan` with a similar name
    |
214 |         match handlers.fan_verification.handle_verify_fan(command).await {
    |                                         +++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:257:25
    |
257 |             concert_id: request.concert_id,
    |                         ^^^^^^^^^^^^^^^^^^- help: try using a conversion method: `.to_string()`
    |                         |
    |                         expected `String`, found `Uuid`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:258:24
    |
258 |             artist_id: request.artist_id,
    |                        ^^^^^^^^^^^^^^^^^- help: try using a conversion method: `.to_string()`
    |                        |
    |                        expected `String`, found `Uuid`

error[E0063]: missing field `fan_wallet_address` in initializer of `fan_loyalty::application::commands::CreateWristbandCommand`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:255:23
    |
255 |         let command = CreateWristbandCommand {
    |                       ^^^^^^^^^^^^^^^^^^^^^^ missing `fan_wallet_address`

error[E0599]: no method named `create_wristband` found for struct `fan_loyalty::application::handlers::WristbandHandler` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:262:42
    |
262 |         match handlers.wristband_handler.create_wristband(command).await {
    |                                          ^^^^^^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:54:1
    |
54  | pub struct WristbandHandler {
    | --------------------------- method `create_wristband` not found for this struct
    |
    = help: items from traits can only be used if the trait is implemented and in scope
note: `WristbandService` defines an item `create_wristband`, perhaps you need to implement it
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:32:1
    |
32  | pub trait WristbandService: Send + Sync {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
help: there is a method `handle_create_wristband` with a similar name
    |
262 |         match handlers.wristband_handler.handle_create_wristband(command).await {
    |                                          +++++++

error[E0599]: no method named `get_wristband` found for struct `fan_loyalty::application::handlers::WristbandHandler` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:324:42
    |
324 |         match handlers.wristband_handler.get_wristband(query).await {
    |                                          ^^^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:54:1
    |
54  | pub struct WristbandHandler {
    | --------------------------- method `get_wristband` not found for this struct
    |
    = help: items from traits can only be used if the trait is implemented and in scope
note: `WristbandRepository` defines an item `get_wristband`, perhaps you need to implement it
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:29:1
    |
29  | pub trait WristbandRepository: Send + Sync {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
help: there is a method `handle_get_wristband` with a similar name
    |
324 |         match handlers.wristband_handler.handle_get_wristband(query).await {
    |                                          +++++++

error[E0560]: struct `fan_loyalty::application::commands::ActivateWristbandCommand` has no field named `fan_id`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:360:13
    |
360 |             fan_id: FanId(request.fan_id),
    |             ^^^^^^ `fan_loyalty::application::commands::ActivateWristbandCommand` does not have this field
    |
    = note: available fields are: `activation_code`

error[E0560]: struct `fan_loyalty::application::commands::ActivateWristbandCommand` has no field named `activation_reason`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:361:13
    |
361 |             activation_reason: request.activation_reason,
    |             ^^^^^^^^^^^^^^^^^ `fan_loyalty::application::commands::ActivateWristbandCommand` does not have this field
    |
    = note: available fields are: `activation_code`

error[E0599]: no method named `activate_wristband` found for struct `fan_loyalty::application::handlers::WristbandHandler` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:364:42
    |
364 |         match handlers.wristband_handler.activate_wristband(command).await {
    |                                          ^^^^^^^^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:54:1
    |
54  | pub struct WristbandHandler {
    | --------------------------- method `activate_wristband` not found for this struct
    |
    = help: items from traits can only be used if the trait is implemented and in scope
note: `WristbandService` defines an item `activate_wristband`, perhaps you need to implement it
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:32:1
    |
32  | pub trait WristbandService: Send + Sync {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
help: there is a method `handle_activate_wristband` with a similar name
    |
364 |         match handlers.wristband_handler.handle_activate_wristband(command).await {
    |                                          +++++++

error[E0599]: no method named `validate_qr_code` found for struct `fan_loyalty::application::handlers::QrCodeHandler` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:394:35
    |
394 |         match handlers.qr_handler.validate_qr_code(query).await {
    |                                   ^^^^^^^^^^^^^^^^ method not found in `QrCodeHandler`
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:133:1
    |
133 | pub struct QrCodeHandler {
    | ------------------------ method `validate_qr_code` not found for this struct
    |
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following traits define an item `validate_qr_code`, perhaps you need to implement one of them:
            candidate #1: `fan_loyalty::domain::repositories::QrCodeRepository`
            candidate #2: `fan_loyalty::domain::repository::QrCodeRepository`
            candidate #3: `fan_loyalty::domain::services::QrCodeService`

error[E0599]: no method named `scan_qr_code` found for struct `fan_loyalty::application::handlers::QrCodeHandler` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:425:35
    |
425 |         match handlers.qr_handler.scan_qr_code(qr_code, request).await {
    |                                   ^^^^^^^^^^^^ method not found in `QrCodeHandler`
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:133:1
    |
133 | pub struct QrCodeHandler {
    | ------------------------ method `scan_qr_code` not found for this struct
    |
    = help: items from traits can only be used if the trait is implemented and in scope
note: `fan_loyalty::domain::services::QrCodeService` defines an item `scan_qr_code`, perhaps you need to implement it
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:54:1
    |
54  | pub trait QrCodeService: Send + Sync {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0053]: method `verify_fan` has an incompatible type for trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:58:64
   |
58 |     async fn verify_fan(&self, fan_id: &FanId, biometric_data: &BiometricData) -> Result<FanVerificationResult, String> {
   |                                                                ^^^^^^^^^^^^^^ expected `BiometricData`, found `adapters::BiometricData`
   |
note: type in trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:12:64
   |
12 |     async fn verify_fan(&self, fan_id: &FanId, biometric_data: &BiometricData) -> Result<FanVerificationResult, String>;
   |                                                                ^^^^^^^^^^^^^^
   = note: expected signature `fn(&'life0 ExternalBiometricAdapter, &'life1 fan_loyalty::domain::entities::FanId, &'life2 fan_loyalty::domain::services::BiometricData) -> Pin<_>`
              found signature `fn(&'life0 ExternalBiometricAdapter, &'life1 fan_loyalty::domain::entities::FanId, &'life2 adapters::BiometricData) -> Pin<_>`
help: change the parameter type to match the trait
   |
58 |     async fn verify_fan(&self, fan_id: &FanId, biometric_data: &'life2 fan_loyalty::domain::services::BiometricData) -> Result<FanVerificationResult, String> {
   |                                                                 ++++++++++++++++++++++++++++++++++++++

error[E0053]: method `calculate_confidence_score` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:102:64
    |
102 |     async fn calculate_confidence_score(&self, biometric_data: &BiometricData) -> Result<f32, String> {
    |                                                                ^^^^^^^^^^^^^^ expected `BiometricData`, found `adapters::BiometricData`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:18:64
    |
18  |     async fn calculate_confidence_score(&self, biometric_data: &BiometricData) -> Result<f32, String>;
    |                                                                ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 ExternalBiometricAdapter, &'life1 fan_loyalty::domain::services::BiometricData) -> Pin<_>`
               found signature `fn(&'life0 ExternalBiometricAdapter, &'life1 adapters::BiometricData) -> Pin<_>`
help: change the parameter type to match the trait
    |
102 |     async fn calculate_confidence_score(&self, biometric_data: &'life1 fan_loyalty::domain::services::BiometricData) -> Result<f32, String> {
    |                                                                 ++++++++++++++++++++++++++++++++++++++

error[E0046]: not all trait items implemented, missing: `verify_fan_biometrics`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:57:1
   |
57 | impl BiometricVerificationService for ExternalBiometricAdapter {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `verify_fan_biometrics` in implementation
   |
  ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:15:5
   |
15 |     async fn verify_fan_biometrics(&self, fan_id: &FanId, biometric_data: &BiometricData) -> Result<FanVerificationResult, String>;
   |     ------------------------------------------------------------------------------------------------------------------------------- `verify_fan_biometrics` from trait

error[E0053]: method `create_nft` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:281:1
    |
281 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `NftCreationResult`, found `adapters::NftCreationResult`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:69:1
    |
69  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 ExternalNftAdapter, &'life1 fan_loyalty::domain::entities::NftWristband, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::services::NftCreationResult, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 ExternalNftAdapter, &'life1 fan_loyalty::domain::entities::NftWristband, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<adapters::NftCreationResult, std::string::String>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
281 - #[async_trait]
281 + Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::services::NftCreationResult, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0053]: method `get_nft_metadata` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:281:1
    |
281 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `NftMetadata`, found `adapters::NftMetadata`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:69:1
    |
69  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 ExternalNftAdapter, &'life1 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::services::NftMetadata>, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 ExternalNftAdapter, &'life1 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<adapters::NftMetadata>, std::string::String>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
281 - #[async_trait]
281 + Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::services::NftMetadata>, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0046]: not all trait items implemented, missing: `mint_nft_wristband`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:282:1
    |
282 | impl NftService for ExternalNftAdapter {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `mint_nft_wristband` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:84:5
    |
84  |     async fn mint_nft_wristband(&self, wristband: &NftWristband, fan_wallet_address: &str) -> Result<String, String>;
    |     ----------------------------------------------------------------------------------------------------------------- `mint_nft_wristband` from trait

error[E0053]: method `generate_biometric_proof` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:384:78
    |
384 |     async fn generate_biometric_proof(&self, fan_id: &FanId, biometric_data: &BiometricProofData) -> Result<ZkBiometricProof, String> {
    |                                                                              ^^^^^^^^^^^^^^^^^^^ expected `BiometricProofData`, found `adapters::BiometricProofData`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:91:78
    |
91  |     async fn generate_biometric_proof(&self, fan_id: &FanId, biometric_data: &BiometricProofData) -> Result<ZkBiometricProof, String>;
    |                                                                              ^^^^^^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 ExternalZkAdapter, &'life1 fan_loyalty::domain::entities::FanId, &'life2 fan_loyalty::domain::entities::BiometricProofData) -> Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::services::ZkBiometricProof, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 ExternalZkAdapter, &'life1 fan_loyalty::domain::entities::FanId, &'life2 adapters::BiometricProofData) -> Pin<Box<(dyn futures_util::Future<Output = Result<adapters::ZkBiometricProof, std::string::String>> + std::marker::Send + 'async_trait)>>`
help: change the parameter type to match the trait
    |
384 |     async fn generate_biometric_proof(&self, fan_id: &FanId, biometric_data: &'life2 fan_loyalty::domain::entities::BiometricProofData) -> Result<ZkBiometricProof, String> {
    |                                                                               ++++++++++++++++++++++++++++++++++++++

error[E0053]: method `generate_wristband_proof` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:382:1
    |
382 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `ZkWristbandProof`, found `adapters::ZkWristbandProof`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:88:1
    |
88  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 ExternalZkAdapter, &'life1 fan_loyalty::domain::entities::WristbandId, &'life2 fan_loyalty::domain::entities::FanId) -> Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::services::ZkWristbandProof, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 ExternalZkAdapter, &'life1 fan_loyalty::domain::entities::WristbandId, &'life2 fan_loyalty::domain::entities::FanId) -> Pin<Box<(dyn futures_util::Future<Output = Result<adapters::ZkWristbandProof, std::string::String>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
382 - #[async_trait]
382 + Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::services::ZkWristbandProof, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0053]: method `verify_zk_proof` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:447:44
    |
447 |     async fn verify_zk_proof(&self, proof: &ZkProof) -> Result<bool, String> {
    |                                            ^^^^^^^^ expected `fan_loyalty::domain::services::ZkProof`, found `adapters::ZkProof`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:100:44
    |
100 |     async fn verify_zk_proof(&self, proof: &ZkProof) -> Result<bool, String>;
    |                                            ^^^^^^^^
    = note: expected signature `fn(&'life0 ExternalZkAdapter, &'life1 fan_loyalty::domain::services::ZkProof) -> Pin<_>`
               found signature `fn(&'life0 ExternalZkAdapter, &'life1 adapters::ZkProof) -> Pin<_>`
help: change the parameter type to match the trait
    |
447 |     async fn verify_zk_proof(&self, proof: &'life1 fan_loyalty::domain::services::ZkProof) -> Result<bool, String> {
    |                                             ++++++++++++++++++++++++++++++++++++++

error[E0053]: method `get_proof_status` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:382:1
    |
382 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `ZkProofStatus`, found `adapters::ZkProofStatus`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:88:1
    |
88  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 ExternalZkAdapter, &'life1 Uuid) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::services::ZkProofStatus>, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 ExternalZkAdapter, &'life1 Uuid) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<adapters::ZkProofStatus>, std::string::String>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
382 - #[async_trait]
382 + Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::services::ZkProofStatus>, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0046]: not all trait items implemented, missing: `generate_zk_proof`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:383:1
    |
383 | impl ZkProofService for ExternalZkAdapter {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `generate_zk_proof` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:94:5
    |
94  |     async fn generate_zk_proof(&self, data: &[u8]) -> Result<uuid::Uuid, String>;
    |     ----------------------------------------------------------------------------- `generate_zk_proof` from trait

error[E0053]: method `publish_fan_verified` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:516:49
    |
516 |     async fn publish_fan_verified(&self, event: &FanVerifiedEvent) -> Result<(), String> {
    |                                                 ^^^^^^^^^^^^^^^^^ expected `FanVerifiedEvent`, found `adapters::FanVerifiedEvent`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:110:49
    |
110 |     async fn publish_fan_verified(&self, event: &FanVerifiedEvent) -> Result<(), String>;
    |                                                 ^^^^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 ExternalEventAdapter, &'life1 fan_loyalty::domain::services::FanVerifiedEvent) -> Pin<_>`
               found signature `fn(&'life0 ExternalEventAdapter, &'life1 adapters::FanVerifiedEvent) -> Pin<_>`
help: change the parameter type to match the trait
    |
516 |     async fn publish_fan_verified(&self, event: &'life1 fan_loyalty::domain::services::FanVerifiedEvent) -> Result<(), String> {
    |                                                  ++++++++++++++++++++++++++++++++++++++

error[E0053]: method `publish_wristband_created` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:529:54
    |
529 |     async fn publish_wristband_created(&self, event: &WristbandCreatedEvent) -> Result<(), String> {
    |                                                      ^^^^^^^^^^^^^^^^^^^^^^ expected `WristbandCreatedEvent`, found `adapters::WristbandCreatedEvent`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:113:54
    |
113 |     async fn publish_wristband_created(&self, event: &WristbandCreatedEvent) -> Result<(), String>;
    |                                                      ^^^^^^^^^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 ExternalEventAdapter, &'life1 fan_loyalty::domain::services::WristbandCreatedEvent) -> Pin<_>`
               found signature `fn(&'life0 ExternalEventAdapter, &'life1 adapters::WristbandCreatedEvent) -> Pin<_>`
help: change the parameter type to match the trait
    |
529 |     async fn publish_wristband_created(&self, event: &'life1 fan_loyalty::domain::services::WristbandCreatedEvent) -> Result<(), String> {
    |                                                       ++++++++++++++++++++++++++++++++++++++

error[E0053]: method `publish_wristband_activated` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:542:56
    |
542 |     async fn publish_wristband_activated(&self, event: &WristbandActivatedEvent) -> Result<(), String> {
    |                                                        ^^^^^^^^^^^^^^^^^^^^^^^^ expected `WristbandActivatedEvent`, found `adapters::WristbandActivatedEvent`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:116:56
    |
116 |     async fn publish_wristband_activated(&self, event: &WristbandActivatedEvent) -> Result<(), String>;
    |                                                        ^^^^^^^^^^^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 ExternalEventAdapter, &'life1 fan_loyalty::domain::services::WristbandActivatedEvent) -> Pin<_>`
               found signature `fn(&'life0 ExternalEventAdapter, &'life1 adapters::WristbandActivatedEvent) -> Pin<_>`
help: change the parameter type to match the trait
    |
542 |     async fn publish_wristband_activated(&self, event: &'life1 fan_loyalty::domain::services::WristbandActivatedEvent) -> Result<(), String> {
    |                                                         ++++++++++++++++++++++++++++++++++++++

error[E0053]: method `publish_qr_code_scanned` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:553:52
    |
553 |     async fn publish_qr_code_scanned(&self, event: &QrCodeScannedEvent) -> Result<(), String> {
    |                                                    ^^^^^^^^^^^^^^^^^^^ expected `QrCodeScannedEvent`, found `adapters::QrCodeScannedEvent`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:119:52
    |
119 |     async fn publish_qr_code_scanned(&self, event: &QrCodeScannedEvent) -> Result<(), String>;
    |                                                    ^^^^^^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 ExternalEventAdapter, &'life1 fan_loyalty::domain::services::QrCodeScannedEvent) -> Pin<_>`
               found signature `fn(&'life0 ExternalEventAdapter, &'life1 adapters::QrCodeScannedEvent) -> Pin<_>`
help: change the parameter type to match the trait
    |
553 |     async fn publish_qr_code_scanned(&self, event: &'life1 fan_loyalty::domain::services::QrCodeScannedEvent) -> Result<(), String> {
    |                                                     ++++++++++++++++++++++++++++++++++++++

error[E0046]: not all trait items implemented, missing: `publish`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:515:1
    |
515 | impl EventPublisher for ExternalEventAdapter {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `publish` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:122:5
    |
122 |     async fn publish(&self, event: &str) -> Result<(), String>;
    |     ----------------------------------------------------------- `publish` from trait

warning: unused variable: `endpoint`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:43:43
   |
43 |     async fn call_external_service(&self, endpoint: &str, payload: &serde_json::Value) -> Result<serde_json::Value, String> {
   |                                           ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_endpoint`

warning: unused variable: `payload`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:43:59
   |
43 |     async fn call_external_service(&self, endpoint: &str, payload: &serde_json::Value) -> Result<serde_json::Value, String> {
   |                                                           ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_payload`

warning: unused variable: `endpoint`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:267:47
    |
267 |     async fn call_external_nft_service(&self, endpoint: &str, payload: &serde_json::Value) -> Result<serde_json::Value, String> {
    |                                               ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_endpoint`

warning: unused variable: `payload`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:267:63
    |
267 |     async fn call_external_nft_service(&self, endpoint: &str, payload: &serde_json::Value) -> Result<serde_json::Value, String> {
    |                                                               ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_payload`

warning: unused variable: `endpoint`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:369:46
    |
369 |     async fn call_external_zk_service(&self, endpoint: &str, payload: &serde_json::Value) -> Result<serde_json::Value, String> {
    |                                              ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_endpoint`

warning: unused variable: `payload`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:369:62
    |
369 |     async fn call_external_zk_service(&self, endpoint: &str, payload: &serde_json::Value) -> Result<serde_json::Value, String> {
    |                                                              ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_payload`

warning: unused variable: `event_type`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:507:35
    |
507 |     async fn publish_event(&self, event_type: &str, event_data: &serde_json::Value) -> Result<(), String> {
    |                                   ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_event_type`

warning: unused variable: `event_data`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:507:53
    |
507 |     async fn publish_event(&self, event_type: &str, event_data: &serde_json::Value) -> Result<(), String> {
    |                                                     ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_event_data`

error[E0507]: cannot move out of `wristband.concert_id` which is behind a shared reference
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/database.rs:109:19
    |
109 |             .bind(wristband.concert_id)
    |                   ^^^^^^^^^^^^^^^^^^^^ move occurs because `wristband.concert_id` has type `std::string::String`, which does not implement the `Copy` trait
    |
help: consider cloning the value if the performance cost is acceptable
    |
109 |             .bind(wristband.concert_id.clone())
    |                                       ++++++++

error[E0507]: cannot move out of `wristband.artist_id` which is behind a shared reference
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/database.rs:110:19
    |
110 |             .bind(wristband.artist_id)
    |                   ^^^^^^^^^^^^^^^^^^^ move occurs because `wristband.artist_id` has type `std::string::String`, which does not implement the `Copy` trait
    |
help: consider cloning the value if the performance cost is acceptable
    |
110 |             .bind(wristband.artist_id.clone())
    |                                      ++++++++

error[E0053]: method `save_verification_result` has an incompatible type for trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:42:1
   |
42 | #[async_trait]
   | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
   |
note: type in trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:8:1
   |
8  | #[async_trait]
   | ^^^^^^^^^^^^^^
   = note: expected signature `fn(&'life0 MockFanVerificationRepository, &'life1 fan_loyalty::domain::entities::FanId, &'life2 fan_loyalty::domain::entities::FanVerificationResult) -> Pin<Box<(dyn futures_util::Future<Output = Result<(), std::string::String>> + std::marker::Send + 'async_trait)>>`
              found signature `fn(&'life0 MockFanVerificationRepository, &'life1 fan_loyalty::domain::entities::FanId, &'life2 fan_loyalty::domain::entities::FanVerificationResult) -> Pin<Box<(dyn futures_util::Future<Output = Result<(), AppError>> + std::marker::Send + 'async_trait)>>`
   = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
   |
42 - #[async_trait]
42 + Pin<Box<(dyn futures_util::Future<Output = Result<(), std::string::String>> + std::marker::Send + 'async_trait)>>
   |

error[E0053]: method `get_verification_result` has an incompatible type for trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:42:1
   |
42 | #[async_trait]
   | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
   |
note: type in trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:8:1
   |
8  | #[async_trait]
   | ^^^^^^^^^^^^^^
   = note: expected signature `fn(&'life0 MockFanVerificationRepository, &'life1 fan_loyalty::domain::entities::FanId) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::FanVerificationResult>, std::string::String>> + std::marker::Send + 'async_trait)>>`
              found signature `fn(&'life0 MockFanVerificationRepository, &'life1 fan_loyalty::domain::entities::FanId) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::FanVerificationResult>, AppError>> + std::marker::Send + 'async_trait)>>`
   = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
   |
42 - #[async_trait]
42 + Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::FanVerificationResult>, std::string::String>> + std::marker::Send + 'async_trait)>>
   |

error[E0046]: not all trait items implemented, missing: `is_fan_eligible_for_wristband`, `get_verification_history`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:43:1
   |
43 | impl FanVerificationRepository for MockFanVerificationRepository {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `is_fan_eligible_for_wristband`, `get_verification_history` in implementation
   |
  ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:21:5
   |
21 |     async fn is_fan_eligible_for_wristband(&self, fan_id: &FanId) -> Result<bool, String>;
   |     -------------------------------------------------------------------------------------- `is_fan_eligible_for_wristband` from trait
...
24 |     async fn get_verification_history(&self, fan_id: &FanId) -> Result<Vec<FanVerificationResult>, String>;
   |     ------------------------------------------------------------------------------------------------------- `get_verification_history` from trait

error[E0053]: method `save_wristband` has an incompatible type for trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:71:1
   |
71 | #[async_trait]
   | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
   |
note: type in trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:28:1
   |
28 | #[async_trait]
   | ^^^^^^^^^^^^^^
   = note: expected signature `fn(&'life0 MockWristbandRepository, &'life1 fan_loyalty::domain::entities::NftWristband) -> Pin<Box<(dyn futures_util::Future<Output = Result<(), std::string::String>> + std::marker::Send + 'async_trait)>>`
              found signature `fn(&'life0 MockWristbandRepository, &'life1 fan_loyalty::domain::entities::NftWristband) -> Pin<Box<(dyn futures_util::Future<Output = Result<(), AppError>> + std::marker::Send + 'async_trait)>>`
   = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
   |
71 - #[async_trait]
71 + Pin<Box<(dyn futures_util::Future<Output = Result<(), std::string::String>> + std::marker::Send + 'async_trait)>>
   |

error[E0053]: method `get_wristband` has an incompatible type for trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:71:1
   |
71 | #[async_trait]
   | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
   |
note: type in trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:28:1
   |
28 | #[async_trait]
   | ^^^^^^^^^^^^^^
   = note: expected signature `fn(&'life0 MockWristbandRepository, &'life1 fan_loyalty::domain::entities::WristbandId) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::NftWristband>, std::string::String>> + std::marker::Send + 'async_trait)>>`
              found signature `fn(&'life0 MockWristbandRepository, &'life1 fan_loyalty::domain::entities::WristbandId) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::NftWristband>, AppError>> + std::marker::Send + 'async_trait)>>`
   = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
   |
71 - #[async_trait]
71 + Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::NftWristband>, std::string::String>> + std::marker::Send + 'async_trait)>>
   |

error[E0050]: method `update_wristband_status` has 3 parameters but the declaration in trait `WristbandRepository::update_wristband_status` has 4
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:83:38
   |
83 |       async fn update_wristband_status(&self, wristband_id: &WristbandId, status: &str) -> Result<(), AppError> {
   |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected 4 parameters, found 3
   |
  ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:41:9
   |
41 | /         &self,
42 | |         wristband_id: &WristbandId,
43 | |         is_active: bool,
44 | |         activated_at: Option<DateTime<Utc>>,
   | |___________________________________________- trait requires 4 parameters

error[E0046]: not all trait items implemented, missing: `get_wristbands_by_fan`, `get_wristbands_by_concert`, `get_wristbands_by_artist`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:72:1
   |
72 | impl WristbandRepository for MockWristbandRepository {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `get_wristbands_by_fan`, `get_wristbands_by_concert`, `get_wristbands_by_artist` in implementation
   |
  ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:37:5
   |
37 |     async fn get_wristbands_by_fan(&self, fan_id: &FanId) -> Result<Vec<NftWristband>, String>;
   |     ------------------------------------------------------------------------------------------- `get_wristbands_by_fan` from trait
...
48 |     async fn get_wristbands_by_concert(&self, concert_id: &Uuid) -> Result<Vec<NftWristband>, String>;
   |     -------------------------------------------------------------------------------------------------- `get_wristbands_by_concert` from trait
...
51 |     async fn get_wristbands_by_artist(&self, artist_id: &Uuid) -> Result<Vec<NftWristband>, String>;
   |     ------------------------------------------------------------------------------------------------ `get_wristbands_by_artist` from trait

error[E0050]: method `save_qr_code` has 2 parameters but the declaration in trait `fan_loyalty::domain::repositories::QrCodeRepository::save_qr_code` has 4
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:103:27
    |
103 |       async fn save_qr_code(&self, qr_code: &QrCode) -> Result<(), AppError> {
    |                             ^^^^^^^^^^^^^^^^^^^^^^^ expected 4 parameters, found 2
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:59:9
    |
59  | /         &self,
60  | |         wristband_id: &WristbandId,
61  | |         qr_code: &str,
62  | |         expires_at: DateTime<Utc>,
    | |_________________________________- trait requires 4 parameters

error[E0053]: method `get_qr_code` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:108:39
    |
108 |     async fn get_qr_code(&self, code: &str) -> Result<Option<QrCode>, AppError> {
    |                                       ^^^^ expected `WristbandId`, found `str`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:66:47
    |
66  |     async fn get_qr_code(&self, wristband_id: &WristbandId) -> Result<Option<String>, String>;
    |                                               ^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 MockQrCodeRepository, &'life1 fan_loyalty::domain::entities::WristbandId) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<std::string::String>, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 MockQrCodeRepository, &'life1 str) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::QrCode>, AppError>> + std::marker::Send + 'async_trait)>>`
help: change the parameter type to match the trait
    |
108 -     async fn get_qr_code(&self, code: &str) -> Result<Option<QrCode>, AppError> {
108 +     async fn get_qr_code(&self, code: &'life1 fan_loyalty::domain::entities::WristbandId) -> Result<Option<QrCode>, AppError> {
    |

error[E0053]: method `invalidate_qr_code` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:101:1
    |
101 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:55:1
    |
55  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 MockQrCodeRepository, &'life1 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<(), std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 MockQrCodeRepository, &'life1 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<(), AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
101 - #[async_trait]
101 + Pin<Box<(dyn futures_util::Future<Output = Result<(), std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0046]: not all trait items implemented, missing: `validate_qr_code`, `log_qr_scan`, `get_qr_scan_history`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:102:1
    |
102 |   impl QrCodeRepository for MockQrCodeRepository {
    |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `validate_qr_code`, `log_qr_scan`, `get_qr_scan_history` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:69:5
    |
69  |       async fn validate_qr_code(&self, qr_code: &str) -> Result<bool, String>;
    |       ------------------------------------------------------------------------ `validate_qr_code` from trait
...
72  | /     async fn log_qr_scan(
73  | |         &self,
74  | |         qr_code: &str,
75  | |         scanner_id: &str,
76  | |         location: Option<(f64, f64, f32)>,
77  | |     ) -> Result<(), String>;
    | |____________________________- `log_qr_scan` from trait
...
80  |       async fn get_qr_scan_history(&self, qr_code: &str) -> Result<Vec<QrScanLog>, String>;
    |       ------------------------------------------------------------------------------------- `get_qr_scan_history` from trait

error[E0050]: method `save_zk_proof` has 3 parameters but the declaration in trait `ZkProofRepository::save_zk_proof` has 2
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:133:28
    |
133 |     async fn save_zk_proof(&self, proof_id: uuid::Uuid, proof_data: String) -> Result<(), AppError> {
    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected 2 parameters, found 3
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:90:28
    |
90  |     async fn save_zk_proof(&self, proof: &ZkProof) -> Result<(), String>;
    |                            ---------------------- trait requires 2 parameters

error[E0195]: lifetime parameters or bounds on method `get_zk_proof` do not match the trait declaration
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:138:14
    |
138 |     async fn get_zk_proof(&self, proof_id: uuid::Uuid) -> Result<Option<String>, AppError> {
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ lifetimes do not match method in trait
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:93:14
    |
93  |     async fn get_zk_proof(&self, proof_id: &Uuid) -> Result<Option<ZkProof>, String>;
    |              ------------------------------------ lifetimes in impl do not match this method in trait

error[E0046]: not all trait items implemented, missing: `verify_zk_proof`, `get_proofs_by_fan`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:132:1
    |
132 | impl ZkProofRepository for MockZkProofRepository {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `verify_zk_proof`, `get_proofs_by_fan` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:96:5
    |
96  |     async fn verify_zk_proof(&self, proof: &ZkProof) -> Result<bool, String>;
    |     ------------------------------------------------------------------------- `verify_zk_proof` from trait
...
99  |     async fn get_proofs_by_fan(&self, fan_id: &FanId) -> Result<Vec<ZkProof>, String>;
    |     ---------------------------------------------------------------------------------- `get_proofs_by_fan` from trait

error[E0053]: method `mint_nft` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:156:1
    |
156 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:103:1
    |
103 | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 MockNftRepository, &'life1 fan_loyalty::domain::entities::WristbandId, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::string::String, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 MockNftRepository, &'life1 fan_loyalty::domain::entities::WristbandId, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::string::String, AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
156 - #[async_trait]
156 + Pin<Box<(dyn futures_util::Future<Output = Result<std::string::String, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0053]: method `verify_nft_ownership` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:156:1
    |
156 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:103:1
    |
103 | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 MockNftRepository, &'life1 fan_loyalty::domain::entities::WristbandId, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<bool, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 MockNftRepository, &'life1 fan_loyalty::domain::entities::WristbandId, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<bool, AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
156 - #[async_trait]
156 + Pin<Box<(dyn futures_util::Future<Output = Result<bool, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0046]: not all trait items implemented, missing: `save_nft_metadata`, `get_nft_metadata`, `get_nfts_by_fan`, `update_nft_status`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:157:1
    |
157 | impl NftRepository for MockNftRepository {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `save_nft_metadata`, `get_nft_metadata`, `get_nfts_by_fan`, `update_nft_status` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:106:5
    |
106 |     async fn save_nft_metadata(&self, metadata: &NftMetadata) -> Result<(), String>;
    |     -------------------------------------------------------------------------------- `save_nft_metadata` from trait
...
109 |     async fn get_nft_metadata(&self, token_id: &str) -> Result<Option<NftMetadata>, String>;
    |     ---------------------------------------------------------------------------------------- `get_nft_metadata` from trait
...
112 |     async fn get_nfts_by_fan(&self, fan_id: &FanId) -> Result<Vec<NftMetadata>, String>;
    |     ------------------------------------------------------------------------------------ `get_nfts_by_fan` from trait
...
115 |     async fn update_nft_status(&self, token_id: &str, is_active: bool) -> Result<(), String>;
    |     ----------------------------------------------------------------------------------------- `update_nft_status` from trait

error[E0053]: method `verify_fan_biometrics` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:177:75
    |
177 |     async fn verify_fan_biometrics(&self, fan_id: &FanId, biometric_data: &BiometricData) -> Result<FanVerificationResult, AppError> {
    |                                                                           ^^^^^^^^^^^^^^ expected `BiometricData`, found a different `BiometricData`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:15:75
    |
15  |     async fn verify_fan_biometrics(&self, fan_id: &FanId, biometric_data: &BiometricData) -> Result<FanVerificationResult, String>;
    |                                                                           ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 MockBiometricVerificationService, &'life1 fan_loyalty::domain::entities::FanId, &'life2 fan_loyalty::domain::services::BiometricData) -> Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::entities::FanVerificationResult, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 MockBiometricVerificationService, &'life1 fan_loyalty::domain::entities::FanId, &'life2 fan_loyalty::domain::entities::BiometricData) -> Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::entities::FanVerificationResult, AppError>> + std::marker::Send + 'async_trait)>>`
help: change the parameter type to match the trait
    |
177 |     async fn verify_fan_biometrics(&self, fan_id: &FanId, biometric_data: &'life2 fan_loyalty::domain::services::BiometricData) -> Result<FanVerificationResult, AppError> {
    |                                                                            ++++++++++++++++++++++++++++++++++++++

error[E0046]: not all trait items implemented, missing: `verify_fan`, `calculate_confidence_score`, `analyze_behavioral_patterns`, `analyze_device_characteristics`, `analyze_location_consistency`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:176:1
    |
176 | impl BiometricVerificationService for MockBiometricVerificationService {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `verify_fan`, `calculate_confidence_score`, `analyze_behavioral_patterns`, `analyze_device_characteristics`, `analyze_location_consistency` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:12:5
    |
12  |     async fn verify_fan(&self, fan_id: &FanId, biometric_data: &BiometricData) -> Result<FanVerificationResult, String>;
    |     -------------------------------------------------------------------------------------------------------------------- `verify_fan` from trait
...
18  |     async fn calculate_confidence_score(&self, biometric_data: &BiometricData) -> Result<f32, String>;
    |     -------------------------------------------------------------------------------------------------- `calculate_confidence_score` from trait
...
21  |     async fn analyze_behavioral_patterns(&self, patterns: &BehavioralPatterns) -> Result<f32, String>;
    |     -------------------------------------------------------------------------------------------------- `analyze_behavioral_patterns` from trait
...
24  |     async fn analyze_device_characteristics(&self, characteristics: &DeviceCharacteristics) -> Result<f32, String>;
    |     --------------------------------------------------------------------------------------------------------------- `analyze_device_characteristics` from trait
...
27  |     async fn analyze_location_consistency(&self, location: &LocationData) -> Result<f32, String>;
    |     --------------------------------------------------------------------------------------------- `analyze_location_consistency` from trait

error[E0053]: method `create_nft_wristband` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:215:1
    |
215 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:31:1
    |
31  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 MockWristbandService, &'life1 fan_loyalty::domain::entities::FanId, fan_loyalty::domain::entities::WristbandType) -> Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::entities::NftWristband, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 MockWristbandService, &'life1 fan_loyalty::domain::entities::FanId, fan_loyalty::domain::entities::WristbandType) -> Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::entities::NftWristband, AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
215 - #[async_trait]
215 + Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::entities::NftWristband, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0050]: method `activate_wristband` has 2 parameters but the declaration in trait `WristbandService::activate_wristband` has 4
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:231:33
    |
231 |     async fn activate_wristband(&self, wristband_id: &WristbandId) -> Result<(), AppError> {
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected 4 parameters, found 2
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:37:33
    |
37  |     async fn activate_wristband(&self, wristband_id: &WristbandId, fan_id: &FanId, reason: &str) -> Result<WristbandActivationResult, Str...
    |                                 --------------------------------------------------------------- trait requires 4 parameters

error[E0053]: method `get_wristband_details` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:215:1
    |
215 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:31:1
    |
31  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 MockWristbandService, &'life1 fan_loyalty::domain::entities::WristbandId) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::NftWristband>, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 MockWristbandService, &'life1 fan_loyalty::domain::entities::WristbandId) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::NftWristband>, AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
215 - #[async_trait]
215 + Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::NftWristband>, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0046]: not all trait items implemented, missing: `create_wristband`, `validate_wristband_eligibility`, `get_wristband_benefits`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:216:1
    |
216 | impl WristbandService for MockWristbandService {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `create_wristband`, `validate_wristband_eligibility`, `get_wristband_benefits` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:34:5
    |
34  |     async fn create_wristband(&self, fan_id: &FanId, concert_id: &Uuid, artist_id: &Uuid, wristband_type: &WristbandType) -> Result<NftWristband, String>;
    |     ------------------------------------------------------------------------------------------------------------------------------------------------------ `create_wristband` from trait
...
40  |     async fn validate_wristband_eligibility(&self, fan_id: &FanId, concert_id: &Uuid) -> Result<bool, String>;
    |     ---------------------------------------------------------------------------------------------------------- `validate_wristband_eligibility` from trait
...
43  |     async fn get_wristband_benefits(&self, wristband_type: &WristbandType) -> Result<Vec<String>, String>;
    |     ------------------------------------------------------------------------------------------------------ `get_wristband_benefits` from trait

error[E0053]: method `generate_qr_code` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:259:1
    |
259 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `fan_loyalty::domain::services::QrCode`, found `fan_loyalty::domain::entities::QrCode`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:53:1
    |
53  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 MockQrCodeService, &'life1 fan_loyalty::domain::entities::WristbandId) -> Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::services::QrCode, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 MockQrCodeService, &'life1 fan_loyalty::domain::entities::WristbandId) -> Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::entities::QrCode, AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
259 - #[async_trait]
259 + Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::services::QrCode, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0053]: method `validate_qr_code` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:259:1
    |
259 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `QrCodeValidation`, found `Option<WristbandId>`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:53:1
    |
53  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 MockQrCodeService, &'life1 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::services::QrCodeValidation, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 MockQrCodeService, &'life1 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::WristbandId>, AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
259 - #[async_trait]
259 + Pin<Box<(dyn futures_util::Future<Output = Result<fan_loyalty::domain::services::QrCodeValidation, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0046]: not all trait items implemented, missing: `scan_qr_code`, `is_qr_code_expired`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:260:1
    |
260 | impl QrCodeService for MockQrCodeService {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `scan_qr_code`, `is_qr_code_expired` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:62:5
    |
62  |     async fn scan_qr_code(&self, qr_code: &str, scanner_id: &str, location: Option<LocationData>) -> Result<QrCodeScanResult, String>;
    |     ---------------------------------------------------------------------------------------------------------------------------------- `scan_qr_code` from trait
...
65  |     async fn is_qr_code_expired(&self, qr_code: &str) -> Result<bool, String>;
    |     -------------------------------------------------------------------------- `is_qr_code_expired` from trait

error[E0053]: method `mint_nft_wristband` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:299:1
    |
299 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:69:1
    |
69  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 MockNftService, &'life1 fan_loyalty::domain::entities::NftWristband, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::string::String, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 MockNftService, &'life1 fan_loyalty::domain::entities::NftWristband, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::string::String, AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
299 - #[async_trait]
299 + Pin<Box<(dyn futures_util::Future<Output = Result<std::string::String, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0053]: method `verify_nft_ownership` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:308:56
    |
308 |     async fn verify_nft_ownership(&self, wristband_id: &WristbandId, fan_wallet_address: &str) -> Result<bool, AppError> {
    |                                                        ^^^^^^^^^^^^ expected `str`, found `WristbandId`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:75:62
    |
75  |     async fn verify_nft_ownership(&self, fan_wallet_address: &str, token_id: &str) -> Result<bool, String>;
    |                                                              ^^^^
    = note: expected signature `fn(&'life0 MockNftService, &'life1 str, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<bool, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 MockNftService, &'life1 fan_loyalty::domain::entities::WristbandId, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<bool, AppError>> + std::marker::Send + 'async_trait)>>`
help: change the parameter type to match the trait
    |
308 -     async fn verify_nft_ownership(&self, wristband_id: &WristbandId, fan_wallet_address: &str) -> Result<bool, AppError> {
308 +     async fn verify_nft_ownership(&self, wristband_id: &'life1 str, fan_wallet_address: &str) -> Result<bool, AppError> {
    |

error[E0046]: not all trait items implemented, missing: `create_nft`, `transfer_nft`, `get_nft_metadata`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:300:1
    |
300 | impl NftService for MockNftService {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `create_nft`, `transfer_nft`, `get_nft_metadata` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:72:5
    |
72  |     async fn create_nft(&self, wristband: &NftWristband, fan_wallet_address: &str) -> Result<NftCreationResult, String>;
    |     -------------------------------------------------------------------------------------------------------------------- `create_nft` from trait
...
78  |     async fn transfer_nft(&self, from_address: &str, to_address: &str, token_id: &str) -> Result<String, String>;
    |     ------------------------------------------------------------------------------------------------------------- `transfer_nft` from trait
...
81  |     async fn get_nft_metadata(&self, token_id: &str) -> Result<Option<NftMetadata>, String>;
    |     ---------------------------------------------------------------------------------------- `get_nft_metadata` from trait

error[E0053]: method `generate_zk_proof` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:333:1
    |
333 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:88:1
    |
88  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 MockZkProofService, &'life1 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<Uuid, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 MockZkProofService, &'life1 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<Uuid, AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
333 - #[async_trait]
333 + Pin<Box<(dyn futures_util::Future<Output = Result<Uuid, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0195]: lifetime parameters or bounds on method `verify_zk_proof` do not match the trait declaration
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:357:14
    |
357 |     async fn verify_zk_proof(&self, proof_id: uuid::Uuid) -> Result<bool, AppError> {
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ lifetimes do not match method in trait
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:100:14
    |
100 |     async fn verify_zk_proof(&self, proof: &ZkProof) -> Result<bool, String>;
    |              --------------------------------------- lifetimes in impl do not match this method in trait

error[E0046]: not all trait items implemented, missing: `generate_biometric_proof`, `generate_wristband_proof`, `get_proof_status`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:334:1
    |
334 | impl ZkProofService for MockZkProofService {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `generate_biometric_proof`, `generate_wristband_proof`, `get_proof_status` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:91:5
    |
91  |     async fn generate_biometric_proof(&self, fan_id: &FanId, biometric_data: &BiometricProofData) -> Result<ZkBiometricProof, String>;
    |     ---------------------------------------------------------------------------------------------------------------------------------- `generate_biometric_proof` from trait
...
97  |     async fn generate_wristband_proof(&self, wristband_id: &WristbandId, fan_id: &FanId) -> Result<ZkWristbandProof, String>;
    |     ------------------------------------------------------------------------------------------------------------------------- `generate_wristband_proof` from trait
...
103 |     async fn get_proof_status(&self, proof_id: &Uuid) -> Result<Option<ZkProofStatus>, String>;
    |     ------------------------------------------------------------------------------------------- `get_proof_status` from trait

error[E0195]: lifetime parameters or bounds on method `publish` do not match the trait declaration
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:367:14
    |
367 |     async fn publish(&self, event: DomainEvent) -> Result<(), AppError> {
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ lifetimes do not match method in trait
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:122:14
    |
122 |     async fn publish(&self, event: &str) -> Result<(), String>;
    |              --------------------------- lifetimes in impl do not match this method in trait

error[E0046]: not all trait items implemented, missing: `publish_fan_verified`, `publish_wristband_created`, `publish_wristband_activated`, `publish_qr_code_scanned`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:366:1
    |
366 | impl EventPublisher for MockEventPublisher {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `publish_fan_verified`, `publish_wristband_created`, `publish_wristband_activated`, `publish_qr_code_scanned` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:110:5
    |
110 |     async fn publish_fan_verified(&self, event: &FanVerifiedEvent) -> Result<(), String>;
    |     ------------------------------------------------------------------------------------- `publish_fan_verified` from trait
...
113 |     async fn publish_wristband_created(&self, event: &WristbandCreatedEvent) -> Result<(), String>;
    |     ----------------------------------------------------------------------------------------------- `publish_wristband_created` from trait
...
116 |     async fn publish_wristband_activated(&self, event: &WristbandActivatedEvent) -> Result<(), String>;
    |     --------------------------------------------------------------------------------------------------- `publish_wristband_activated` from trait
...
119 |     async fn publish_qr_code_scanned(&self, event: &QrCodeScannedEvent) -> Result<(), String>;
    |     ------------------------------------------------------------------------------------------ `publish_qr_code_scanned` from trait

error[E0053]: method `save_verification_result` has an incompatible type for trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:33:1
   |
33 | #[async_trait]
   | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
   |
note: type in trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:8:1
   |
8  | #[async_trait]
   | ^^^^^^^^^^^^^^
   = note: expected signature `fn(&'life0 PostgresFanVerificationRepository, &'life1 fan_loyalty::domain::entities::FanId, &'life2 fan_loyalty::domain::entities::FanVerificationResult) -> Pin<Box<(dyn futures_util::Future<Output = Result<(), std::string::String>> + std::marker::Send + 'async_trait)>>`
              found signature `fn(&'life0 PostgresFanVerificationRepository, &'life1 fan_loyalty::domain::entities::FanId, &'life2 fan_loyalty::domain::entities::FanVerificationResult) -> Pin<Box<(dyn futures_util::Future<Output = Result<(), AppError>> + std::marker::Send + 'async_trait)>>`
   = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
   |
33 - #[async_trait]
33 + Pin<Box<(dyn futures_util::Future<Output = Result<(), std::string::String>> + std::marker::Send + 'async_trait)>>
   |

error[E0053]: method `get_verification_result` has an incompatible type for trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:33:1
   |
33 | #[async_trait]
   | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
   |
note: type in trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:8:1
   |
8  | #[async_trait]
   | ^^^^^^^^^^^^^^
   = note: expected signature `fn(&'life0 PostgresFanVerificationRepository, &'life1 fan_loyalty::domain::entities::FanId) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::FanVerificationResult>, std::string::String>> + std::marker::Send + 'async_trait)>>`
              found signature `fn(&'life0 PostgresFanVerificationRepository, &'life1 fan_loyalty::domain::entities::FanId) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::FanVerificationResult>, AppError>> + std::marker::Send + 'async_trait)>>`
   = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
   |
33 - #[async_trait]
33 + Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::FanVerificationResult>, std::string::String>> + std::marker::Send + 'async_trait)>>
   |

error[E0046]: not all trait items implemented, missing: `is_fan_eligible_for_wristband`, `get_verification_history`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:34:1
   |
34 | impl FanVerificationRepository for PostgresFanVerificationRepository {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `is_fan_eligible_for_wristband`, `get_verification_history` in implementation
   |
  ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:21:5
   |
21 |     async fn is_fan_eligible_for_wristband(&self, fan_id: &FanId) -> Result<bool, String>;
   |     -------------------------------------------------------------------------------------- `is_fan_eligible_for_wristband` from trait
...
24 |     async fn get_verification_history(&self, fan_id: &FanId) -> Result<Vec<FanVerificationResult>, String>;
   |     ------------------------------------------------------------------------------------------------------- `get_verification_history` from trait

error[E0053]: method `save_wristband` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:114:1
    |
114 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:28:1
    |
28  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 PostgresWristbandRepository, &'life1 fan_loyalty::domain::entities::NftWristband) -> Pin<Box<(dyn futures_util::Future<Output = Result<(), std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 PostgresWristbandRepository, &'life1 fan_loyalty::domain::entities::NftWristband) -> Pin<Box<(dyn futures_util::Future<Output = Result<(), AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
114 - #[async_trait]
114 + Pin<Box<(dyn futures_util::Future<Output = Result<(), std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0053]: method `get_wristband` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:114:1
    |
114 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:28:1
    |
28  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 PostgresWristbandRepository, &'life1 fan_loyalty::domain::entities::WristbandId) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::NftWristband>, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 PostgresWristbandRepository, &'life1 fan_loyalty::domain::entities::WristbandId) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::NftWristband>, AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
114 - #[async_trait]
114 + Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::NftWristband>, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0050]: method `update_wristband_status` has 3 parameters but the declaration in trait `WristbandRepository::update_wristband_status` has 4
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:183:38
    |
183 |       async fn update_wristband_status(&self, wristband_id: &WristbandId, status: &str) -> Result<(), AppError> {
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected 4 parameters, found 3
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:41:9
    |
41  | /         &self,
42  | |         wristband_id: &WristbandId,
43  | |         is_active: bool,
44  | |         activated_at: Option<DateTime<Utc>>,
    | |___________________________________________- trait requires 4 parameters

error[E0046]: not all trait items implemented, missing: `get_wristbands_by_fan`, `get_wristbands_by_concert`, `get_wristbands_by_artist`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:115:1
    |
115 | impl WristbandRepository for PostgresWristbandRepository {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `get_wristbands_by_fan`, `get_wristbands_by_concert`, `get_wristbands_by_artist` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:37:5
    |
37  |     async fn get_wristbands_by_fan(&self, fan_id: &FanId) -> Result<Vec<NftWristband>, String>;
    |     ------------------------------------------------------------------------------------------- `get_wristbands_by_fan` from trait
...
48  |     async fn get_wristbands_by_concert(&self, concert_id: &Uuid) -> Result<Vec<NftWristband>, String>;
    |     -------------------------------------------------------------------------------------------------- `get_wristbands_by_concert` from trait
...
51  |     async fn get_wristbands_by_artist(&self, artist_id: &Uuid) -> Result<Vec<NftWristband>, String>;
    |     ------------------------------------------------------------------------------------------------ `get_wristbands_by_artist` from trait

error[E0050]: method `save_qr_code` has 2 parameters but the declaration in trait `fan_loyalty::domain::repositories::QrCodeRepository::save_qr_code` has 4
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:221:27
    |
221 |       async fn save_qr_code(&self, qr_code: &QrCode) -> Result<(), AppError> {
    |                             ^^^^^^^^^^^^^^^^^^^^^^^ expected 4 parameters, found 2
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:59:9
    |
59  | /         &self,
60  | |         wristband_id: &WristbandId,
61  | |         qr_code: &str,
62  | |         expires_at: DateTime<Utc>,
    | |_________________________________- trait requires 4 parameters

error[E0053]: method `get_qr_code` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:245:39
    |
245 |     async fn get_qr_code(&self, code: &str) -> Result<Option<QrCode>, AppError> {
    |                                       ^^^^ expected `WristbandId`, found `str`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:66:47
    |
66  |     async fn get_qr_code(&self, wristband_id: &WristbandId) -> Result<Option<String>, String>;
    |                                               ^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 PostgresQrCodeRepository, &'life1 fan_loyalty::domain::entities::WristbandId) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<std::string::String>, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 PostgresQrCodeRepository, &'life1 str) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::option::Option<fan_loyalty::domain::entities::QrCode>, AppError>> + std::marker::Send + 'async_trait)>>`
help: change the parameter type to match the trait
    |
245 -     async fn get_qr_code(&self, code: &str) -> Result<Option<QrCode>, AppError> {
245 +     async fn get_qr_code(&self, code: &'life1 fan_loyalty::domain::entities::WristbandId) -> Result<Option<QrCode>, AppError> {
    |

error[E0053]: method `invalidate_qr_code` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:219:1
    |
219 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:55:1
    |
55  | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 PostgresQrCodeRepository, &'life1 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<(), std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 PostgresQrCodeRepository, &'life1 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<(), AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
219 - #[async_trait]
219 + Pin<Box<(dyn futures_util::Future<Output = Result<(), std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0046]: not all trait items implemented, missing: `validate_qr_code`, `log_qr_scan`, `get_qr_scan_history`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:220:1
    |
220 |   impl QrCodeRepository for PostgresQrCodeRepository {
    |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `validate_qr_code`, `log_qr_scan`, `get_qr_scan_history` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:69:5
    |
69  |       async fn validate_qr_code(&self, qr_code: &str) -> Result<bool, String>;
    |       ------------------------------------------------------------------------ `validate_qr_code` from trait
...
72  | /     async fn log_qr_scan(
73  | |         &self,
74  | |         qr_code: &str,
75  | |         scanner_id: &str,
76  | |         location: Option<(f64, f64, f32)>,
77  | |     ) -> Result<(), String>;
    | |____________________________- `log_qr_scan` from trait
...
80  |       async fn get_qr_scan_history(&self, qr_code: &str) -> Result<Vec<QrScanLog>, String>;
    |       ------------------------------------------------------------------------------------- `get_qr_scan_history` from trait

error[E0050]: method `save_zk_proof` has 3 parameters but the declaration in trait `ZkProofRepository::save_zk_proof` has 2
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:304:28
    |
304 |     async fn save_zk_proof(&self, proof_id: Uuid, proof_data: String) -> Result<(), AppError> {
    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected 2 parameters, found 3
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:90:28
    |
90  |     async fn save_zk_proof(&self, proof: &ZkProof) -> Result<(), String>;
    |                            ---------------------- trait requires 2 parameters

error[E0195]: lifetime parameters or bounds on method `get_zk_proof` do not match the trait declaration
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:324:14
    |
324 |     async fn get_zk_proof(&self, proof_id: Uuid) -> Result<Option<String>, AppError> {
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ lifetimes do not match method in trait
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:93:14
    |
93  |     async fn get_zk_proof(&self, proof_id: &Uuid) -> Result<Option<ZkProof>, String>;
    |              ------------------------------------ lifetimes in impl do not match this method in trait

error[E0046]: not all trait items implemented, missing: `verify_zk_proof`, `get_proofs_by_fan`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:303:1
    |
303 | impl ZkProofRepository for PostgresZkProofRepository {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `verify_zk_proof`, `get_proofs_by_fan` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:96:5
    |
96  |     async fn verify_zk_proof(&self, proof: &ZkProof) -> Result<bool, String>;
    |     ------------------------------------------------------------------------- `verify_zk_proof` from trait
...
99  |     async fn get_proofs_by_fan(&self, fan_id: &FanId) -> Result<Vec<ZkProof>, String>;
    |     ---------------------------------------------------------------------------------- `get_proofs_by_fan` from trait

error[E0053]: method `mint_nft` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:357:1
    |
357 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:103:1
    |
103 | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 PostgresNftRepository, &'life1 fan_loyalty::domain::entities::WristbandId, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::string::String, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 PostgresNftRepository, &'life1 fan_loyalty::domain::entities::WristbandId, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<std::string::String, AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
357 - #[async_trait]
357 + Pin<Box<(dyn futures_util::Future<Output = Result<std::string::String, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0053]: method `verify_nft_ownership` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:357:1
    |
357 | #[async_trait]
    | ^^^^^^^^^^^^^^ expected `std::string::String`, found `AppError`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:103:1
    |
103 | #[async_trait]
    | ^^^^^^^^^^^^^^
    = note: expected signature `fn(&'life0 PostgresNftRepository, &'life1 fan_loyalty::domain::entities::WristbandId, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<bool, std::string::String>> + std::marker::Send + 'async_trait)>>`
               found signature `fn(&'life0 PostgresNftRepository, &'life1 fan_loyalty::domain::entities::WristbandId, &'life2 _) -> Pin<Box<(dyn futures_util::Future<Output = Result<bool, AppError>> + std::marker::Send + 'async_trait)>>`
    = note: this error originates in the attribute macro `async_trait` (in Nightly builds, run with -Z macro-backtrace for more info)
help: change the output type to match the trait
    |
357 - #[async_trait]
357 + Pin<Box<(dyn futures_util::Future<Output = Result<bool, std::string::String>> + std::marker::Send + 'async_trait)>>
    |

error[E0046]: not all trait items implemented, missing: `save_nft_metadata`, `get_nft_metadata`, `get_nfts_by_fan`, `update_nft_status`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:358:1
    |
358 | impl NftRepository for PostgresNftRepository {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `save_nft_metadata`, `get_nft_metadata`, `get_nfts_by_fan`, `update_nft_status` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:106:5
    |
106 |     async fn save_nft_metadata(&self, metadata: &NftMetadata) -> Result<(), String>;
    |     -------------------------------------------------------------------------------- `save_nft_metadata` from trait
...
109 |     async fn get_nft_metadata(&self, token_id: &str) -> Result<Option<NftMetadata>, String>;
    |     ---------------------------------------------------------------------------------------- `get_nft_metadata` from trait
...
112 |     async fn get_nfts_by_fan(&self, fan_id: &FanId) -> Result<Vec<NftMetadata>, String>;
    |     ------------------------------------------------------------------------------------ `get_nfts_by_fan` from trait
...
115 |     async fn update_nft_status(&self, token_id: &str, is_active: bool) -> Result<(), String>;
    |     ----------------------------------------------------------------------------------------- `update_nft_status` from trait

error[E0061]: this function takes 0 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:160:18
    |
160 |     let fan_id = FanId::new(request.fan_id);
    |                  ^^^^^^^^^^ -------------- unexpected argument of type `std::string::String`
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/entities.rs:17:12
    |
17  |     pub fn new() -> Self {
    |            ^^^
help: remove the extra argument
    |
160 -     let fan_id = FanId::new(request.fan_id);
160 +     let fan_id = FanId::new();
    |

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:164:33
    |
164 |             listening_duration: request.biometric_data.behavioral_patterns.listening_duration,
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `u32`, found `u64`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:165:29
    |
165 |             skip_frequency: request.biometric_data.behavioral_patterns.skip_frequency,
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `f32`, found `f64`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:166:33
    |
166 |             volume_preferences: request.biometric_data.behavioral_patterns.volume_preferences,
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Vec<f32>`, found `Vec<f64>`
    |
    = note: expected struct `Vec<f32>`
               found struct `Vec<f64>`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:185:47
    |
185 |     let handler = FanVerificationHandler::new(container.clone());
    |                   --------------------------- ^^^^^^^^^^^^^^^^^ expected `Arc<FanLoyaltyContainer>`, found `Arc<RealFanLoyaltyContainer>`
    |                   |
    |                   arguments to this function are incorrect
    |
    = note: expected struct `Arc<dependency_injection::FanLoyaltyContainer>`
               found struct `Arc<RealFanLoyaltyContainer>`
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:17:12
    |
17  |     pub fn new(container: Arc<FanLoyaltyContainer>) -> Self {
    |            ^^^ -----------------------------------

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:189:31
    |
189 |             confidence_score: result.confidence_score,
    |                               ^^^^^^^^^^^^^^^^^^^^^^^ expected `f64`, found `f32`

error[E0061]: this function takes 0 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:214:18
    |
214 |     let fan_id = FanId::new(request.fan_id.clone());
    |                  ^^^^^^^^^^ ---------------------- unexpected argument of type `std::string::String`
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/entities.rs:17:12
    |
17  |     pub fn new() -> Self {
    |            ^^^
help: remove the extra argument
    |
214 -     let fan_id = FanId::new(request.fan_id.clone());
214 +     let fan_id = FanId::new();
    |

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:231:41
    |
231 |     let handler = WristbandHandler::new(container.clone());
    |                   --------------------- ^^^^^^^^^^^^^^^^^ expected `Arc<FanLoyaltyContainer>`, found `Arc<RealFanLoyaltyContainer>`
    |                   |
    |                   arguments to this function are incorrect
    |
    = note: expected struct `Arc<dependency_injection::FanLoyaltyContainer>`
               found struct `Arc<RealFanLoyaltyContainer>`
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:59:12
    |
59  |     pub fn new(container: Arc<FanLoyaltyContainer>) -> Self {
    |            ^^^ -----------------------------------

error[E0061]: this function takes 0 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:265:19
    |
265 |         Ok(id) => WristbandId::new(id.to_string()),
    |                   ^^^^^^^^^^^^^^^^ -------------- unexpected argument of type `std::string::String`
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/entities.rs:35:12
    |
35  |     pub fn new() -> Self {
    |            ^^^
help: remove the extra argument
    |
265 -         Ok(id) => WristbandId::new(id.to_string()),
265 +         Ok(id) => WristbandId::new(),
    |

error[E0061]: this function takes 2 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:269:19
    |
269 |     let command = ActivateWristbandCommand::new(wristband_id.clone());
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^---------------------- argument #2 of type `std::option::Option<std::string::String>` is missing
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/commands.rs:69:12
    |
69  |     pub fn new(
    |            ^^^
70  |         wristband_id: crate::bounded_contexts::fan_loyalty::domain::WristbandId,
71  |         activation_code: Option<String>,
    |         -------------------------------
help: provide the argument
    |
269 |     let command = ActivateWristbandCommand::new(wristband_id.clone(), /* std::option::Option<std::string::String> */);
    |                                                                     ++++++++++++++++++++++++++++++++++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:270:41
    |
270 |     let handler = WristbandHandler::new(container.clone());
    |                   --------------------- ^^^^^^^^^^^^^^^^^ expected `Arc<FanLoyaltyContainer>`, found `Arc<RealFanLoyaltyContainer>`
    |                   |
    |                   arguments to this function are incorrect
    |
    = note: expected struct `Arc<dependency_injection::FanLoyaltyContainer>`
               found struct `Arc<RealFanLoyaltyContainer>`
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:59:12
    |
59  |     pub fn new(container: Arc<FanLoyaltyContainer>) -> Self {
    |            ^^^ -----------------------------------

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:272:45
    |
272 |     match handler.handle_activate_wristband(&command).await {
    |                   ------------------------- ^^^^^^^^ expected `&WristbandId`, found `&ActivateWristbandCommand`
    |                   |
    |                   arguments to this method are incorrect
    |
    = note: expected reference `&fan_loyalty::domain::entities::WristbandId`
               found reference `&fan_loyalty::application::commands::ActivateWristbandCommand`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:96:18
    |
96  |     pub async fn handle_activate_wristband(&self, wristband_id: &crate::bounded_contexts::fan_loyalty::domain::WristbandId) -> Result<(),...
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^        ------------------------------------------------------------------------

error[E0061]: this function takes 0 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:302:19
    |
302 |         Ok(id) => WristbandId::new(id.to_string()),
    |                   ^^^^^^^^^^^^^^^^ -------------- unexpected argument of type `std::string::String`
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/entities.rs:35:12
    |
35  |     pub fn new() -> Self {
    |            ^^^
help: remove the extra argument
    |
302 -         Ok(id) => WristbandId::new(id.to_string()),
302 +         Ok(id) => WristbandId::new(),
    |

error[E0061]: this function takes 0 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:340:19
    |
340 |         Ok(id) => WristbandId::new(id.to_string()),
    |                   ^^^^^^^^^^^^^^^^ -------------- unexpected argument of type `std::string::String`
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/entities.rs:35:12
    |
35  |     pub fn new() -> Self {
    |            ^^^
help: remove the extra argument
    |
340 -         Ok(id) => WristbandId::new(id.to_string()),
340 +         Ok(id) => WristbandId::new(),
    |

error[E0061]: this function takes 2 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:344:19
    |
344 |     let command = GenerateQrCodeCommand::new(wristband_id.clone());
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^---------------------- argument #2 of type `std::option::Option<u32>` is missing
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/commands.rs:88:12
    |
88  |     pub fn new(
    |            ^^^
89  |         wristband_id: crate::bounded_contexts::fan_loyalty::domain::WristbandId,
90  |         expiration_hours: Option<u32>,
    |         -----------------------------
help: provide the argument
    |
344 |     let command = GenerateQrCodeCommand::new(wristband_id.clone(), /* std::option::Option<u32> */);
    |                                                                  ++++++++++++++++++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:345:41
    |
345 |     let handler = WristbandHandler::new(container.clone());
    |                   --------------------- ^^^^^^^^^^^^^^^^^ expected `Arc<FanLoyaltyContainer>`, found `Arc<RealFanLoyaltyContainer>`
    |                   |
    |                   arguments to this function are incorrect
    |
    = note: expected struct `Arc<dependency_injection::FanLoyaltyContainer>`
               found struct `Arc<RealFanLoyaltyContainer>`
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:59:12
    |
59  |     pub fn new(container: Arc<FanLoyaltyContainer>) -> Self {
    |            ^^^ -----------------------------------

error[E0599]: no method named `handle_generate_qr_code` found for struct `fan_loyalty::application::handlers::WristbandHandler` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:347:19
    |
347 |     match handler.handle_generate_qr_code(&command).await {
    |                   ^^^^^^^^^^^^^^^^^^^^^^^ method not found in `WristbandHandler`
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:54:1
    |
54  | pub struct WristbandHandler {
    | --------------------------- method `handle_generate_qr_code` not found for this struct

error[E0061]: this function takes 2 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:372:19
    |
372 |     let command = ValidateQrCodeCommand::new(request.qr_code);
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^----------------- argument #2 of type `std::option::Option<QrValidationContext>` is missing
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/commands.rs:114:12
    |
114 |     pub fn new(qr_code: String, validation_context: Option<QrValidationContext>) -> Self {
    |            ^^^                  -----------------------------------------------
help: provide the argument
    |
372 |     let command = ValidateQrCodeCommand::new(request.qr_code, /* std::option::Option<QrValidationContext> */);
    |                                                             ++++++++++++++++++++++++++++++++++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:373:41
    |
373 |     let handler = WristbandHandler::new(container.clone());
    |                   --------------------- ^^^^^^^^^^^^^^^^^ expected `Arc<FanLoyaltyContainer>`, found `Arc<RealFanLoyaltyContainer>`
    |                   |
    |                   arguments to this function are incorrect
    |
    = note: expected struct `Arc<dependency_injection::FanLoyaltyContainer>`
               found struct `Arc<RealFanLoyaltyContainer>`
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:59:12
    |
59  |     pub fn new(container: Arc<FanLoyaltyContainer>) -> Self {
    |            ^^^ -----------------------------------

error[E0599]: no method named `handle_validate_qr_code` found for struct `fan_loyalty::application::handlers::WristbandHandler` in the current scope
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:375:19
    |
375 |     match handler.handle_validate_qr_code(&command).await {
    |                   ^^^^^^^^^^^^^^^^^^^^^^^ method not found in `WristbandHandler`
    |
   ::: services/api-gateway/src/bounded_contexts/fan_loyalty/application/handlers.rs:54:1
    |
54  | pub struct WristbandHandler {
    | --------------------------- method `handle_validate_qr_code` not found for this struct
    |
    = help: items from traits can only be used if the trait is implemented and in scope
note: `dependency_injection::QrCodeHandler` defines an item `handle_validate_qr_code`, perhaps you need to implement it
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:269:1
    |
269 | pub trait QrCodeHandler: Send + Sync {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:379:64
    |
379 |                 match container.qr_code_repository.get_qr_code(&command.qr_code).await {
    |                                                    ----------- ^^^^^^^^^^^^^^^^ expected `&WristbandId`, found `&String`
    |                                                    |
    |                                                    arguments to this method are incorrect
    |
    = note: expected reference `&fan_loyalty::domain::entities::WristbandId`
               found reference `&std::string::String`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:66:14
    |
66  |     async fn get_qr_code(&self, wristband_id: &WristbandId) -> Result<Option<String>, String>;
    |              ^^^^^^^^^^^        ------------

error[E0609]: no field `wristband_id` on type `std::string::String`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:381:85
    |
381 |                         match container.wristband_repository.get_wristband(&qr_code.wristband_id).await {
    |                                                                                     ^^^^^^^^^^^^ unknown field

error[E0061]: this function takes 0 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:430:18
    |
430 |     let fan_id = FanId::new(fan_id);
    |                  ^^^^^^^^^^ ------ unexpected argument of type `std::string::String`
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/entities.rs:17:12
    |
17  |     pub fn new() -> Self {
    |            ^^^
help: remove the extra argument
    |
430 -     let fan_id = FanId::new(fan_id);
430 +     let fan_id = FanId::new();
    |

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/api_handlers.rs:435:31
    |
435 |             confidence_score: result.confidence_score,
    |                               ^^^^^^^^^^^^^^^^^^^^^^^ expected `f64`, found `f32`

error[E0609]: no field `action_required` on type `FraudAnalysisResult`
   --> services/api-gateway/src/bounded_contexts/payment/domain/services.rs:617:28
    |
617 |         match fraud_result.action_required {
    |                            ^^^^^^^^^^^^^^^ unknown field
    |
    = note: available fields are: `overall_risk_score`, `individual_scores`, `triggered_rules`, `recommendation`, `analysis_timestamp`

error[E0609]: no field `fraud_indicators` on type `FraudAnalysisResult`
   --> services/api-gateway/src/bounded_contexts/payment/domain/services.rs:622:35
    |
622 |                     &fraud_result.fraud_indicators,
    |                                   ^^^^^^^^^^^^^^^^ unknown field
    |
    = note: available fields are: `overall_risk_score`, `individual_scores`, `triggered_rules`, `recommendation`, `analysis_timestamp`

error[E0599]: no variant or associated item named `AdditionalVerificationRequired` found for enum `AppError` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/domain/services.rs:632:38
    |
632 |                 return Err(AppError::AdditionalVerificationRequired);
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ variant or associated item not found in `AppError`
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:4:1
    |
4   | pub enum AppError {
    | ----------------- variant or associated item `AdditionalVerificationRequired` not found for this enum

warning: unused variable: `refund_result`
   --> services/api-gateway/src/bounded_contexts/payment/domain/services.rs:676:13
    |
676 |         let refund_result = self.processing_service.process_refund(
    |             ^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_refund_result`

error[E0050]: method `process_refund` has 3 parameters but the declaration in trait `payment::domain::services::PaymentProcessingService::process_refund` has 4
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:517:29
    |
517 |       async fn process_refund(&self, _original_payment: &PaymentAggregate, _refund_amount: &Amount) -> Result<RefundProcessingResult, AppEr...
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected 4 parameters, found 3
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/services.rs:47:9
    |
47  | /         &self,
48  | |         original_payment: &mut PaymentAggregate,
49  | |         refund_amount: Amount,
50  | |         reason: String,
    | |______________________- trait requires 4 parameters

error[E0046]: not all trait items implemented, missing: `validate_payment`, `check_fraud_indicators`, `cancel_payment`, `calculate_processing_fee`
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:507:1
    |
507 |   impl PaymentProcessingService for MockPaymentProcessingService {
    |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `validate_payment`, `check_fraud_indicators`, `cancel_payment`, `calculate_processing_fee` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/services.rs:34:5
    |
34  | /     async fn validate_payment(
35  | |         &self,
36  | |         payment: &PaymentAggregate,
37  | |     ) -> Result<ValidationResult, AppError>;
    | |____________________________________________- `validate_payment` from trait
...
40  | /     async fn check_fraud_indicators(
41  | |         &self,
42  | |         payment: &PaymentAggregate,
43  | |     ) -> Result<FraudCheckResult, AppError>;
    | |____________________________________________- `check_fraud_indicators` from trait
...
54  | /     async fn cancel_payment(
55  | |         &self,
56  | |         payment_aggregate: &mut PaymentAggregate,
57  | |         reason: String,
58  | |     ) -> Result<(), AppError>;
    | |______________________________- `cancel_payment` from trait
...
61  | /     async fn calculate_processing_fee(
62  | |         &self,
63  | |         amount: &Amount,
64  | |         payment_method: &PaymentMethod,
65  | |     ) -> Result<Amount, AppError>;
    | |__________________________________- `calculate_processing_fee` from trait

error[E0046]: not all trait items implemented, missing: `check_user_patterns`, `validate_payment_method`, `check_velocity_limits`, `get_user_risk_score`
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:529:1
    |
529 |   impl FraudDetectionService for MockFraudDetectionService {
    |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `check_user_patterns`, `validate_payment_method`, `check_velocity_limits`, `get_user_risk_score` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/services.rs:149:5
    |
149 | /     async fn check_user_patterns(
150 | |         &self,
151 | |         user_id: Uuid,
152 | |         payment: &PaymentAggregate,
153 | |     ) -> Result<PatternAnalysisResult, AppError>;
    | |_________________________________________________- `check_user_patterns` from trait
...
156 | /     async fn validate_payment_method(
157 | |         &self,
158 | |         payment_method: &PaymentMethod,
159 | |         user_id: Uuid,
160 | |     ) -> Result<PaymentMethodValidationResult, AppError>;
    | |_________________________________________________________- `validate_payment_method` from trait
...
163 | /     async fn check_velocity_limits(
164 | |         &self,
165 | |         user_id: Uuid,
166 | |         amount: &Amount,
167 | |         time_window: chrono::Duration,
168 | |     ) -> Result<VelocityCheckResult, AppError>;
    | |_______________________________________________- `check_velocity_limits` from trait
...
171 | /     async fn get_user_risk_score(
172 | |         &self,
173 | |         user_id: Uuid,
174 | |     ) -> Result<RiskScore, AppError>;
    | |_____________________________________- `get_user_risk_score` from trait

error[E0046]: not all trait items implemented, missing: `find_by_payer_id`, `find_by_payee_id`, `find_by_status`, `find_by_purpose_category`, `find_by_date_range`, `find_by_amount_range`, `find_refundable_payments`, `find_stale_pending_payments`, `update`, `delete`, `exists`, `count_by_status`, `get_total_volume`
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:571:1
    |
571 | impl PaymentRepository for MockPaymentRepository {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `find_by_payer_id`, `find_by_payee_id`, `find_by_status`, `find_by_purpose_category`, `find_by_date_range`, `find_by_amount_range`, `find_refundable_payments`, `find_stale_pending_payments`, `update`, `delete`, `exists`, `count_by_status`, `get_total_volume` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:28:5
    |
28  |     async fn find_by_payer_id(&self, payer_id: Uuid, pagination: &Pagination) -> PaymentRepositoryResult<Vec<PaymentAggregate>>;
    |     ---------------------------------------------------------------------------------------------------------------------------- `find_by_payer_id` from trait
...
31  |     async fn find_by_payee_id(&self, payee_id: Uuid, pagination: &Pagination) -> PaymentRepositoryResult<Vec<PaymentAggregate>>;
    |     ---------------------------------------------------------------------------------------------------------------------------- `find_by_payee_id` from trait
...
34  |     async fn find_by_status(&self, status: &PaymentStatus, pagination: &Pagination) -> PaymentRepositoryResult<Vec<PaymentAggregate>>;
    |     ---------------------------------------------------------------------------------------------------------------------------------- `find_by_status` from trait
...
37  |     async fn find_by_purpose_category(&self, category: &PaymentCategory, pagination: &Pagination) -> PaymentRepositoryResult<Vec<PaymentAggregate>>;
    |     ------------------------------------------------------------------------------------------------------------------------------------------------ `find_by_purpose_category` from trait
...
40  |     async fn find_by_date_range(&self, start: DateTime<Utc>, end: DateTime<Utc>, pagination: &Pagination) -> PaymentRepositoryResult<Vec<PaymentAggregate>>;
    |     -------------------------------------------------------------------------------------------------------------------------------------------------------- `find_by_date_range` from trait
...
43  |     async fn find_by_amount_range(&self, min_amount: &Amount, max_amount: &Amount, pagination: &Pagination) -> PaymentRepositoryResult<Vec<PaymentAggregate>>;
    |     ---------------------------------------------------------------------------------------------------------------------------------------------------------- `find_by_amount_range` from trait
...
46  |     async fn find_refundable_payments(&self, pagination: &Pagination) -> PaymentRepositoryResult<Vec<PaymentAggregate>>;
    |     -------------------------------------------------------------------------------------------------------------------- `find_refundable_payments` from trait
...
49  |     async fn find_stale_pending_payments(&self, older_than: DateTime<Utc>) -> PaymentRepositoryResult<Vec<PaymentAggregate>>;
    |     ------------------------------------------------------------------------------------------------------------------------- `find_stale_pending_payments` from trait
...
52  |     async fn update(&self, aggregate: &PaymentAggregate) -> PaymentRepositoryResult<()>;
    |     ------------------------------------------------------------------------------------ `update` from trait
...
55  |     async fn delete(&self, id: &PaymentId) -> PaymentRepositoryResult<()>;
    |     ---------------------------------------------------------------------- `delete` from trait
...
58  |     async fn exists(&self, id: &PaymentId) -> PaymentRepositoryResult<bool>;
    |     ------------------------------------------------------------------------ `exists` from trait
...
70  |     async fn count_by_status(&self, status: &PaymentStatus) -> PaymentRepositoryResult<u64>;
    |     ---------------------------------------------------------------------------------------- `count_by_status` from trait
...
76  |     async fn get_total_volume(&self, start: DateTime<Utc>, end: DateTime<Utc>) -> PaymentRepositoryResult<HashMap<Currency, f64>>;
    |     ------------------------------------------------------------------------------------------------------------------------------ `get_total_volume` from trait

error[E0050]: method `send_payment_blocked_notification` has 2 parameters but the declaration in trait `payment::domain::services::PaymentNotificationService::send_payment_blocked_notification` has 3
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:619:48
    |
619 |       async fn send_payment_blocked_notification(&self, _payment: &PaymentAggregate) -> Result<(), AppError> {
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected 3 parameters, found 2
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/services.rs:299:9
    |
299 | /         &self,
300 | |         payment: &PaymentAggregate,
301 | |         reason: &str,
    | |____________________- trait requires 3 parameters

error[E0053]: method `send_refund_failed_notification` has an incompatible type for trait
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:635:91
    |
635 |     async fn send_refund_failed_notification(&self, _payment: &PaymentAggregate, _amount: &Amount) -> Result<(), AppError> {
    |                                                                                           ^^^^^^^ expected `str`, found `payment::domain::value_objects::Amount`
    |
note: type in trait
   --> services/api-gateway/src/bounded_contexts/payment/domain/services.rs:321:17
    |
321 |         reason: &str,
    |                 ^^^^
    = note: expected signature `fn(&'life0 MockNotificationService, &'life1 payment::domain::aggregates::PaymentAggregate, &'life2 str) -> Pin<_>`
               found signature `fn(&'life0 MockNotificationService, &'life1 payment::domain::aggregates::PaymentAggregate, &'life2 payment::domain::value_objects::Amount) -> Pin<_>`
help: change the parameter type to match the trait
    |
635 -     async fn send_refund_failed_notification(&self, _payment: &PaymentAggregate, _amount: &Amount) -> Result<(), AppError> {
635 +     async fn send_refund_failed_notification(&self, _payment: &PaymentAggregate, _amount: &'life2 str) -> Result<(), AppError> {
    |

error[E0046]: not all trait items implemented, missing: `send_fraud_alert_notification`, `send_royalty_distribution_notification`
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:610:1
    |
610 |   impl PaymentNotificationService for MockNotificationService {
    |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ missing `send_fraud_alert_notification`, `send_royalty_distribution_notification` in implementation
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/services.rs:282:5
    |
282 | /     async fn send_fraud_alert_notification(
283 | |         &self,
284 | |         payment: &PaymentAggregate,
285 | |         fraud_indicators: &[String],
286 | |     ) -> Result<(), AppError>;
    | |______________________________- `send_fraud_alert_notification` from trait
...
289 | /     async fn send_royalty_distribution_notification(
290 | |         &self,
291 | |         artist_id: Uuid,
292 | |         amount: &Amount,
293 | |         period_start: DateTime<Utc>,
294 | |         period_end: DateTime<Utc>,
295 | |     ) -> Result<(), AppError>;
    | |______________________________- `send_royalty_distribution_notification` from trait

error[E0609]: no field `error_message` on type `payment::domain::services::PaymentProcessingResult`
  --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:94:35
   |
94 |                 processing_result.error_message.unwrap_or_else(|| "Unknown error".to_string()),
   |                                   ^^^^^^^^^^^^^ unknown field
   |
   = note: available fields are: `success`, `transaction_id`, `blockchain_hash`, `gateway_response`, `processing_time_ms`, `fees_charged`

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:107:25
    |
107 |             payment_id: *payment_aggregate.payment().id().value(),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ can't be dereferenced

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:109:34
    |
109 |             transaction_id: Some(*transaction_id.value()),
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^ can't be dereferenced

error[E0609]: no field `action_required` on type `FraudAnalysisResult`
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:128:28
    |
128 |         match fraud_result.action_required {
    |                            ^^^^^^^^^^^^^^^ unknown field
    |
    = note: available fields are: `overall_risk_score`, `individual_scores`, `triggered_rules`, `recommendation`, `analysis_timestamp`

error[E0599]: no variant or associated item named `Monitor` found for enum `payment::domain::services::FraudAction` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:150:26
    |
150 |             FraudAction::Monitor => {
    |                          ^^^^^^^ variant or associated item not found in `FraudAction`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/services.rs:366:1
    |
366 | pub enum FraudAction {
    | -------------------- variant or associated item `Monitor` not found for this enum

error[E0061]: this method takes 2 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:139:43
    |
139 |                 self.notification_service.send_payment_blocked_notification(&payment_aggregate).await?;
    |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^-------------------- argument #2 of type `&str` is missing
    |
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/services.rs:298:14
    |
298 |     async fn send_payment_blocked_notification(
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
301 |         reason: &str,
    |         ------
help: provide the argument
    |
139 |                 self.notification_service.send_payment_blocked_notification(&payment_aggregate, /* &str */).await?;
    |                                                                                               ++++++++++++

error[E0599]: no method named `payment_ids` found for struct `payment::domain::entities::PaymentBatch` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:175:43
    |
175 |         for payment_id in batch_aggregate.payment_ids() {
    |                                           ^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/entities.rs:336:1
    |
336 | pub struct PaymentBatch {
    | ----------------------- method `payment_ids` not found for this struct
    |
help: there is a method `payments` with a similar name
    |
175 -         for payment_id in batch_aggregate.payment_ids() {
175 +         for payment_id in batch_aggregate.payments() {
    |

error[E0599]: no method named `complete_batch` found for struct `payment::domain::entities::PaymentBatch` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:190:29
    |
190 |             batch_aggregate.complete_batch()?;
    |                             ^^^^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/entities.rs:336:1
    |
336 | pub struct PaymentBatch {
    | ----------------------- method `complete_batch` not found for this struct
    |
help: there is a method `complete` with a similar name
    |
190 -             batch_aggregate.complete_batch()?;
190 +             batch_aggregate.complete()?;
    |

error[E0599]: no method named `partially_complete_batch` found for struct `payment::domain::entities::PaymentBatch` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:192:29
    |
192 |             batch_aggregate.partially_complete_batch(successful_payments, failed_payments)?;
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^ method not found in `PaymentBatch`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/entities.rs:336:1
    |
336 | pub struct PaymentBatch {
    | ----------------------- method `partially_complete_batch` not found for this struct

error[E0599]: no method named `payment_ids` found for struct `payment::domain::entities::PaymentBatch` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:200:45
    |
200 |             total_payments: batch_aggregate.payment_ids().len() as u32,
    |                                             ^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/entities.rs:336:1
    |
336 | pub struct PaymentBatch {
    | ----------------------- method `payment_ids` not found for this struct
    |
help: there is a method `payments` with a similar name
    |
200 -             total_payments: batch_aggregate.payment_ids().len() as u32,
200 +             total_payments: batch_aggregate.payments().len() as u32,
    |

error[E0599]: no method named `created_at` found for struct `payment::domain::entities::PaymentBatch` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:203:41
    |
203 |             created_at: batch_aggregate.created_at(),
    |                                         ^^^^^^^^^^ private field, not a method
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/entities.rs:336:1
    |
336 | pub struct PaymentBatch {
    | ----------------------- method `created_at` not found for this struct

error[E0061]: this method takes 3 arguments but 2 arguments were supplied
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:233:61
    |
233 |         let refund_result = self.payment_processing_service.process_refund(&original_payment, &refund_amount).await?;
    |                                                             ^^^^^^^^^^^^^^-----------------------------------
    |                                                                           ||                  |
    |                                                                           ||                  expected `Amount`, found `&Amount`
    |                                                                           |types differ in mutability
    |                                                                           argument #3 of type `std::string::String` is missing
    |
    = note: expected mutable reference `&mut payment::domain::aggregates::PaymentAggregate`
                       found reference `&payment::domain::aggregates::PaymentAggregate`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/services.rs:46:14
    |
46  |     async fn process_refund(
    |              ^^^^^^^^^^^^^^
47  |         &self,
48  |         original_payment: &mut PaymentAggregate,
    |         ----------------
49  |         refund_amount: Amount,
    |         -------------
50  |         reason: String,
    |         ------
help: consider removing the borrow
    |
233 -         let refund_result = self.payment_processing_service.process_refund(&original_payment, &refund_amount).await?;
233 +         let refund_result = self.payment_processing_service.process_refund(&original_payment, refund_amount).await?;
    |
help: provide the argument
    |
233 -         let refund_result = self.payment_processing_service.process_refund(&original_payment, &refund_amount).await?;
233 +         let refund_result = self.payment_processing_service.process_refund(/* &mut payment::domain::aggregates::PaymentAggregate */, /* payment::domain::value_objects::Amount */, /* std::string::String */).await?;
    |

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:247:90
    |
247 |             self.notification_service.send_refund_failed_notification(&original_payment, &refund_amount).await?;
    |                                       -------------------------------                    ^^^^^^^^^^^^^^ expected `&str`, found `&Amount`
    |                                       |
    |                                       arguments to this method are incorrect
    |
    = note: expected reference `&str`
               found reference `&payment::domain::value_objects::Amount`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/services.rs:318:14
    |
318 |     async fn send_refund_failed_notification(
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
321 |         reason: &str,
    |         ------

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:251:32
    |
251 |             refund_payment_id: *refund_payment_id.value(),
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^ can't be dereferenced

error[E0599]: no method named `add_payment` found for struct `payment::domain::aggregates::RoyaltyDistributionAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:300:32
    |
300 |         distribution_aggregate.add_payment(artist_payment);
    |                                ^^^^^^^^^^^ method not found in `RoyaltyDistributionAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:282:1
    |
282 | pub struct RoyaltyDistributionAggregate {
    | --------------------------------------- method `add_payment` not found for this struct

error[E0599]: no method named `add_payment` found for struct `payment::domain::aggregates::RoyaltyDistributionAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:301:32
    |
301 |         distribution_aggregate.add_payment(platform_payment);
    |                                ^^^^^^^^^^^ method not found in `RoyaltyDistributionAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:282:1
    |
282 | pub struct RoyaltyDistributionAggregate {
    | --------------------------------------- method `add_payment` not found for this struct

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:315:56
    |
315 |             payment_service.process_payment_end_to_end(*payment_aggregate.payment().id().value()).await?;
    |                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ can't be dereferenced

error[E0616]: field `created_at` of struct `payment::domain::entities::RoyaltyDistribution` is private
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:330:63
    |
330 |             created_at: distribution_aggregate.distribution().created_at,
    |                                                               ^^^^^^^^^^ private field

error[E0599]: no method named `period_start` found for reference `&payment::domain::entities::RoyaltyDistribution` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:346:69
    |
346 |                 period_start: distribution_aggregate.distribution().period_start(),
    |                                                                     ^^^^^^^^^^^^ private field, not a method

error[E0599]: no method named `period_end` found for reference `&payment::domain::entities::RoyaltyDistribution` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:347:67
    |
347 |                 period_end: distribution_aggregate.distribution().period_end(),
    |                                                                   ^^^^^^^^^^ private field, not a method

error[E0599]: no method named `period_start` found for reference `&payment::domain::entities::RoyaltyDistribution` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:374:69
    |
374 |                 period_start: distribution_aggregate.distribution().period_start(),
    |                                                                     ^^^^^^^^^^^^ private field, not a method

error[E0599]: no method named `period_end` found for reference `&payment::domain::entities::RoyaltyDistribution` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:375:67
    |
375 |                 period_end: distribution_aggregate.distribution().period_end(),
    |                                                                   ^^^^^^^^^^ private field, not a method

error[E0599]: no method named `shareholders` found for struct `payment::domain::aggregates::RevenueSharingAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:428:51
    |
428 |         for shareholder in distribution_aggregate.shareholders() {
    |                                                   ^^^^^^^^^^^^ method not found in `RevenueSharingAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:428:1
    |
428 | pub struct RevenueSharingAggregate {
    | ---------------------------------- method `shareholders` not found for this struct

error[E0599]: no method named `add_payment` found for struct `payment::domain::aggregates::RevenueSharingAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:435:36
    |
435 |             distribution_aggregate.add_payment(payment_aggregate);
    |                                    ^^^^^^^^^^^ method not found in `RevenueSharingAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:428:1
    |
428 | pub struct RevenueSharingAggregate {
    | ---------------------------------- method `add_payment` not found for this struct

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:450:56
    |
450 |             payment_service.process_payment_end_to_end(*payment_aggregate.payment().id().value()).await?;
    |                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ can't be dereferenced

error[E0599]: no method named `complete_distribution` found for struct `payment::domain::aggregates::RevenueSharingAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:454:32
    |
454 |         distribution_aggregate.complete_distribution()?;
    |                                ^^^^^^^^^^^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:428:1
    |
428 | pub struct RevenueSharingAggregate {
    | ---------------------------------- method `complete_distribution` not found for this struct
    |
help: there is a method `process_distribution` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:531:5
    |
531 |     pub fn process_distribution(&mut self, platform_fee_percentage: FeePercentage) -> Result<(), AppError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0599]: no method named `distribution` found for struct `payment::domain::aggregates::RevenueSharingAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:461:53
    |
461 |             distribution_id: distribution_aggregate.distribution().id(),
    |                                                     ^^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:428:1
    |
428 | pub struct RevenueSharingAggregate {
    | ---------------------------------- method `distribution` not found for this struct
    |
help: there is a method `distribution_id` with a similar name
    |
461 |             distribution_id: distribution_aggregate.distribution_id().id(),
    |                                                                 +++

error[E0599]: no method named `shareholders` found for struct `payment::domain::aggregates::RevenueSharingAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:462:56
    |
462 |             total_shareholders: distribution_aggregate.shareholders().len() as u32,
    |                                                        ^^^^^^^^^^^^ method not found in `RevenueSharingAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:428:1
    |
428 | pub struct RevenueSharingAggregate {
    | ---------------------------------- method `shareholders` not found for this struct

error[E0599]: no method named `total_distributed` found for struct `payment::domain::aggregates::RevenueSharingAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:463:55
    |
463 |             total_distributed: distribution_aggregate.total_distributed().value(),
    |                                                       ^^^^^^^^^^^^^^^^^ method not found in `RevenueSharingAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:428:1
    |
428 | pub struct RevenueSharingAggregate {
    | ---------------------------------- method `total_distributed` not found for this struct

error[E0599]: no method named `distribution` found for struct `payment::domain::aggregates::RevenueSharingAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:464:60
    |
464 |             status: format!("{:?}", distribution_aggregate.distribution().status()),
    |                                                            ^^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:428:1
    |
428 | pub struct RevenueSharingAggregate {
    | ---------------------------------- method `distribution` not found for this struct
    |
help: there is a method `distribution_id` with a similar name
    |
464 |             status: format!("{:?}", distribution_aggregate.distribution_id().status()),
    |                                                                        +++

error[E0599]: no method named `distribution` found for struct `payment::domain::aggregates::RevenueSharingAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:465:48
    |
465 |             created_at: distribution_aggregate.distribution().created_at,
    |                                                ^^^^^^^^^^^^
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:428:1
    |
428 | pub struct RevenueSharingAggregate {
    | ---------------------------------- method `distribution` not found for this struct
    |
help: there is a method `distribution_id` with a similar name
    |
465 |             created_at: distribution_aggregate.distribution_id().created_at,
    |                                                            +++

error[E0599]: no method named `shareholder_id` found for reference `&payment::domain::aggregates::ShareholderDistribution` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:479:25
    |
479 |             shareholder.shareholder_id(),
    |                         ^^^^^^^^^^^^^^-- help: remove the arguments
    |                         |
    |                         field, not a method

error[E0599]: no method named `distribution_amount` found for reference `&payment::domain::aggregates::ShareholderDistribution` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:480:25
    |
480 |             shareholder.distribution_amount().clone(),
    |                         ^^^^^^^^^^^^^^^^^^^-- help: remove the arguments
    |                         |
    |                         field, not a method

error[E0599]: no method named `distribution` found for reference `&payment::domain::aggregates::RevenueSharingAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:483:53
    |
483 |                 contract_id: distribution_aggregate.distribution().contract_id(),
    |                                                     ^^^^^^^^^^^^
    |
help: there is a method `distribution_id` with a similar name
    |
483 |                 contract_id: distribution_aggregate.distribution_id().contract_id(),
    |                                                                 +++

error[E0599]: no method named `distribution` found for reference `&payment::domain::aggregates::RevenueSharingAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:484:57
    |
484 |                 distribution_id: distribution_aggregate.distribution().id(),
    |                                                         ^^^^^^^^^^^^
    |
help: there is a method `distribution_id` with a similar name
    |
484 |                 distribution_id: distribution_aggregate.distribution_id().id(),
    |                                                                     +++

error[E0599]: no method named `distribution` found for reference `&payment::domain::aggregates::RevenueSharingAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:491:87
    |
491 |                 reference_id: Some(format!("revenue_share_{}", distribution_aggregate.distribution().id())),
    |                                                                                       ^^^^^^^^^^^^
    |
help: there is a method `distribution_id` with a similar name
    |
491 |                 reference_id: Some(format!("revenue_share_{}", distribution_aggregate.distribution_id().id())),
    |                                                                                                   +++

error[E0599]: no method named `shareholder_id` found for reference `&payment::domain::aggregates::ShareholderDistribution` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:493:51
    |
493 |                     "shareholder_id": shareholder.shareholder_id(),
    |                                                   ^^^^^^^^^^^^^^-- help: remove the arguments
    |                                                   |
    |                                                   field, not a method

error[E0599]: no method named `ownership_percentage` found for reference `&payment::domain::aggregates::ShareholderDistribution` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:494:57
    |
494 |                     "ownership_percentage": shareholder.ownership_percentage()
    |                                                         ^^^^^^^^^^^^^^^^^^^^-- help: remove the arguments
    |                                                         |
    |                                                         field, not a method

error[E0716]: temporary value dropped while borrowed
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/gateway_router.rs:130:32
    |
130 |         let payment_id_bytes = payment.payment().id().value().as_bytes();
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^           - temporary value is freed at the end of this statement
    |                                |
    |                                creates a temporary value which is freed while still in use
131 |         let index = payment_id_bytes.iter().sum::<u8>() as usize;
    |                     ---------------- borrow later used here
    |
    = note: consider using a `let` binding to create a longer lived value

error[E0382]: borrow of moved value: `primary_name`
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/gateway_router.rs:167:77
    |
157 |         let primary_name = primary_gateway.gateway_name().to_string();
    |             ------------ move occurs because `primary_name` has type `std::string::String`, which does not implement the `Copy` trait
...
163 |                     selected_gateway: primary_name,
    |                                       ------------ value moved here
...
167 |                     routing_reason: format!("Primary gateway {} succeeded", primary_name),
    |                                                                             ^^^^^^^^^^^^ value borrowed here after move
    |
    = note: this error originates in the macro `$crate::__export::format_args` which comes from the expansion of the macro `format` (in Nightly builds, run with -Z macro-backtrace for more info)
help: consider cloning the value if the performance cost is acceptable
    |
163 |                     selected_gateway: primary_name.clone(),
    |                                                   ++++++++

error[E0061]: this function takes 0 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/stripe_webhook.rs:104:26
    |
104 |             .find_by_id(&TransactionId::new(payment_id.to_string())?)
    |                          ^^^^^^^^^^^^^^^^^^ ---------------------- unexpected argument of type `std::string::String`
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:37:12
    |
37  |     pub fn new() -> Self {
    |            ^^^
help: remove the extra argument
    |
104 -             .find_by_id(&TransactionId::new(payment_id.to_string())?)
104 +             .find_by_id(&TransactionId::new()?)
    |

error[E0277]: the `?` operator can only be applied to values that implement `Try`
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/stripe_webhook.rs:104:26
    |
104 |             .find_by_id(&TransactionId::new(payment_id.to_string())?)
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the `?` operator cannot be applied to type `payment::domain::value_objects::TransactionId`
    |
    = help: the trait `Try` is not implemented for `payment::domain::value_objects::TransactionId`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/stripe_webhook.rs:128:38
    |
128 |         self.payment_repository.save(&updated_payment).await?;
    |                                 ---- ^^^^^^^^^^^^^^^^ expected `&PaymentAggregate`, found `&()`
    |                                 |
    |                                 arguments to this method are incorrect
    |
    = note: expected reference `&payment::domain::aggregates::PaymentAggregate`
               found reference `&()`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:19:14
    |
19  |     async fn save(&self, aggregate: &PaymentAggregate) -> PaymentRepositoryResult<()>;
    |              ^^^^        ---------

error[E0061]: this function takes 0 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/webhook_queue.rs:158:26
    |
158 |             .find_by_id(&crate::bounded_contexts::payment::domain::value_objects::TransactionId::new(payment_id.to_string())?)
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ---------------------- unexpected argument of type `std::string::String`
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:37:12
    |
37  |     pub fn new() -> Self {
    |            ^^^
help: remove the extra argument
    |
158 -             .find_by_id(&crate::bounded_contexts::payment::domain::value_objects::TransactionId::new(payment_id.to_string())?)
158 +             .find_by_id(&crate::bounded_contexts::payment::domain::value_objects::TransactionId::new()?)
    |

error[E0277]: the `?` operator can only be applied to values that implement `Try`
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/webhook_queue.rs:158:26
    |
158 |             .find_by_id(&crate::bounded_contexts::payment::domain::value_objects::TransactionId::new(payment_id.to_string())?)
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the `?` operator cannot be applied to type `payment::domain::value_objects::TransactionId`
    |
    = help: the trait `Try` is not implemented for `payment::domain::value_objects::TransactionId`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:219:29
    |
219 |             payment_method: request.payment_method,
    |                             ^^^^^^^^^^^^^^^^^^^^^^ expected `PaymentMethodDto`, found `String`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:221:23
    |
221 |             metadata: request.metadata,
    |                       ^^^^^^^^^^^^^^^^ expected `PaymentMetadataDto`, found `Option<Value>`
    |
    = note: expected struct `payment::application::commands::PaymentMetadataDto`
                 found enum `std::option::Option<JsonValue>`

error[E0599]: `payment::domain::value_objects::Currency` doesn't implement `std::fmt::Display`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:231:48
    |
231 |                     currency: request.currency.to_string(), // Returning requested currency
    |                                                ^^^^^^^^^ `payment::domain::value_objects::Currency` cannot be formatted with the default formatter
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:109:1
    |
109 | pub enum Currency {
    | ----------------- method `to_string` not found for this enum because it doesn't satisfy `_: Display` or `payment::domain::value_objects::Currency: ToString`
    |
    = note: the following trait bounds were not satisfied:
            `payment::domain::value_objects::Currency: std::fmt::Display`
            which is required by `payment::domain::value_objects::Currency: ToString`
    = note: in format strings you may be able to use `{:?}` (or {:#?} for pretty-print) instead
note: the trait `std::fmt::Display` must be implemented
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/fmt/mod.rs:1019:1
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following trait defines an item `to_string`, perhaps you need to implement it:
            candidate #1: `ToString`

error[E0063]: missing field `include_events` in initializer of `payment::application::queries::GetPaymentQuery`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:287:29
    |
287 |                 let query = GetPaymentQuery { payment_id };
    |                             ^^^^^^^^^^^^^^^ missing `include_events`

error[E0433]: failed to resolve: use of undeclared type `GetPaymentQueryHandler`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:288:37
    |
288 |                 let query_handler = GetPaymentQueryHandler::new(controller.payment_repository.clone());
    |                                     ^^^^^^^^^^^^^^^^^^^^^^
    |                                     |
    |                                     use of undeclared type `GetPaymentQueryHandler`
    |                                     help: a trait with a similar name exists: `PaymentQueryHandler`

error[E0063]: missing field `include_events` in initializer of `payment::application::queries::GetPaymentQuery`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:335:29
    |
335 |                 let query = GetPaymentQuery { payment_id };
    |                             ^^^^^^^^^^^^^^^ missing `include_events`

error[E0433]: failed to resolve: use of undeclared type `GetPaymentQueryHandler`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:336:37
    |
336 |                 let query_handler = GetPaymentQueryHandler::new(controller.payment_repository.clone());
    |                                     ^^^^^^^^^^^^^^^^^^^^^^
    |                                     |
    |                                     use of undeclared type `GetPaymentQueryHandler`
    |                                     help: a trait with a similar name exists: `PaymentQueryHandler`

error[E0063]: missing field `include_events` in initializer of `payment::application::queries::GetPaymentQuery`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:380:29
    |
380 |                 let query = GetPaymentQuery { payment_id };
    |                             ^^^^^^^^^^^^^^^ missing `include_events`

error[E0433]: failed to resolve: use of undeclared type `GetPaymentQueryHandler`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:381:37
    |
381 |                 let query_handler = GetPaymentQueryHandler::new(controller.payment_repository.clone());
    |                                     ^^^^^^^^^^^^^^^^^^^^^^
    |                                     |
    |                                     use of undeclared type `GetPaymentQueryHandler`
    |                                     help: a trait with a similar name exists: `PaymentQueryHandler`

error[E0609]: no field `original_payment_id` on type `dto::InitiateRefundRequest`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:414:43
    |
414 |         let original_payment_id = request.original_payment_id.ok_or(StatusCode::BAD_REQUEST)?;
    |                                           ^^^^^^^^^^^^^^^^^^^ unknown field
    |
    = note: available fields are: `payment_id`, `refund_amount`, `reason`

error[E0599]: no method named `unwrap_or_else` found for struct `std::string::String` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:420:36
    |
420 |             reason: request.reason.unwrap_or_else(|| "User requested refund".to_string()),
    |                                    ^^^^^^^^^^^^^^ method not found in `String`

error[E0609]: no field `payment_command_handler` on type `Arc<PaymentController>`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:424:26
    |
424 |         match controller.payment_command_handler.handle_initiate_refund(command).await {
    |                          ^^^^^^^^^^^^^^^^^^^^^^^ unknown field
    |
    = note: available fields are: `payment_repository`, `royalty_repository`, `wallet_repository`, `webhook_router`, `webhook_queue_processor`, `command_handler`

error[E0063]: missing field `include_events` in initializer of `payment::application::queries::GetPaymentQuery`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:458:21
    |
458 |         let query = GetPaymentQuery { payment_id };
    |                     ^^^^^^^^^^^^^^^ missing `include_events`

error[E0433]: failed to resolve: use of undeclared type `GetPaymentQueryHandler`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:459:23
    |
459 |         let handler = GetPaymentQueryHandler::new(controller.payment_repository.clone());
    |                       ^^^^^^^^^^^^^^^^^^^^^^
    |                       |
    |                       use of undeclared type `GetPaymentQueryHandler`
    |                       help: a trait with a similar name exists: `PaymentQueryHandler`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:475:52
    |
475 |         let query = GetPaymentByTransactionQuery { transaction_id };
    |                                                    ^^^^^^^^^^^^^^ expected `Uuid`, found `String`

warning: unused variable: `controller`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:483:15
    |
483 |         State(controller): State<Arc<PaymentController>>,
    |               ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_controller`

warning: unused variable: `query`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:486:13
    |
486 |         let query = SearchPaymentsQuery {
    |             ^^^^^ help: if this is intentional, prefix it with an underscore: `_query`

warning: unused variable: `params`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:513:15
    |
513 |         Query(params): Query<std::collections::HashMap<String, String>>,
    |               ^^^^^^ help: if this is intentional, prefix it with an underscore: `_params`

warning: unused variable: `params`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:548:15
    |
548 |         Query(params): Query<std::collections::HashMap<String, String>>,
    |               ^^^^^^ help: if this is intentional, prefix it with an underscore: `_params`

error[E0433]: failed to resolve: use of undeclared type `DistributeRoyaltiesCommandHandler`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:605:23
    |
605 |         let handler = DistributeRoyaltiesCommandHandler::new(controller.royalty_repository.clone());
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ use of undeclared type `DistributeRoyaltiesCommandHandler`

warning: unused variable: `distribution_id`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:628:14
    |
628 |         Path(distribution_id): Path<Uuid>,
    |              ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_distribution_id`

warning: unused variable: `current_user_id`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:629:19
    |
629 |         Extension(current_user_id): Extension<Uuid>,
    |                   ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_current_user_id`

warning: unused variable: `params`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:637:15
    |
637 |         Query(params): Query<std::collections::HashMap<String, String>>,
    |               ^^^^^^ help: if this is intentional, prefix it with an underscore: `_params`

warning: unused variable: `artist_id`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:644:14
    |
644 |         Path(artist_id): Path<Uuid>,
    |              ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_artist_id`

warning: unused variable: `params`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:645:15
    |
645 |         Query(params): Query<std::collections::HashMap<String, String>>,
    |               ^^^^^^ help: if this is intentional, prefix it with an underscore: `_params`

error[E0433]: failed to resolve: use of undeclared type `CreateWalletCommandHandler`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:667:23
    |
667 |         let handler = CreateWalletCommandHandler::new(controller.wallet_repository.clone());
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^ use of undeclared type `CreateWalletCommandHandler`

warning: unused variable: `params`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:691:15
    |
691 |         Query(params): Query<std::collections::HashMap<String, String>>,
    |               ^^^^^^ help: if this is intentional, prefix it with an underscore: `_params`

warning: unused variable: `current_user_id`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:692:19
    |
692 |         Extension(current_user_id): Extension<Uuid>,
    |                   ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_current_user_id`

warning: unused variable: `wallet_id`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:700:14
    |
700 |         Path(wallet_id): Path<Uuid>,
    |              ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_wallet_id`

warning: unused variable: `current_user_id`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:701:19
    |
701 |         Extension(current_user_id): Extension<Uuid>,
    |                   ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_current_user_id`

warning: unused variable: `wallet_id`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:709:14
    |
709 |         Path(wallet_id): Path<Uuid>,
    |              ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_wallet_id`

warning: unused variable: `current_user_id`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:710:19
    |
710 |         Extension(current_user_id): Extension<Uuid>,
    |                   ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_current_user_id`

warning: unused variable: `current_user_id`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:719:19
    |
719 |         Extension(current_user_id): Extension<Uuid>,
    |                   ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_current_user_id`

warning: unused variable: `gateway_id`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:752:14
    |
752 |         Path(gateway_id): Path<String>,
    |              ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_gateway_id`

warning: unused variable: `current_user_id`
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:753:19
    |
753 |         Extension(current_user_id): Extension<Uuid>,
    |                   ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_current_user_id`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/orchestrator.rs:375:55
    |
375 |         let event_bus: Arc<dyn EventBus> = Arc::clone(&redis_event_bus);
    |                                            ---------- ^^^^^^^^^^^^^^^^ expected `&Arc<dyn EventBus>`, found `&Arc<RedisStreamsEventBus>`
    |                                            |
    |                                            arguments to this function are incorrect
    |
    = note: expected reference `&Arc<dyn orchestrator::EventBus>`
               found reference `&Arc<RedisStreamsEventBus>`
    = help: `RedisStreamsEventBus` implements `EventBus` so you could box the found value and coerce it to the trait object `Box<dyn EventBus>`, you will have to change the expected type as well
note: method defined here
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/clone.rs:165:8

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/orchestrator.rs:394:44
    |
394 |         Self::register_handlers(Arc::clone(&event_bus)).await?;
    |                                 ---------- ^^^^^^^^^^ expected `&Arc<dyn EventBus>`, found `&Arc<InMemoryEventBus>`
    |                                 |
    |                                 arguments to this function are incorrect
    |
    = note: expected reference `&Arc<dyn orchestrator::EventBus>`
               found reference `&Arc<orchestrator::InMemoryEventBus>`
    = help: `orchestrator::InMemoryEventBus` implements `EventBus` so you could box the found value and coerce it to the trait object `Box<dyn EventBus>`, you will have to change the expected type as well
note: method defined here
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/clone.rs:165:8

error[E0277]: `?` couldn't convert the error: `dyn StdError + std::marker::Send + Sync: Sized` is not satisfied
  --> services/api-gateway/src/gateways/user_gateway.rs:30:77
   |
30 |     let user_app_state = AppStateFactory::create_user_state(app_state).await?;
   |                          ---------------------------------------------------^ doesn't have a size known at compile-time
   |                          |
   |                          this can't be annotated with `?` because it has type `Result<_, Box<dyn StdError + std::marker::Send + Sync>>`
   |
   = help: the trait `Sized` is not implemented for `dyn StdError + std::marker::Send + Sync`
   = note: the question mark operation (`?`) implicitly performs a conversion on the error value using the `From` trait
   = note: required for `Box<dyn StdError + std::marker::Send + Sync>` to implement `StdError`
   = note: required for `Box<dyn StdError>` to implement `From<Box<dyn StdError + std::marker::Send + Sync>>`

error[E0308]: arguments to this function are incorrect
   --> services/api-gateway/src/gateways/fan_loyalty_gateway.rs:24:33
    |
24  |     let fan_loyalty_container = RealFanLoyaltyFactory::create_container(
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: expected `Pool<Postgres>`, found `DatabasePool`
   --> services/api-gateway/src/gateways/fan_loyalty_gateway.rs:25:9
    |
25  |         app_state.database_pool.clone(),
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = note: expected struct `Pool<Postgres>`
               found struct `DatabasePool`
note: expected `Client`, found `Arc<dyn EventBus>`
   --> services/api-gateway/src/gateways/fan_loyalty_gateway.rs:26:9
    |
26  |         app_state.event_bus.clone(),
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = note: expected struct `redis::Client`
               found struct `Arc<dyn orchestrator::EventBus>`
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/real_dependency_injection.rs:101:12
    |
101 |     pub fn create_container(pool: PgPool, redis_client: Client) -> Arc<RealFanLoyaltyContainer> {
    |            ^^^^^^^^^^^^^^^^ ------------  --------------------

error[E0308]: mismatched types
   --> services/api-gateway/src/gateways/fan_loyalty_gateway.rs:37:21
    |
37  |         .with_state(fan_loyalty_container);
    |          ---------- ^^^^^^^^^^^^^^^^^^^^^ expected `()`, found `Arc<RealFanLoyaltyContainer>`
    |          |
    |          arguments to this method are incorrect
    |
    = note: expected unit type `()`
                  found struct `Arc<RealFanLoyaltyContainer>`
note: method defined here
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/axum-0.7.9/src/routing/mod.rs:370:12
    |
370 |     pub fn with_state<S2>(self, state: S) -> Router<S2> {
    |            ^^^^^^^^^^

warning: unused variable: `container`
  --> services/api-gateway/src/gateways/fan_loyalty_gateway.rs:85:11
   |
85 |     State(container): State<Arc<FanLoyaltyContainer>>,
   |           ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_container`

warning: unused variable: `payload`
  --> services/api-gateway/src/gateways/fan_loyalty_gateway.rs:86:10
   |
86 |     Json(payload): Json<serde_json::Value>,
   |          ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_payload`

warning: unused variable: `container`
   --> services/api-gateway/src/gateways/fan_loyalty_gateway.rs:101:11
    |
101 |     State(container): State<Arc<FanLoyaltyContainer>>,
    |           ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_container`

warning: unused variable: `payload`
   --> services/api-gateway/src/gateways/fan_loyalty_gateway.rs:102:10
    |
102 |     Json(payload): Json<serde_json::Value>,
    |          ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_payload`

warning: unused variable: `container`
   --> services/api-gateway/src/gateways/fan_loyalty_gateway.rs:117:11
    |
117 |     State(container): State<Arc<FanLoyaltyContainer>>,
    |           ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_container`

warning: unused variable: `container`
   --> services/api-gateway/src/gateways/fan_loyalty_gateway.rs:134:11
    |
134 |     State(container): State<Arc<FanLoyaltyContainer>>,
    |           ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_container`

warning: unused variable: `container`
   --> services/api-gateway/src/gateways/fan_loyalty_gateway.rs:151:11
    |
151 |     State(container): State<Arc<FanLoyaltyContainer>>,
    |           ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_container`

warning: unused variable: `payment_data`
   --> services/api-gateway/src/handlers.rs:628:10
    |
628 |     Json(payment_data): Json<serde_json::Value>,
    |          ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_payment_data`

warning: unused variable: `routing`
   --> services/api-gateway/src/shared/infrastructure/event_bus/hybrid_event_bus.rs:113:9
    |
113 |         routing: RoutingDecision
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_routing`

warning: unused variable: `kafka`
   --> services/api-gateway/src/shared/infrastructure/event_bus/hybrid_event_bus.rs:116:18
    |
116 |             Some(kafka) => {
    |                  ^^^^^ help: if this is intentional, prefix it with an underscore: `_kafka`

warning: unused variable: `request`
  --> services/api-gateway/src/shared/infrastructure/cdn/controllers.rs:57:10
   |
57 |     Json(request): Json<UploadContentRequest>,
   |          ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `app_state`
  --> services/api-gateway/src/lib.rs:34:13
   |
34 |         let app_state = match AppState::default().await {
   |             ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_app_state`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/user/infrastructure/postgres_repository.rs:628:29
    |
628 |                   avatar_url: row.try_get("avatar_url").ok().and_then(|url: Option<String>| {
    |  _____________________________^
629 | |                     url.map(|u| ProfileUrl::new(u).ok())
630 | |                 }).flatten(),
    | |____________________________^ expected `Option<String>`, found `Option<ProfileUrl>`
    |
    = note: expected enum `std::option::Option<std::string::String>`
               found enum `std::option::Option<ProfileUrl>`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/user/infrastructure/postgres_repository.rs:681:29
    |
681 |                   avatar_url: row.try_get("avatar_url").ok().and_then(|url: Option<String>| {
    |  _____________________________^
682 | |                     url.map(|u| ProfileUrl::new(u).ok())
683 | |                 }).flatten(),
    | |____________________________^ expected `Option<String>`, found `Option<ProfileUrl>`
    |
    = note: expected enum `std::option::Option<std::string::String>`
               found enum `std::option::Option<ProfileUrl>`

error[E0689]: can't call method `min` on ambiguous numeric type `{float}`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/aggregates.rs:100:15
    |
100 |         score.min(1.0)
    |               ^^^
    |
help: you must specify a type for this binding, like `f32`
    |
78  |         let mut score: f32 = 0.0;
    |                      +++++

error[E0061]: this function takes 0 arguments but 1 argument was supplied
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/aggregates.rs:285:30
    |
285 |             biometric_score: BiometricScore::new(0.0),
    |                              ^^^^^^^^^^^^^^^^^^^ --- unexpected argument of type `{float}`
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/aggregates.rs:157:12
    |
157 |     pub fn new() -> Self {
    |            ^^^
help: remove the extra argument
    |
285 -             biometric_score: BiometricScore::new(0.0),
285 +             biometric_score: BiometricScore::new(),
    |

error[E0782]: expected a type, found a trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:69:40
   |
69 |         let fan_verification_handler = FanVerificationHandler::new(Arc::new(Self {
   |                                        ^^^^^^^^^^^^^^^^^^^^^^
   |
help: you can add the `dyn` keyword if you want a trait object
   |
69 |         let fan_verification_handler = <dyn FanVerificationHandler>::new(Arc::new(Self {
   |                                        ++++                       +

error[E0063]: missing field `fan_loyalty_handlers` in initializer of `dependency_injection::FanLoyaltyContainer`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:69:77
   |
69 |         let fan_verification_handler = FanVerificationHandler::new(Arc::new(Self {
   |                                                                             ^^^^ missing `fan_loyalty_handlers`

error[E0782]: expected a type, found a trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:83:33
   |
83 |         let wristband_handler = WristbandHandler::new(Arc::new(Self {
   |                                 ^^^^^^^^^^^^^^^^
   |
help: you can add the `dyn` keyword if you want a trait object
   |
83 |         let wristband_handler = <dyn WristbandHandler>::new(Arc::new(Self {
   |                                 ++++                 +

error[E0063]: missing field `fan_loyalty_handlers` in initializer of `dependency_injection::FanLoyaltyContainer`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:83:64
   |
83 |         let wristband_handler = WristbandHandler::new(Arc::new(Self {
   |                                                                ^^^^ missing `fan_loyalty_handlers`

error[E0782]: expected a type, found a trait
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:97:26
   |
97 |         let qr_handler = QrCodeHandler::new(Arc::new(Self {
   |                          ^^^^^^^^^^^^^
   |
help: you can add the `dyn` keyword if you want a trait object
   |
97 |         let qr_handler = <dyn QrCodeHandler>::new(Arc::new(Self {
   |                          ++++              +

error[E0063]: missing field `fan_loyalty_handlers` in initializer of `dependency_injection::FanLoyaltyContainer`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:97:54
   |
97 |         let qr_handler = QrCodeHandler::new(Arc::new(Self {
   |                                                      ^^^^ missing `fan_loyalty_handlers`

error[E0308]: arguments to this function are incorrect
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:111:45
    |
111 |         let fan_loyalty_handlers = Arc::new(FanLoyaltyHandlers::new(
    |                                             ^^^^^^^^^^^^^^^^^^^^^^^
    |
note: expected `WristbandNftService`, found `Arc<dyn NftService>`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:115:13
    |
115 |             nft_service.clone(),
    |             ^^^^^^^^^^^^^^^^^^^
    = note: expected struct `WristbandNftService`
               found struct `Arc<dyn fan_loyalty::domain::services::NftService>`
note: expected `QrCodeService`, found `Arc<dyn QrCodeService>`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:116:13
    |
116 |             qr_code_service.clone(),
    |             ^^^^^^^^^^^^^^^^^^^^^^^
    = note: expected struct `qr_service::QrCodeService`
               found struct `Arc<dyn fan_loyalty::domain::services::QrCodeService>`
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/rest_handlers.rs:38:12
    |
38  |     pub fn new(
    |            ^^^
...
42  |         nft_service: WristbandNftService,
    |         --------------------------------
43  |         qr_service: QrCodeService,
    |         -------------------------

error[E0277]: `dependency_injection::FanLoyaltyContainer` doesn't implement `std::fmt::Debug`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:199:5
    |
197 | #[derive(Debug, Clone)]
    |          ----- in this derive macro expansion
198 | pub struct FanLoyaltyFactory {
199 |     container: Arc<FanLoyaltyContainer>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ `dependency_injection::FanLoyaltyContainer` cannot be formatted using `{:?}`
    |
    = help: the trait `std::fmt::Debug` is not implemented for `dependency_injection::FanLoyaltyContainer`
    = note: add `#[derive(Debug)]` to `dependency_injection::FanLoyaltyContainer` or manually `impl std::fmt::Debug for dependency_injection::FanLoyaltyContainer`
    = help: the trait `std::fmt::Debug` is implemented for `Arc<T, A>`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:418:12
    |
418 |         Ok(activation_result)
    |         -- ^^^^^^^^^^^^^^^^^ expected `WristbandActivationResult`, found a different `WristbandActivationResult`
    |         |
    |         arguments to this enum variant are incorrect
    |
    = note: `WristbandActivationResult` and `WristbandActivationResult` have similar names, but are actually distinct types
note: `WristbandActivationResult` is defined in module `crate::bounded_contexts::fan_loyalty::domain::services` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:167:1
    |
167 | pub struct WristbandActivationResult {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
note: `WristbandActivationResult` is defined in module `crate::bounded_contexts::fan_loyalty::application::dependency_injection` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:600:1
    |
600 | pub struct WristbandActivationResult {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
help: the type constructed contains `fan_loyalty::domain::services::WristbandActivationResult` due to the type of the argument passed
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:418:9
    |
418 |         Ok(activation_result)
    |         ^^^-----------------^
    |            |
    |            this argument influences the type of `Ok`
note: tuple variant defined here
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:532:5

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:514:48
    |
514 |         self.zk_proof_repository.save_zk_proof(&proof).await?;
    |                                  ------------- ^^^^^^ expected `&ZkProof`, found `&ZkBiometricProof`
    |                                  |
    |                                  arguments to this method are incorrect
    |
    = note: expected reference `&fan_loyalty::domain::repositories::ZkProof`
               found reference `&fan_loyalty::domain::services::ZkBiometricProof`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:90:14
    |
90  |     async fn save_zk_proof(&self, proof: &ZkProof) -> Result<(), String>;
    |              ^^^^^^^^^^^^^        -----

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:516:12
    |
516 |         Ok(proof)
    |         -- ^^^^^ expected `ZkProof`, found `ZkBiometricProof`
    |         |
    |         arguments to this enum variant are incorrect
    |
help: the type constructed contains `fan_loyalty::domain::services::ZkBiometricProof` due to the type of the argument passed
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:516:9
    |
516 |         Ok(proof)
    |         ^^^-----^
    |            |
    |            this argument influences the type of `Ok`
note: tuple variant defined here
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:532:5

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/application/dependency_injection.rs:521:62
    |
521 |         let is_valid = self.zk_proof_service.verify_zk_proof(&command.proof).await?;
    |                                              --------------- ^^^^^^^^^^^^^^ expected `fan_loyalty::domain::services::ZkProof`, found `ZkProof`
    |                                              |
    |                                              arguments to this method are incorrect
    |
    = note: `ZkProof` and `fan_loyalty::domain::services::ZkProof` have similar names, but are actually distinct types
note: `ZkProof` is defined in module `crate::bounded_contexts::fan_loyalty::domain::repositories` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/repositories.rs:142:1
    |
142 | pub struct ZkProof {
    | ^^^^^^^^^^^^^^^^^^
note: `fan_loyalty::domain::services::ZkProof` is defined in module `crate::bounded_contexts::fan_loyalty::domain::services` of the current crate
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:256:1
    |
256 | pub struct ZkProof {
    | ^^^^^^^^^^^^^^^^^^
note: method defined here
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/services.rs:100:14
    |
100 |     async fn verify_zk_proof(&self, proof: &ZkProof) -> Result<bool, String>;
    |              ^^^^^^^^^^^^^^^        -----

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Clone` is not satisfied
  --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:20:5
   |
16 | #[derive(Clone, Debug, Serialize, Deserialize)]
   |          ----- in this derive macro expansion
...
20 |     uncommitted_events: Vec<Box<dyn DomainEvent>>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Clone` is not implemented for `dyn shared::domain::events::DomainEvent`
   |
   = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Clone`
   = note: 1 redundant requirement hidden
   = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Clone`

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Serialize` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:16:24
     |
16   | #[derive(Clone, Debug, Serialize, Deserialize)]
     |                        ^^^^^^^^^ the trait `Serialize` is not implemented for `dyn shared::domain::events::DomainEvent`
...
20   |     uncommitted_events: Vec<Box<dyn DomainEvent>>,
     |     ------------------ required by a bound introduced by this call
     |
     = note: for local types consider adding `#[derive(serde::Serialize)]` to your `dyn shared::domain::events::DomainEvent` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Serialize`:
               &'a T
               &'a mut T
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
               (T0, T1, T2, T3)
               (T0, T1, T2, T3, T4)
             and 1350 others
     = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Serialize`
     = note: 1 redundant requirement hidden
     = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Serialize`
note: required by a bound in `auth::_::_serde::ser::SerializeStruct::serialize_field`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/ser/mod.rs:1866:21
     |
1864 |     fn serialize_field<T>(&mut self, key: &'static str, value: &T) -> Result<(), Self::Error>
     |        --------------- required by a bound in this associated function
1865 |     where
1866 |         T: ?Sized + Serialize;
     |                     ^^^^^^^^^ required by this bound in `SerializeStruct::serialize_field`
     = note: this error originates in the derive macro `Serialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:20:25
     |
20   |     uncommitted_events: Vec<Box<dyn DomainEvent>>,
     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `dyn shared::domain::events::DomainEvent`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `dyn shared::domain::events::DomainEvent` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1336 others
     = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Deserialize<'_>`
     = note: 1 redundant requirement hidden
     = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Deserialize<'_>`
note: required by a bound in `next_element`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1732:12
     |
1730 |     fn next_element<T>(&mut self) -> Result<Option<T>, Self::Error>
     |        ------------ required by a bound in this associated function
1731 |     where
1732 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `SeqAccess::next_element`

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:20:25
     |
20   |     uncommitted_events: Vec<Box<dyn DomainEvent>>,
     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `dyn shared::domain::events::DomainEvent`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `dyn shared::domain::events::DomainEvent` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1336 others
     = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Deserialize<'_>`
     = note: 1 redundant requirement hidden
     = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Deserialize<'_>`
note: required by a bound in `next_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1871:12
     |
1869 |     fn next_value<V>(&mut self) -> Result<V, Self::Error>
     |        ---------- required by a bound in this associated function
1870 |     where
1871 |         V: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `MapAccess::next_value`

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Deserialize<'_>` is not satisfied
  --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:16:35
   |
16 | #[derive(Clone, Debug, Serialize, Deserialize)]
   |                                   ^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `dyn shared::domain::events::DomainEvent`
   |
   = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `dyn shared::domain::events::DomainEvent` type
   = note: for types from other crates check whether the crate offers a `serde` feature flag
   = help: the following other types implement trait `Deserialize<'de>`:
             &'a JsonRawValue
             &'a [u8]
             &'a std::path::Path
             &'a str
             ()
             (T,)
             (T0, T1)
             (T0, T1, T2)
           and 1336 others
   = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Deserialize<'_>`
   = note: 1 redundant requirement hidden
   = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Deserialize<'_>`
note: required by a bound in `auth::_::_serde::__private::de::missing_field`
  --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/private/de.rs:25:8
   |
23 | pub fn missing_field<'de, V, E>(field: &'static str) -> Result<V, E>
   |        ------------- required by a bound in this function
24 | where
25 |     V: Deserialize<'de>,
   |        ^^^^^^^^^^^^^^^^ required by this bound in `missing_field`
   = note: this error originates in the derive macro `Deserialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Clone` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:285:5
    |
281 | #[derive(Clone, Debug, Serialize, Deserialize)]
    |          ----- in this derive macro expansion
...
285 |     uncommitted_events: Vec<Box<dyn DomainEvent>>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Clone` is not implemented for `dyn shared::domain::events::DomainEvent`
    |
    = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Clone`
    = note: 1 redundant requirement hidden
    = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Clone`

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Serialize` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:281:24
     |
281  | #[derive(Clone, Debug, Serialize, Deserialize)]
     |                        ^^^^^^^^^ the trait `Serialize` is not implemented for `dyn shared::domain::events::DomainEvent`
...
285  |     uncommitted_events: Vec<Box<dyn DomainEvent>>,
     |     ------------------ required by a bound introduced by this call
     |
     = note: for local types consider adding `#[derive(serde::Serialize)]` to your `dyn shared::domain::events::DomainEvent` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Serialize`:
               &'a T
               &'a mut T
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
               (T0, T1, T2, T3)
               (T0, T1, T2, T3, T4)
             and 1350 others
     = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Serialize`
     = note: 1 redundant requirement hidden
     = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Serialize`
note: required by a bound in `auth::_::_serde::ser::SerializeStruct::serialize_field`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/ser/mod.rs:1866:21
     |
1864 |     fn serialize_field<T>(&mut self, key: &'static str, value: &T) -> Result<(), Self::Error>
     |        --------------- required by a bound in this associated function
1865 |     where
1866 |         T: ?Sized + Serialize;
     |                     ^^^^^^^^^ required by this bound in `SerializeStruct::serialize_field`
     = note: this error originates in the derive macro `Serialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:285:25
     |
285  |     uncommitted_events: Vec<Box<dyn DomainEvent>>,
     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `dyn shared::domain::events::DomainEvent`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `dyn shared::domain::events::DomainEvent` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1336 others
     = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Deserialize<'_>`
     = note: 1 redundant requirement hidden
     = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Deserialize<'_>`
note: required by a bound in `next_element`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1732:12
     |
1730 |     fn next_element<T>(&mut self) -> Result<Option<T>, Self::Error>
     |        ------------ required by a bound in this associated function
1731 |     where
1732 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `SeqAccess::next_element`

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:285:25
     |
285  |     uncommitted_events: Vec<Box<dyn DomainEvent>>,
     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `dyn shared::domain::events::DomainEvent`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `dyn shared::domain::events::DomainEvent` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1336 others
     = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Deserialize<'_>`
     = note: 1 redundant requirement hidden
     = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Deserialize<'_>`
note: required by a bound in `next_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1871:12
     |
1869 |     fn next_value<V>(&mut self) -> Result<V, Self::Error>
     |        ---------- required by a bound in this associated function
1870 |     where
1871 |         V: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `MapAccess::next_value`

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Deserialize<'_>` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:281:35
    |
281 | #[derive(Clone, Debug, Serialize, Deserialize)]
    |                                   ^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `dyn shared::domain::events::DomainEvent`
    |
    = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `dyn shared::domain::events::DomainEvent` type
    = note: for types from other crates check whether the crate offers a `serde` feature flag
    = help: the following other types implement trait `Deserialize<'de>`:
              &'a JsonRawValue
              &'a [u8]
              &'a std::path::Path
              &'a str
              ()
              (T,)
              (T0, T1)
              (T0, T1, T2)
            and 1336 others
    = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Deserialize<'_>`
    = note: 1 redundant requirement hidden
    = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Deserialize<'_>`
note: required by a bound in `auth::_::_serde::__private::de::missing_field`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/private/de.rs:25:8
    |
23  | pub fn missing_field<'de, V, E>(field: &'static str) -> Result<V, E>
    |        ------------- required by a bound in this function
24  | where
25  |     V: Deserialize<'de>,
    |        ^^^^^^^^^^^^^^^^ required by this bound in `missing_field`
    = note: this error originates in the derive macro `Deserialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0616]: field `period_start` of struct `payment::domain::entities::RoyaltyDistribution` is private
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:350:51
    |
350 |                 "period_start": self.distribution.period_start,
    |                                                   ^^^^^^^^^^^^ private field

error[E0616]: field `period_end` of struct `payment::domain::entities::RoyaltyDistribution` is private
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:351:49
    |
351 |                 "period_end": self.distribution.period_end,
    |                                                 ^^^^^^^^^^ private field

error[E0616]: field `period_start` of struct `payment::domain::entities::RoyaltyDistribution` is private
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:358:45
    |
358 |             period_start: self.distribution.period_start,
    |                                             ^^^^^^^^^^^^ private field

error[E0616]: field `period_end` of struct `payment::domain::entities::RoyaltyDistribution` is private
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:359:43
    |
359 |             period_end: self.distribution.period_end,
    |                                           ^^^^^^^^^^ private field

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Clone` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:440:5
    |
427 | #[derive(Clone, Debug, Serialize, Deserialize)]
    |          ----- in this derive macro expansion
...
440 |     uncommitted_events: Vec<Box<dyn DomainEvent>>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Clone` is not implemented for `dyn shared::domain::events::DomainEvent`
    |
    = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Clone`
    = note: 1 redundant requirement hidden
    = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Clone`

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Serialize` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:427:24
     |
427  | #[derive(Clone, Debug, Serialize, Deserialize)]
     |                        ^^^^^^^^^ the trait `Serialize` is not implemented for `dyn shared::domain::events::DomainEvent`
...
440  |     uncommitted_events: Vec<Box<dyn DomainEvent>>,
     |     ------------------ required by a bound introduced by this call
     |
     = note: for local types consider adding `#[derive(serde::Serialize)]` to your `dyn shared::domain::events::DomainEvent` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Serialize`:
               &'a T
               &'a mut T
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
               (T0, T1, T2, T3)
               (T0, T1, T2, T3, T4)
             and 1350 others
     = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Serialize`
     = note: 1 redundant requirement hidden
     = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Serialize`
note: required by a bound in `auth::_::_serde::ser::SerializeStruct::serialize_field`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/ser/mod.rs:1866:21
     |
1864 |     fn serialize_field<T>(&mut self, key: &'static str, value: &T) -> Result<(), Self::Error>
     |        --------------- required by a bound in this associated function
1865 |     where
1866 |         T: ?Sized + Serialize;
     |                     ^^^^^^^^^ required by this bound in `SerializeStruct::serialize_field`
     = note: this error originates in the derive macro `Serialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:440:25
     |
440  |     uncommitted_events: Vec<Box<dyn DomainEvent>>,
     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `dyn shared::domain::events::DomainEvent`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `dyn shared::domain::events::DomainEvent` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1336 others
     = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Deserialize<'_>`
     = note: 1 redundant requirement hidden
     = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Deserialize<'_>`
note: required by a bound in `next_element`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1732:12
     |
1730 |     fn next_element<T>(&mut self) -> Result<Option<T>, Self::Error>
     |        ------------ required by a bound in this associated function
1731 |     where
1732 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `SeqAccess::next_element`

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:440:25
     |
440  |     uncommitted_events: Vec<Box<dyn DomainEvent>>,
     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `dyn shared::domain::events::DomainEvent`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `dyn shared::domain::events::DomainEvent` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1336 others
     = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Deserialize<'_>`
     = note: 1 redundant requirement hidden
     = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Deserialize<'_>`
note: required by a bound in `next_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1871:12
     |
1869 |     fn next_value<V>(&mut self) -> Result<V, Self::Error>
     |        ---------- required by a bound in this associated function
1870 |     where
1871 |         V: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `MapAccess::next_value`

error[E0277]: the trait bound `dyn shared::domain::events::DomainEvent: Deserialize<'_>` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:427:35
    |
427 | #[derive(Clone, Debug, Serialize, Deserialize)]
    |                                   ^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `dyn shared::domain::events::DomainEvent`
    |
    = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `dyn shared::domain::events::DomainEvent` type
    = note: for types from other crates check whether the crate offers a `serde` feature flag
    = help: the following other types implement trait `Deserialize<'de>`:
              &'a JsonRawValue
              &'a [u8]
              &'a std::path::Path
              &'a str
              ()
              (T,)
              (T0, T1)
              (T0, T1, T2)
            and 1336 others
    = note: required for `Box<dyn shared::domain::events::DomainEvent>` to implement `Deserialize<'_>`
    = note: 1 redundant requirement hidden
    = note: required for `Vec<Box<dyn shared::domain::events::DomainEvent>>` to implement `Deserialize<'_>`
note: required by a bound in `auth::_::_serde::__private::de::missing_field`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/private/de.rs:25:8
    |
23  | pub fn missing_field<'de, V, E>(field: &'static str) -> Result<V, E>
    |        ------------- required by a bound in this function
24  | where
25  |     V: Deserialize<'de>,
    |        ^^^^^^^^^^^^^^^^ required by this bound in `missing_field`
    = note: this error originates in the derive macro `Deserialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `f64: std::cmp::Eq` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:284:9
    |
274 | #[derive(Clone, Debug, PartialEq, Eq, Serialize, Deserialize)]
    |                                   -- in this derive macro expansion
...
284 |         ownership_percentage: f64,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `std::cmp::Eq` is not implemented for `f64`
    |
    = help: the following other types implement trait `std::cmp::Eq`:
              i128
              i16
              i32
              i64
              i8
              isize
              u128
              u16
            and 4 others
note: required by a bound in `AssertParamIsEq`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/cmp.rs:364:1

error[E0277]: the trait bound `f64: std::cmp::Eq` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:400:9
    |
379 | #[derive(Clone, Debug, PartialEq, Eq, Serialize, Deserialize)]
    |                                   -- in this derive macro expansion
...
400 |         refund_amount: f64,
    |         ^^^^^^^^^^^^^^^^^^ the trait `std::cmp::Eq` is not implemented for `f64`
    |
    = help: the following other types implement trait `std::cmp::Eq`:
              i128
              i16
              i32
              i64
              i8
              isize
              u128
              u16
            and 4 others
note: required by a bound in `AssertParamIsEq`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/cmp.rs:364:1

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:573:32
    |
573 |         Amount::new(total_fee, amount.currency())
    |         -----------            ^^^^^^^^^^^^^^^^^ expected `Currency`, found `&Currency`
    |         |
    |         arguments to this function are incorrect
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:58:12
    |
58  |     pub fn new(value: f64, currency: Currency) -> Result<Self, AppError> {
    |            ^^^             ------------------
help: consider using clone here
    |
573 |         Amount::new(total_fee, amount.currency().clone())
    |                                                 ++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:573:9
    |
560 |     pub fn calculate_platform_fee(&self, amount: &Amount, fee_type: FeeType) -> Result<Amount, String> {
    |                                                                                 ---------------------- expected `Result<payment::domain::value_objects::Amount, std::string::String>` because of return type
...
573 |         Amount::new(total_fee, amount.currency())
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Result<Amount, String>`, found `Result<Amount, AppError>`
    |
    = note: expected enum `Result<_, std::string::String>`
               found enum `Result<_, AppError>`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:585:32
    |
585 |         Amount::new(net_value, gross_amount.currency())
    |         -----------            ^^^^^^^^^^^^^^^^^^^^^^^ expected `Currency`, found `&Currency`
    |         |
    |         arguments to this function are incorrect
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:58:12
    |
58  |     pub fn new(value: f64, currency: Currency) -> Result<Self, AppError> {
    |            ^^^             ------------------
help: consider using clone here
    |
585 |         Amount::new(net_value, gross_amount.currency().clone())
    |                                                       ++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:585:9
    |
577 |     pub fn calculate_net_amount(&self, gross_amount: &Amount, fee_type: FeeType) -> Result<Amount, String> {
    |                                                                                     ---------------------- expected `Result<payment::domain::value_objects::Amount, std::string::String>` because of return type
...
585 |         Amount::new(net_value, gross_amount.currency())
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Result<Amount, String>`, found `Result<Amount, AppError>`
    |
    = note: expected enum `Result<_, std::string::String>`
               found enum `Result<_, AppError>`

error[E0277]: `?` couldn't convert the error to `AppError`
  --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:84:27
   |
84 |         command.validate()?;
   |                 ----------^ the trait `From<Vec<std::string::String>>` is not implemented for `AppError`
   |                 |
   |                 this can't be annotated with `?` because it has type `Result<_, Vec<std::string::String>>`
   |
note: `AppError` needs to implement `From<Vec<std::string::String>>`
  --> services/api-gateway/src/shared/domain/errors/mod.rs:4:1
   |
4  | pub enum AppError {
   | ^^^^^^^^^^^^^^^^^
   = note: the question mark operation (`?`) implicitly performs a conversion on the error value using the `From` trait
   = help: the following other types implement trait `From<T>`:
             `AppError` implements `From<Box<dyn StdError + std::marker::Send + Sync>>`
             `AppError` implements `From<ParseIntError>`
             `AppError` implements `From<serde_json::Error>`
             `AppError` implements `From<song_repository::RepositoryError>`
             `AppError` implements `From<sqlx::Error>`
             `AppError` implements `From<std::io::Error>`
             `AppError` implements `From<std::num::ParseFloatError>`
             `AppError` implements `From<std::string::String>`
             `AppError` implements `From<uuid::Error>`

error[E0614]: type `Uuid` cannot be dereferenced
  --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:97:33
   |
97 |                     payment_id: *existing_payment.payment().id().value(),
   |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ can't be dereferenced

error[E0609]: no field `action_required` on type `FraudAnalysisResult`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:119:28
    |
119 |         match fraud_result.action_required {
    |                            ^^^^^^^^^^^^^^^ unknown field
    |
    = note: available fields are: `overall_risk_score`, `individual_scores`, `triggered_rules`, `recommendation`, `analysis_timestamp`

error[E0599]: no variant or associated item named `AdditionalVerificationRequired` found for enum `AppError` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:124:38
    |
124 |                 return Err(AppError::AdditionalVerificationRequired);
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ variant or associated item not found in `AppError`
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:4:1
    |
4   | pub enum AppError {
    | ----------------- variant or associated item `AdditionalVerificationRequired` not found for this enum

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:134:25
    |
134 |             payment_id: *payment_aggregate.payment().id().value(),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ can't be dereferenced

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:184:34
    |
184 |             transaction_id: Some(*transaction_id.value()),
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^ can't be dereferenced

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:215:82
    |
215 |             transaction_id: payment_aggregate.payment().transaction_id().map(|t| *t.value()),
    |                                                                                  ^^^^^^^^^^ can't be dereferenced

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:239:82
    |
239 |             transaction_id: payment_aggregate.payment().transaction_id().map(|t| *t.value()),
    |                                                                                  ^^^^^^^^^^ can't be dereferenced

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:262:82
    |
262 |             transaction_id: payment_aggregate.payment().transaction_id().map(|t| *t.value()),
    |                                                                                  ^^^^^^^^^^ can't be dereferenced

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:289:32
    |
289 |             refund_payment_id: *refund_payment_id.value(),
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^ can't be dereferenced

error[E0277]: `?` couldn't convert the error to `AppError`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:492:27
    |
492 |         command.validate()?;
    |                 ----------^ the trait `From<Vec<std::string::String>>` is not implemented for `AppError`
    |                 |
    |                 this can't be annotated with `?` because it has type `Result<_, Vec<std::string::String>>`
    |
note: `AppError` needs to implement `From<Vec<std::string::String>>`
   --> services/api-gateway/src/shared/domain/errors/mod.rs:4:1
    |
4   | pub enum AppError {
    | ^^^^^^^^^^^^^^^^^
    = note: the question mark operation (`?`) implicitly performs a conversion on the error value using the `From` trait
    = help: the following other types implement trait `From<T>`:
              `AppError` implements `From<Box<dyn StdError + std::marker::Send + Sync>>`
              `AppError` implements `From<ParseIntError>`
              `AppError` implements `From<serde_json::Error>`
              `AppError` implements `From<song_repository::RepositoryError>`
              `AppError` implements `From<sqlx::Error>`
              `AppError` implements `From<std::io::Error>`
              `AppError` implements `From<std::num::ParseFloatError>`
              `AppError` implements `From<std::string::String>`
              `AppError` implements `From<uuid::Error>`

error[E0616]: field `created_at` of struct `payment::domain::entities::RoyaltyDistribution` is private
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/command_handlers.rs:546:63
    |
546 |             created_at: distribution_aggregate.distribution().created_at,
    |                                                               ^^^^^^^^^^ private field

error[E0277]: `?` couldn't convert the error to `AppError`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:102:25
    |
102 |         query.validate()?;
    |               ----------^ the trait `From<Vec<std::string::String>>` is not implemented for `AppError`
    |               |
    |               this can't be annotated with `?` because it has type `Result<_, Vec<std::string::String>>`
    |
note: `AppError` needs to implement `From<Vec<std::string::String>>`
   --> services/api-gateway/src/shared/domain/errors/mod.rs:4:1
    |
4   | pub enum AppError {
    | ^^^^^^^^^^^^^^^^^
    = note: the question mark operation (`?`) implicitly performs a conversion on the error value using the `From` trait
    = help: the following other types implement trait `From<T>`:
              `AppError` implements `From<Box<dyn StdError + std::marker::Send + Sync>>`
              `AppError` implements `From<ParseIntError>`
              `AppError` implements `From<serde_json::Error>`
              `AppError` implements `From<song_repository::RepositoryError>`
              `AppError` implements `From<sqlx::Error>`
              `AppError` implements `From<std::io::Error>`
              `AppError` implements `From<std::num::ParseFloatError>`
              `AppError` implements `From<std::string::String>`
              `AppError` implements `From<uuid::Error>`

error[E0560]: struct `payment::domain::value_objects::PaymentFilter` has no field named `role`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:107:13
    |
107 |             role: query.role,
    |             ^^^^ `payment::domain::value_objects::PaymentFilter` does not have this field
    |
    = note: all struct fields are already assigned

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:108:21
    |
108 |             status: query.status,
    |                     ^^^^^^^^^^^^ expected `Option<PaymentStatus>`, found `Option<String>`
    |
    = note: expected enum `std::option::Option<payment::domain::value_objects::PaymentStatus>`
               found enum `std::option::Option<std::string::String>`

error[E0560]: struct `payment::domain::value_objects::PaymentFilter` has no field named `purpose_type`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:109:13
    |
109 |             purpose_type: query.purpose_type,
    |             ^^^^^^^^^^^^ `payment::domain::value_objects::PaymentFilter` does not have this field
    |
    = note: all struct fields are already assigned

error[E0560]: struct `payment::domain::value_objects::PaymentFilter` has no field named `start_date`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:110:13
    |
110 |             start_date: query.start_date,
    |             ^^^^^^^^^^ `payment::domain::value_objects::PaymentFilter` does not have this field
    |
    = note: all struct fields are already assigned

error[E0560]: struct `payment::domain::value_objects::PaymentFilter` has no field named `end_date`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:111:13
    |
111 |             end_date: query.end_date,
    |             ^^^^^^^^ `payment::domain::value_objects::PaymentFilter` does not have this field
    |
    = note: all struct fields are already assigned

error[E0599]: no method named `get_user_payment_summary` found for struct `Arc<(dyn payment::domain::repository::PaymentAnalyticsRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:130:14
    |
129 |           let summary = self.payment_analytics_repository
    |  _______________________-
130 | |             .get_user_payment_summary(query.user_id, query.start_date, query.end_date)
    | |             -^^^^^^^^^^^^^^^^^^^^^^^^ method not found in `Arc<dyn PaymentAnalyticsRepository>`
    | |_____________|
    |

error[E0061]: this method takes 2 arguments but 4 arguments were supplied
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:150:14
    |
150 |             .get_payment_statistics(
    |              ^^^^^^^^^^^^^^^^^^^^^^
...
153 |                 query.currency,
    |                 -------------- unexpected argument #3 of type `std::option::Option<payment::domain::value_objects::Currency>`
154 |                 query.purpose_type,
    |                 ------------------ unexpected argument #4 of type `std::option::Option<std::string::String>`
    |
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:160:14
    |
160 |     async fn get_payment_statistics(&self, start: DateTime<Utc>, end: DateTime<Utc>) -> PaymentRepositoryResult<PaymentStatistics>;
    |              ^^^^^^^^^^^^^^^^^^^^^^
help: remove the extra arguments
    |
152 -                 query.end_date,
153 -                 query.currency,
152 +                 query.end_date,
    |

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:164:21
    |
161 |                 .get_payment_trends(
    |                  ------------------ arguments to this method are incorrect
...
164 |                     &group_by,
    |                     ^^^^^^^^^ expected `TrendGranularity`, found `&String`
    |
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:181:14
    |
181 |     async fn get_payment_trends(&self, start: DateTime<Utc>, end: DateTime<Utc>, granularity: TrendGranularity) -> PaymentRepositoryResul...
    |              ^^^^^^^^^^^^^^^^^^                                                  -----------

error[E0599]: no method named `get_payment_breakdown` found for struct `Arc<(dyn payment::domain::repository::PaymentAnalyticsRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:173:14
    |
172 |           let breakdown = self.payment_analytics_repository
    |  _________________________-
173 | |             .get_payment_breakdown(query.start_date, query.end_date)
    | |_____________-^^^^^^^^^^^^^^^^^^^^^
    |
help: there is a method `get_payment_trends` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:181:5
    |
181 |     async fn get_payment_trends(&self, start: DateTime<Utc>, end: DateTime<Utc>, granularity: TrendGranularity) -> PaymentRepositoryResult<Vec<PaymentTrend>>;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0609]: no field `total_fees` on type `payment::domain::repository::PaymentStatistics`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:183:31
    |
183 |             total_fees: stats.total_fees,
    |                               ^^^^^^^^^^ unknown field
    |
    = note: available fields are: `total_payments`, `successful_payments`, `failed_payments`, `cancelled_payments`, `pending_payments` ... and 6 others

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:186:29
    |
186 |             payment_trends: trends,
    |                             ^^^^^^ expected `Option<Vec<PaymentTrendData>>`, found `Option<Vec<PaymentTrend>>`
    |
    = note: expected enum `std::option::Option<Vec<payment::application::queries::PaymentTrendData>>`
               found enum `std::option::Option<Vec<PaymentTrend>>`

error[E0599]: no method named `get_payment_overview` found for struct `Arc<(dyn payment::domain::repository::PaymentAnalyticsRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:197:14
    |
196 |           let overview = self.payment_analytics_repository
    |  ________________________-
197 | |             .get_payment_overview(query.start_date, query.end_date)
    | |_____________-^^^^^^^^^^^^^^^^^^^^
    |
help: there is a method `get_payment_trends` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:181:5
    |
181 |     async fn get_payment_trends(&self, start: DateTime<Utc>, end: DateTime<Utc>, granularity: TrendGranularity) -> PaymentRepositoryResult<Vec<PaymentTrend>>;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:203:71
    |
203 |                 .get_payment_trends(query.start_date, query.end_date, "day")
    |                  ------------------                                   ^^^^^ expected `TrendGranularity`, found `&str`
    |                  |
    |                  arguments to this method are incorrect
    |
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:181:14
    |
181 |     async fn get_payment_trends(&self, start: DateTime<Utc>, end: DateTime<Utc>, granularity: TrendGranularity) -> PaymentRepositoryResul...
    |              ^^^^^^^^^^^^^^^^^^                                                  -----------

error[E0599]: no method named `get_revenue_breakdown` found for struct `Arc<(dyn payment::domain::repository::PaymentAnalyticsRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:233:14
    |
232 |           let revenue_breakdown = self.payment_analytics_repository
    |  _________________________________-
233 | |             .get_revenue_breakdown(query.start_date, query.end_date)
    | |             -^^^^^^^^^^^^^^^^^^^^^ method not found in `Arc<dyn PaymentAnalyticsRepository>`
    | |_____________|
    |

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:240:13
    |
240 |             trends,
    |             ^^^^^^ expected `Option<Vec<PaymentTrendData>>`, found `Option<Vec<PaymentTrend>>`
    |
    = note: expected enum `std::option::Option<Vec<payment::application::queries::PaymentTrendData>>`
               found enum `std::option::Option<Vec<PaymentTrend>>`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:241:13
    |
241 |             top_payers,
    |             ^^^^^^^^^^ expected `Option<Vec<TopUserData>>`, found `Option<Vec<UserPaymentSummary>>`
    |
    = note: expected enum `std::option::Option<Vec<TopUserData>>`
               found enum `std::option::Option<Vec<UserPaymentSummary>>`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:242:13
    |
242 |             top_payees,
    |             ^^^^^^^^^^ expected `Option<Vec<TopUserData>>`, found `Option<Vec<UserPaymentSummary>>`
    |
    = note: expected enum `std::option::Option<Vec<TopUserData>>`
               found enum `std::option::Option<Vec<UserPaymentSummary>>`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:243:13
    |
243 |             fraud_metrics,
    |             ^^^^^^^^^^^^^ expected `Option<FraudMetricsData>`, found `Option<FraudMetrics>`
    |
    = note: expected enum `std::option::Option<FraudMetricsData>`
               found enum `std::option::Option<payment::domain::repository::FraudMetrics>`

error[E0599]: no method named `get_detailed_user_payment_summary` found for struct `Arc<(dyn payment::domain::repository::PaymentAnalyticsRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:251:14
    |
250 |           let summary = self.payment_analytics_repository
    |  _______________________-
251 | |             .get_detailed_user_payment_summary(
    | |             -^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ method not found in `Arc<dyn PaymentAnalyticsRepository>`
    | |_____________|
    |

error[E0599]: no method named `get_user_payment_method_usage` found for struct `Arc<(dyn payment::domain::repository::PaymentAnalyticsRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:260:14
    |
259 |           let payment_methods = self.payment_analytics_repository
    |  _______________________________-
260 | |             .get_user_payment_method_usage(query.user_id, query.start_date, query.end_date)
    | |             -^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ method not found in `Arc<dyn PaymentAnalyticsRepository>`
    | |_____________|
    |

error[E0599]: no method named `get_user_recent_activity` found for struct `Arc<(dyn payment::domain::repository::PaymentAnalyticsRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:265:14
    |
264 |           let recent_activity = self.payment_analytics_repository
    |  _______________________________-
265 | |             .get_user_recent_activity(query.user_id, 10)
    | |             -^^^^^^^^^^^^^^^^^^^^^^^^ method not found in `Arc<dyn PaymentAnalyticsRepository>`
    | |_____________|
    |

error[E0599]: no method named `get_artist_revenue_summary` found for struct `Arc<(dyn payment::domain::repository::PaymentAnalyticsRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:283:14
    |
282 |           let summary = self.payment_analytics_repository
    |  _______________________-
283 | |             .get_artist_revenue_summary(
    | |             -^^^^^^^^^^^^^^^^^^^^^^^^^^ method not found in `Arc<dyn PaymentAnalyticsRepository>`
    | |_____________|
    |

error[E0599]: no method named `get_artist_song_revenue_breakdown` found for struct `Arc<(dyn payment::domain::repository::PaymentAnalyticsRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:293:18
    |
292 |               Some(self.payment_analytics_repository
    |  __________________-
293 | |                 .get_artist_song_revenue_breakdown(
    | |                 -^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ method not found in `Arc<dyn PaymentAnalyticsRepository>`
    | |_________________|
    |

error[E0599]: no method named `get_artist_revenue_trends` found for struct `Arc<(dyn payment::domain::repository::PaymentAnalyticsRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:305:14
    |
304 |           let revenue_trends = self.payment_analytics_repository
    |  ______________________________-
305 | |             .get_artist_revenue_trends(
    | |             -^^^^^^^^^^^^^^^^^^^^^^^^^ method not found in `Arc<dyn PaymentAnalyticsRepository>`
    | |_____________|
    |

error[E0599]: no method named `get_shareholder_portfolio` found for struct `Arc<(dyn payment::domain::repository::PaymentAnalyticsRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:328:14
    |
327 |           let portfolio = self.payment_analytics_repository
    |  _________________________-
328 | |             .get_shareholder_portfolio(query.shareholder_id, query.include_pending)
    | |             -^^^^^^^^^^^^^^^^^^^^^^^^^ method not found in `Arc<dyn PaymentAnalyticsRepository>`
    | |_____________|
    |

error[E0599]: no method named `get_shareholder_holdings` found for struct `Arc<(dyn payment::domain::repository::PaymentAnalyticsRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:333:14
    |
332 |           let holdings = self.payment_analytics_repository
    |  ________________________-
333 | |             .get_shareholder_holdings(query.shareholder_id, query.include_historical)
    | |             -^^^^^^^^^^^^^^^^^^^^^^^^ method not found in `Arc<dyn PaymentAnalyticsRepository>`
    | |_____________|
    |

error[E0599]: no method named `find_by_filter` found for struct `Arc<(dyn payment::domain::repository::RoyaltyDistributionRepository + 'static)>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:375:14
    |
374 |           let distributions = self.royalty_repository
    |  _____________________________-
375 | |             .find_by_filter(filter, offset, limit)
    | |_____________-^^^^^^^^^^^^^^
    |
    = help: items from traits can only be used if the trait is implemented and in scope
note: `payment::domain::repository::PaymentRepository` defines an item `find_by_filter`, perhaps you need to implement it
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:17:1
    |
17  | pub trait PaymentRepository: Send + Sync {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
help: there is a method `find_by_id` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:92:5
    |
92  |     async fn find_by_id(&self, id: Uuid) -> PaymentRepositoryResult<Option<RoyaltyDistributionAggregate>>;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:395:27
    |
395 |                 currency: distribution.distribution().total_revenue().currency(),
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Currency`, found `&Currency`
    |
help: consider using clone here
    |
395 |                 currency: distribution.distribution().total_revenue().currency().clone(),
    |                                                                                 ++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:399:27
    |
399 |                 currency: distribution.distribution().artist_amount().currency(),
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Currency`, found `&Currency`
    |
help: consider using clone here
    |
399 |                 currency: distribution.distribution().artist_amount().currency().clone(),
    |                                                                                 ++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:403:27
    |
403 |                 currency: distribution.distribution().platform_fee().currency(),
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Currency`, found `&Currency`
    |
help: consider using clone here
    |
403 |                 currency: distribution.distribution().platform_fee().currency().clone(),
    |                                                                                ++++++++

error[E0599]: no method named `artist_share_percentage` found for reference `&payment::domain::entities::RoyaltyDistribution` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:405:66
    |
405 |             artist_share_percentage: distribution.distribution().artist_share_percentage(),
    |                                                                  ^^^^^^^^^^^^^^^^^^^^^^^ private field, not a method

error[E0599]: no method named `platform_fee_percentage` found for reference `&payment::domain::entities::RoyaltyDistribution` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:406:66
    |
406 |             platform_fee_percentage: distribution.distribution().platform_fee_percentage(),
    |                                                                  ^^^^^^^^^^^^^^^^^^^^^^^ private field, not a method
    |
help: there is a method `platform_fee` with a similar name
    |
406 -             platform_fee_percentage: distribution.distribution().platform_fee_percentage(),
406 +             platform_fee_percentage: distribution.distribution().platform_fee(),
    |

error[E0599]: no method named `period_start` found for reference `&payment::domain::entities::RoyaltyDistribution` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:407:55
    |
407 |             period_start: distribution.distribution().period_start(),
    |                                                       ^^^^^^^^^^^^ private field, not a method

error[E0599]: no method named `period_end` found for reference `&payment::domain::entities::RoyaltyDistribution` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:408:53
    |
408 |             period_end: distribution.distribution().period_end(),
    |                                                     ^^^^^^^^^^ private field, not a method

error[E0616]: field `created_at` of struct `payment::domain::entities::RoyaltyDistribution` is private
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:410:53
    |
410 |             created_at: distribution.distribution().created_at,
    |                                                     ^^^^^^^^^^ private field

error[E0616]: field `distributed_at` of struct `payment::domain::entities::RoyaltyDistribution` is private
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:411:57
    |
411 |             distributed_at: distribution.distribution().distributed_at,
    |                                                         ^^^^^^^^^^^^^^ private field

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:412:65
    |
412 |             payment_ids: distribution.payments().iter().map(|p| *p.payment().id().value()).collect(),
    |                                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^ can't be dereferenced

error[E0560]: struct `payment::domain::value_objects::PaymentFilter` has no field named `role`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:463:13
    |
463 |             role: None,
    |             ^^^^ `payment::domain::value_objects::PaymentFilter` does not have this field
    |
    = note: all struct fields are already assigned

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:464:26
    |
464 |             status: Some("Processing".to_string()),
    |                     ---- ^^^^^^^^^^^^^^^^^^^^^^^^ expected `PaymentStatus`, found `String`
    |                     |
    |                     arguments to this enum variant are incorrect
    |
help: the type constructed contains `std::string::String` due to the type of the argument passed
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:464:21
    |
464 |             status: Some("Processing".to_string()),
    |                     ^^^^^------------------------^
    |                          |
    |                          this argument influences the type of `Some`
note: tuple variant defined here
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/option.rs:580:5
help: try wrapping the expression in `bounded_contexts::payment::domain::value_objects::PaymentStatus::Cancelled`
    |
464 |             status: Some(bounded_contexts::payment::domain::value_objects::PaymentStatus::Cancelled { reason: "Processing".to_string() }),
    |                          ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++                          +

error[E0560]: struct `payment::domain::value_objects::PaymentFilter` has no field named `purpose_type`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:465:13
    |
465 |             purpose_type: None,
    |             ^^^^^^^^^^^^ `payment::domain::value_objects::PaymentFilter` does not have this field
    |
    = note: all struct fields are already assigned

error[E0560]: struct `payment::domain::value_objects::PaymentFilter` has no field named `start_date`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:466:13
    |
466 |             start_date: None,
    |             ^^^^^^^^^^ `payment::domain::value_objects::PaymentFilter` does not have this field
    |
    = note: all struct fields are already assigned

error[E0560]: struct `payment::domain::value_objects::PaymentFilter` has no field named `end_date`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:467:13
    |
467 |             end_date: None,
    |             ^^^^^^^^ `payment::domain::value_objects::PaymentFilter` does not have this field
    |
    = note: all struct fields are already assigned

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:473:34
    |
473 |             .find_stuck_payments(query.older_than_minutes, offset, limit)
    |              ------------------- ^^^^^^^^^^^^^^^^^^^^^^^^ expected `u32`, found `Option<u32>`
    |              |
    |              arguments to this method are incorrect
    |
    = note: expected type `u32`
               found enum `std::option::Option<u32>`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:197:14
    |
197 |     async fn find_stuck_payments(&self, older_than_minutes: u32, offset: u64, limit: u64) -> PaymentRepositoryResult<Vec<PaymentAggregate>>;
    |              ^^^^^^^^^^^^^^^^^^^        ------------------
help: consider using `Option::expect` to unwrap the `std::option::Option<u32>` value, panicking if the value is an `Option::None`
    |
473 |             .find_stuck_payments(query.older_than_minutes.expect("REASON"), offset, limit)
    |                                                          +++++++++++++++++

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:479:29
    |
479 |                 payment_id: *p.payment().id().value(),
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^ can't be dereferenced

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:480:70
    |
480 |                 transaction_id: p.payment().transaction_id().map(|t| *t.value()),
    |                                                                      ^^^^^^^^^^ can't be dereferenced

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:485:31
    |
485 |                     currency: p.payment().amount().currency(),
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Currency`, found `&Currency`
    |
help: consider using clone here
    |
485 |                     currency: p.payment().amount().currency().clone(),
    |                                                              ++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:489:31
    |
489 |                     currency: p.payment().net_amount().currency(),
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Currency`, found `&Currency`
    |
help: consider using clone here
    |
489 |                     currency: p.payment().net_amount().currency().clone(),
    |                                                                  ++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:493:31
    |
493 |                     currency: f.currency(),
    |                               ^^^^^^^^^^^^ expected `Currency`, found `&Currency`
    |
help: consider using clone here
    |
493 |                     currency: f.currency().clone(),
    |                                           ++++++++

error[E0308]: arguments to this method are incorrect
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:528:14
    |
528 |             .get_failed_transactions_analysis(
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: expected `Option<DateTime<Utc>>`, found `DateTime<Utc>`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:529:17
    |
529 |                 query.start_date,
    |                 ^^^^^^^^^^^^^^^^
    = note: expected enum `std::option::Option<chrono::DateTime<_>>`
             found struct `chrono::DateTime<_>`
note: expected `Option<DateTime<Utc>>`, found `DateTime<Utc>`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:530:17
    |
530 |                 query.end_date,
    |                 ^^^^^^^^^^^^^^
    = note: expected enum `std::option::Option<chrono::DateTime<_>>`
             found struct `chrono::DateTime<_>`
note: expected `Option<bool>`, found `bool`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:531:17
    |
531 |                 query.group_by_error_code,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^
    = note: expected enum `std::option::Option<bool>`
               found type `bool`
note: expected `Option<bool>`, found `bool`
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:532:17
    |
532 |                 query.group_by_payment_method,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = note: expected enum `std::option::Option<bool>`
               found type `bool`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:200:14
    |
200 |     async fn get_failed_transactions_analysis(
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
201 |         &self, 
202 |         start: Option<DateTime<Utc>>, 
    |         -----
203 |         end: Option<DateTime<Utc>>,
    |         ---
204 |         group_by_error: Option<bool>,
    |         --------------
205 |         group_by_method: Option<bool>
    |         ---------------
help: try wrapping the expression in `Some`
    |
529 |                 Some(query.start_date),
    |                 +++++                +
help: try wrapping the expression in `Some`
    |
530 |                 Some(query.end_date),
    |                 +++++              +
help: try wrapping the expression in `Some`
    |
531 |                 Some(query.group_by_error_code),
    |                 +++++                         +
help: try wrapping the expression in `Some`
    |
532 |                 Some(query.group_by_payment_method),
    |                 +++++                             +

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:569:25
    |
569 |             payment_id: *payment.id().value(),
    |                         ^^^^^^^^^^^^^^^^^^^^^ can't be dereferenced

error[E0614]: type `Uuid` cannot be dereferenced
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:570:62
    |
570 |             transaction_id: payment.transaction_id().map(|t| *t.value()),
    |                                                              ^^^^^^^^^^ can't be dereferenced

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:575:27
    |
575 |                 currency: payment.amount().currency(),
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Currency`, found `&Currency`
    |
help: consider using clone here
    |
575 |                 currency: payment.amount().currency().clone(),
    |                                                      ++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:579:27
    |
579 |                 currency: payment.net_amount().currency(),
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Currency`, found `&Currency`
    |
help: consider using clone here
    |
579 |                 currency: payment.net_amount().currency().clone(),
    |                                                          ++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/application/handlers/query_handlers.rs:583:27
    |
583 |                 currency: f.currency(),
    |                           ^^^^^^^^^^^^ expected `Currency`, found `&Currency`
    |
help: consider using clone here
    |
583 |                 currency: f.currency().clone(),
    |                                       ++++++++

error[E0560]: struct `payment::domain::services::PaymentProcessingResult` has no field named `error_message`
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:513:13
    |
513 |             error_message: None,
    |             ^^^^^^^^^^^^^ `payment::domain::services::PaymentProcessingResult` does not have this field
    |
    = note: available fields are: `gateway_response`, `processing_time_ms`, `fees_charged`

error[E0560]: struct `FraudAnalysisResult` has no field named `risk_score`
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:532:13
    |
532 |             risk_score: 0.1,
    |             ^^^^^^^^^^ `FraudAnalysisResult` does not have this field
    |
    = note: available fields are: `overall_risk_score`, `individual_scores`, `triggered_rules`, `recommendation`, `analysis_timestamp`

error[E0560]: struct `FraudAnalysisResult` has no field named `fraud_indicators`
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:533:13
    |
533 |             fraud_indicators: vec![],
    |             ^^^^^^^^^^^^^^^^ `FraudAnalysisResult` does not have this field
    |
    = note: available fields are: `overall_risk_score`, `individual_scores`, `triggered_rules`, `recommendation`, `analysis_timestamp`

error[E0560]: struct `FraudAnalysisResult` has no field named `action_required`
   --> services/api-gateway/src/bounded_contexts/payment/application/services.rs:534:13
    |
534 |             action_required: FraudAction::Allow,
    |             ^^^^^^^^^^^^^^^ `FraudAnalysisResult` does not have this field
    |
    = note: available fields are: `overall_risk_score`, `individual_scores`, `triggered_rules`, `recommendation`, `analysis_timestamp`

error[E0599]: no variant or associated item named `EUR` found for enum `payment::domain::value_objects::Currency` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/application/dto.rs:41:23
    |
41  |             Currency::EUR => format!("{:.2}", value),
    |                       ^^^ variant or associated item not found in `Currency`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:109:1
    |
109 | pub enum Currency {
    | ----------------- variant or associated item `EUR` not found for this enum

error[E0599]: the method `to_string` exists for reference `&Currency`, but its trait bounds were not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:52:51
    |
52  |             payment.payment().amount().currency().to_string(),
    |                                                   ^^^^^^^^^ method cannot be called on `&Currency` due to unsatisfied trait bounds
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:109:1
    |
109 | pub enum Currency {
    | ----------------- doesn't satisfy `_: Display` or `payment::domain::value_objects::Currency: ToString`
    |
    = note: the following trait bounds were not satisfied:
            `payment::domain::value_objects::Currency: std::fmt::Display`
            which is required by `payment::domain::value_objects::Currency: ToString`
            `&payment::domain::value_objects::Currency: std::fmt::Display`
            which is required by `&payment::domain::value_objects::Currency: ToString`
note: the trait `std::fmt::Display` must be implemented
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/fmt/mod.rs:1019:1
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following trait defines an item `to_string`, perhaps you need to implement it:
            candidate #1: `ToString`

error[E0599]: the method `to_string` exists for reference `&Currency`, but its trait bounds were not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:54:55
    |
54  |             payment.payment().net_amount().currency().to_string(),
    |                                                       ^^^^^^^^^ method cannot be called on `&Currency` due to unsatisfied trait bounds
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:109:1
    |
109 | pub enum Currency {
    | ----------------- doesn't satisfy `_: Display` or `payment::domain::value_objects::Currency: ToString`
    |
    = note: the following trait bounds were not satisfied:
            `payment::domain::value_objects::Currency: std::fmt::Display`
            which is required by `payment::domain::value_objects::Currency: ToString`
            `&payment::domain::value_objects::Currency: std::fmt::Display`
            which is required by `&payment::domain::value_objects::Currency: ToString`
note: the trait `std::fmt::Display` must be implemented
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/fmt/mod.rs:1019:1
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following trait defines an item `to_string`, perhaps you need to implement it:
            candidate #1: `ToString`

error[E0599]: the method `to_string` exists for reference `&Currency`, but its trait bounds were not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:56:67
    |
56  |             payment.payment().platform_fee().map(|f| f.currency().to_string()),
    |                                                                   ^^^^^^^^^ method cannot be called on `&Currency` due to unsatisfied trait bounds
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:109:1
    |
109 | pub enum Currency {
    | ----------------- doesn't satisfy `_: Display` or `payment::domain::value_objects::Currency: ToString`
    |
    = note: the following trait bounds were not satisfied:
            `payment::domain::value_objects::Currency: std::fmt::Display`
            which is required by `payment::domain::value_objects::Currency: ToString`
            `&payment::domain::value_objects::Currency: std::fmt::Display`
            which is required by `&payment::domain::value_objects::Currency: ToString`
note: the trait `std::fmt::Display` must be implemented
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/fmt/mod.rs:1019:1
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following trait defines an item `to_string`, perhaps you need to implement it:
            candidate #1: `ToString`

error[E0308]: mismatched types
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:51:13
   |
51 |             payment.payment().amount().value(),
   |             ^^^^^^^
   |             |
   |             expected `BigDecimal`, found `f64`
   |             expected due to the type of this binding

error[E0308]: mismatched types
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:53:13
   |
53 |             payment.payment().net_amount().value(),
   |             ^^^^^^^
   |             |
   |             expected `BigDecimal`, found `f64`
   |             expected due to the type of this binding

error[E0308]: mismatched types
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:55:13
   |
55 |             payment.payment().platform_fee().map(|f| f.value()),
   |             ^^^^^^^
   |             |
   |             expected `Option<BigDecimal>`, found `Option<f64>`
   |             expected due to the type of this binding
   |
   = note: expected enum `std::option::Option<BigDecimal>`
              found enum `std::option::Option<f64>`

error[E0631]: type mismatch in function arguments
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:89:18
   |
89 |         .map_err(AppError::DatabaseError)?;
   |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
   |          |
   |          required by a bound introduced by this call
   |
  ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
   |
9  |     DatabaseError(String),
   |     ------------- found signature defined here
   |
   = note: expected function signature `fn(sqlx::Error) -> _`
              found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
  --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
   |
89 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
   |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0599]: no method named `id` found for reference `&Box<dyn shared::domain::events::DomainEvent>` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:96:23
   |
96 |                 event.id(),
   |                       ^^ method not found in `&Box<dyn DomainEvent>`
   |
   = help: items from traits can only be used if the trait is implemented and in scope
   = note: the following trait defines an item `id`, perhaps you need to implement it:
           candidate #1: `tracing_subscriber::registry::SpanData`

error[E0599]: no method named `payment_id` found for reference `&Box<dyn shared::domain::events::DomainEvent>` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:97:23
   |
97 |                 event.payment_id().value(), // Mapping payment_id to aggregate_id
   |                       ^^^^^^^^^^ method not found in `&Box<dyn DomainEvent>`

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:106:22
    |
106 |             .map_err(AppError::DatabaseError)?;
    |              ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |              |
    |              required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
106 |             .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                      +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:109:35
    |
109 |         tx.commit().await.map_err(AppError::DatabaseError)?;
    |                           ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |                           |
    |                           required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
109 |         tx.commit().await.map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                                   +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:120:18
    |
120 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
120 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:124:51
    |
124 |                 let payment = self.row_to_payment(&row)?;
    |                                    -------------- ^^^^ expected `&PgRow`, found `&Record`
    |                                    |
    |                                    arguments to this method are incorrect
    |
    = note: expected reference `&PgRow`
               found reference `&<payment_repository::PostgreSQLPaymentRepository as payment::domain::repository::PaymentRepository>::find_by_id::{closure#0}::Record`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:480:8
    |
480 |     fn row_to_payment(&self, row: &sqlx::postgres::PgRow) -> Result<Payment, AppError> {
    |        ^^^^^^^^^^^^^^        ---------------------------

error[E0599]: no function or associated item named `from_payment` found for struct `payment::domain::aggregates::PaymentAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:127:55
    |
127 |                 let mut aggregate = PaymentAggregate::from_payment(payment);
    |                                                       ^^^^^^^^^^^^ function or associated item not found in `PaymentAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:17:1
    |
17  | pub struct PaymentAggregate {
    | --------------------------- function or associated item `from_payment` not found for this struct
    |
note: if you're trying to build a new `payment::domain::aggregates::PaymentAggregate`, consider using `payment::domain::aggregates::PaymentAggregate::create_payment` which returns `Result<payment::domain::aggregates::PaymentAggregate, AppError>`
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:26:5
    |
26  | /     pub fn create_payment(
27  | |         payer_id: Uuid,
28  | |         payee_id: Uuid,
29  | |         amount: Amount,
...   |
33  | |         metadata: PaymentMetadata,
34  | |     ) -> Result<Self, AppError> {
    | |_______________________________^
help: there is a method `payment` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:266:5
    |
266 |     pub fn payment(&self) -> &Payment { &self.payment }
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:166:18
    |
166 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
166 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:170:51
    |
170 |                 let payment = self.row_to_payment(&row)?;
    |                                    -------------- ^^^^ expected `&PgRow`, found `&Record`
    |                                    |
    |                                    arguments to this method are incorrect
    |
    = note: expected reference `&PgRow`
               found reference `&<payment_repository::PostgreSQLPaymentRepository as payment::domain::repository::PaymentRepository>::find_by_idempotency_key::{closure#0}::Record`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:480:8
    |
480 |     fn row_to_payment(&self, row: &sqlx::postgres::PgRow) -> Result<Payment, AppError> {
    |        ^^^^^^^^^^^^^^        ---------------------------

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:207:18
    |
207 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
207 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:211:47
    |
211 |             let payment = self.row_to_payment(&row)?;
    |                                -------------- ^^^^ expected `&PgRow`, found `&Record`
    |                                |
    |                                arguments to this method are incorrect
    |
    = note: expected reference `&PgRow`
               found reference `&<payment_repository::PostgreSQLPaymentRepository as payment::domain::repository::PaymentRepository>::find_by_filter::{closure#0}::Record`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:480:8
    |
480 |     fn row_to_payment(&self, row: &sqlx::postgres::PgRow) -> Result<Payment, AppError> {
    |        ^^^^^^^^^^^^^^        ---------------------------

error[E0599]: no function or associated item named `from_payment` found for struct `payment::domain::aggregates::PaymentAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:212:47
    |
212 |             let aggregate = PaymentAggregate::from_payment(payment);
    |                                               ^^^^^^^^^^^^ function or associated item not found in `PaymentAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:17:1
    |
17  | pub struct PaymentAggregate {
    | --------------------------- function or associated item `from_payment` not found for this struct
    |
note: if you're trying to build a new `payment::domain::aggregates::PaymentAggregate`, consider using `payment::domain::aggregates::PaymentAggregate::create_payment` which returns `Result<payment::domain::aggregates::PaymentAggregate, AppError>`
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:26:5
    |
26  | /     pub fn create_payment(
27  | |         payer_id: Uuid,
28  | |         payee_id: Uuid,
29  | |         amount: Amount,
...   |
33  | |         metadata: PaymentMetadata,
34  | |     ) -> Result<Self, AppError> {
    | |_______________________________^
help: there is a method `payment` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:266:5
    |
266 |     pub fn payment(&self) -> &Payment { &self.payment }
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:225:18
    |
225 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
225 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:241:18
    |
241 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
241 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:245:55
    |
245 |                 let batch = self.row_to_payment_batch(&row)?;
    |                                  -------------------- ^^^^ expected `&PgRow`, found `&Record`
    |                                  |
    |                                  arguments to this method are incorrect
    |
    = note: expected reference `&PgRow`
               found reference `&<payment_repository::PostgreSQLPaymentRepository as payment::domain::repository::PaymentRepository>::find_batch_by_id::{closure#0}::Record`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:575:8
    |
575 |     fn row_to_payment_batch(&self, row: &sqlx::postgres::PgRow) -> Result<PaymentBatch, AppError> {
    |        ^^^^^^^^^^^^^^^^^^^^        ---------------------------

error[E0599]: the method `to_string` exists for reference `&Currency`, but its trait bounds were not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:267:45
    |
267 |             batch.total_amount().currency().to_string(),
    |                                             ^^^^^^^^^ method cannot be called on `&Currency` due to unsatisfied trait bounds
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:109:1
    |
109 | pub enum Currency {
    | ----------------- doesn't satisfy `_: Display` or `payment::domain::value_objects::Currency: ToString`
    |
    = note: the following trait bounds were not satisfied:
            `payment::domain::value_objects::Currency: std::fmt::Display`
            which is required by `payment::domain::value_objects::Currency: ToString`
            `&payment::domain::value_objects::Currency: std::fmt::Display`
            which is required by `&payment::domain::value_objects::Currency: ToString`
note: the trait `std::fmt::Display` must be implemented
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/fmt/mod.rs:1019:1
    = help: items from traits can only be used if the trait is implemented and in scope
    = note: the following trait defines an item `to_string`, perhaps you need to implement it:
            candidate #1: `ToString`

error[E0599]: no method named `successful_payments` found for reference `&'life1 payment::domain::entities::PaymentBatch` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:269:19
    |
269 |             batch.successful_payments() as i32,
    |                   ^^^^^^^^^^^^^^^^^^^ method not found in `&PaymentBatch`

error[E0599]: no method named `failed_payments` found for reference `&'life1 payment::domain::entities::PaymentBatch` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:270:19
    |
270 |             batch.failed_payments() as i32,
    |                   ^^^^^^^^^^^^^^^
    |
help: there is a method `payments` with a similar name
    |
270 -             batch.failed_payments() as i32,
270 +             batch.payments() as i32,
    |

error[E0599]: no method named `created_at` found for reference `&'life1 payment::domain::entities::PaymentBatch` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:272:19
    |
272 |             batch.created_at(),
    |                   ^^^^^^^^^^ private field, not a method

error[E0599]: no method named `completed_at` found for reference `&'life1 payment::domain::entities::PaymentBatch` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:273:19
    |
273 |             batch.completed_at(),
    |                   ^^^^^^^^^^^^ private field, not a method
    |
help: there is a method `complete` with a similar name
    |
273 -             batch.completed_at(),
273 +             batch.complete(),
    |

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:265:13
    |
265 |             batch.batch_type(),
    |             ^^^^^
    |             |
    |             expected `&str`, found `&BatchType`
    |             expected due to the type of this binding
    |
    = note: expected reference `&str`
               found reference `&payment::domain::entities::BatchType`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:266:13
    |
266 |             batch.total_amount().value(),
    |             ^^^^^
    |             |
    |             expected `BigDecimal`, found `f64`
    |             expected due to the type of this binding

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:271:13
    |
271 |             batch.status(),
    |             ^^^^^
    |             |
    |             expected `&str`, found `&BatchStatus`
    |             expected due to the type of this binding
    |
    = note: expected reference `&str`
               found reference `&payment::domain::entities::BatchStatus`

error[E0277]: the trait bound `payment::domain::entities::BatchType: Encode<'_, Postgres>` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:253:9
    |
253 | /         sqlx::query!(
254 | |             "INSERT INTO payment_batches (
255 | |                 id, batch_type, total_amount_value, total_amount_currency, payment_count, 
256 | |                 successful_payments, failed_payments, status, created_at, 
...   |
274 | |             0i64 // Placeholder for processing_duration_ms
275 | |         )
    | |_________^ the trait `Encode<'_, Postgres>` is not implemented for `payment::domain::entities::BatchType`
    |
    = help: the following other types implement trait `Encode<'q, DB>`:
              `&'a str` implements `Encode<'a, sqlx::Any>`
              `&'q [u8]` implements `Encode<'q, sqlx::Any>`
              `&T` implements `Encode<'q, DB>`
              `&[T]` implements `Encode<'q, Postgres>`
              `&[u8]` implements `Encode<'_, Postgres>`
              `&str` implements `Encode<'_, Postgres>`
              `BigDecimal` implements `Encode<'_, Postgres>`
              `Box<[u8]>` implements `Encode<'_, Postgres>`
            and 42 others
    = note: required for `&payment::domain::entities::BatchType` to implement `Encode<'_, Postgres>`
    = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `payment::domain::entities::BatchStatus: Encode<'_, Postgres>` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:253:9
    |
253 | /         sqlx::query!(
254 | |             "INSERT INTO payment_batches (
255 | |                 id, batch_type, total_amount_value, total_amount_currency, payment_count, 
256 | |                 successful_payments, failed_payments, status, created_at, 
...   |
274 | |             0i64 // Placeholder for processing_duration_ms
275 | |         )
    | |_________^ the trait `Encode<'_, Postgres>` is not implemented for `payment::domain::entities::BatchStatus`
    |
    = help: the following other types implement trait `Encode<'q, DB>`:
              `&'a str` implements `Encode<'a, sqlx::Any>`
              `&'q [u8]` implements `Encode<'q, sqlx::Any>`
              `&T` implements `Encode<'q, DB>`
              `&[T]` implements `Encode<'q, Postgres>`
              `&[u8]` implements `Encode<'_, Postgres>`
              `&str` implements `Encode<'_, Postgres>`
              `BigDecimal` implements `Encode<'_, Postgres>`
              `Box<[u8]>` implements `Encode<'_, Postgres>`
            and 42 others
    = note: required for `&payment::domain::entities::BatchStatus` to implement `Encode<'_, Postgres>`
    = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `payment::domain::entities::BatchType: sqlx::Type<Postgres>` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:253:9
    |
253 | /         sqlx::query!(
254 | |             "INSERT INTO payment_batches (
255 | |                 id, batch_type, total_amount_value, total_amount_currency, payment_count, 
256 | |                 successful_payments, failed_payments, status, created_at, 
...   |
274 | |             0i64 // Placeholder for processing_duration_ms
275 | |         )
    | |_________^ the trait `sqlx::Type<Postgres>` is not implemented for `payment::domain::entities::BatchType`
    |
    = help: the following other types implement trait `sqlx::Type<DB>`:
              `&T` implements `sqlx::Type<DB>`
              `()` implements `sqlx::Type<Postgres>`
              `(T1, T2)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4, T5)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4, T5, T6)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4, T5, T6, T7)` implements `sqlx::Type<Postgres>`
            and 53 others
    = note: required for `&payment::domain::entities::BatchType` to implement `sqlx::Type<Postgres>`
    = note: 1 redundant requirement hidden
    = note: required for `&&payment::domain::entities::BatchType` to implement `sqlx::Type<Postgres>`
note: required by a bound in `sqlx::Arguments::add`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/arguments.rs:19:53
    |
17  |     fn add<T>(&mut self, value: T)
    |        --- required by a bound in this associated function
18  |     where
19  |         T: 'q + Send + Encode<'q, Self::Database> + Type<Self::Database>;
    |                                                     ^^^^^^^^^^^^^^^^^^^^ required by this bound in `Arguments::add`
    = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query` (in Nightly builds, run with -Z macro-backtrace for more info)
help: use a unary tuple instead
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-0.7.4/src/macros/mod.rs:332:9
    |
332 |         ($crate::sqlx_macros::expand_query!(source = $query, args = [$($args)*]),)
    |         +                                                                       ++

error[E0277]: the trait bound `payment::domain::entities::BatchStatus: sqlx::Type<Postgres>` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:253:9
    |
253 | /         sqlx::query!(
254 | |             "INSERT INTO payment_batches (
255 | |                 id, batch_type, total_amount_value, total_amount_currency, payment_count, 
256 | |                 successful_payments, failed_payments, status, created_at, 
...   |
274 | |             0i64 // Placeholder for processing_duration_ms
275 | |         )
    | |_________^ the trait `sqlx::Type<Postgres>` is not implemented for `payment::domain::entities::BatchStatus`
    |
    = help: the following other types implement trait `sqlx::Type<DB>`:
              `&T` implements `sqlx::Type<DB>`
              `()` implements `sqlx::Type<Postgres>`
              `(T1, T2)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4, T5)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4, T5, T6)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4, T5, T6, T7)` implements `sqlx::Type<Postgres>`
            and 53 others
    = note: required for `&payment::domain::entities::BatchStatus` to implement `sqlx::Type<Postgres>`
    = note: 1 redundant requirement hidden
    = note: required for `&&payment::domain::entities::BatchStatus` to implement `sqlx::Type<Postgres>`
note: required by a bound in `sqlx::Arguments::add`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/arguments.rs:19:53
    |
17  |     fn add<T>(&mut self, value: T)
    |        --- required by a bound in this associated function
18  |     where
19  |         T: 'q + Send + Encode<'q, Self::Database> + Type<Self::Database>;
    |                                                     ^^^^^^^^^^^^^^^^^^^^ required by this bound in `Arguments::add`
    = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query` (in Nightly builds, run with -Z macro-backtrace for more info)
help: use a unary tuple instead
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-0.7.4/src/macros/mod.rs:332:9
    |
332 |         ($crate::sqlx_macros::expand_query!(source = $query, args = [$($args)*]),)
    |         +                                                                       ++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:278:18
    |
278 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
278 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0609]: no field `page` on type `&'life1 payment::domain::repository::Pagination`
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:286:33
    |
286 |         let offset = pagination.page * pagination.limit;
    |                                 ^^^^ unknown field
    |
    = note: available fields are: `offset`, `limit`

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:297:18
    |
297 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
297 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:301:47
    |
301 |             let payment = self.row_to_payment(&row)?;
    |                                -------------- ^^^^ expected `&PgRow`, found `&Record`
    |                                |
    |                                arguments to this method are incorrect
    |
    = note: expected reference `&PgRow`
               found reference `&<payment_repository::PostgreSQLPaymentRepository as payment::domain::repository::PaymentRepository>::find_by_payer_id::{closure#0}::Record`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:480:8
    |
480 |     fn row_to_payment(&self, row: &sqlx::postgres::PgRow) -> Result<Payment, AppError> {
    |        ^^^^^^^^^^^^^^        ---------------------------

error[E0599]: no function or associated item named `from_payment` found for struct `payment::domain::aggregates::PaymentAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:302:47
    |
302 |             let aggregate = PaymentAggregate::from_payment(payment);
    |                                               ^^^^^^^^^^^^ function or associated item not found in `PaymentAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:17:1
    |
17  | pub struct PaymentAggregate {
    | --------------------------- function or associated item `from_payment` not found for this struct
    |
note: if you're trying to build a new `payment::domain::aggregates::PaymentAggregate`, consider using `payment::domain::aggregates::PaymentAggregate::create_payment` which returns `Result<payment::domain::aggregates::PaymentAggregate, AppError>`
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:26:5
    |
26  | /     pub fn create_payment(
27  | |         payer_id: Uuid,
28  | |         payee_id: Uuid,
29  | |         amount: Amount,
...   |
33  | |         metadata: PaymentMetadata,
34  | |     ) -> Result<Self, AppError> {
    | |_______________________________^
help: there is a method `payment` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:266:5
    |
266 |     pub fn payment(&self) -> &Payment { &self.payment }
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0609]: no field `page` on type `&'life1 payment::domain::repository::Pagination`
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:309:33
    |
309 |         let offset = pagination.page * pagination.limit;
    |                                 ^^^^ unknown field
    |
    = note: available fields are: `offset`, `limit`

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:320:18
    |
320 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
320 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:324:47
    |
324 |             let payment = self.row_to_payment(&row)?;
    |                                -------------- ^^^^ expected `&PgRow`, found `&Record`
    |                                |
    |                                arguments to this method are incorrect
    |
    = note: expected reference `&PgRow`
               found reference `&<payment_repository::PostgreSQLPaymentRepository as payment::domain::repository::PaymentRepository>::find_by_payee_id::{closure#0}::Record`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:480:8
    |
480 |     fn row_to_payment(&self, row: &sqlx::postgres::PgRow) -> Result<Payment, AppError> {
    |        ^^^^^^^^^^^^^^        ---------------------------

error[E0599]: no function or associated item named `from_payment` found for struct `payment::domain::aggregates::PaymentAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:325:47
    |
325 |             let aggregate = PaymentAggregate::from_payment(payment);
    |                                               ^^^^^^^^^^^^ function or associated item not found in `PaymentAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:17:1
    |
17  | pub struct PaymentAggregate {
    | --------------------------- function or associated item `from_payment` not found for this struct
    |
note: if you're trying to build a new `payment::domain::aggregates::PaymentAggregate`, consider using `payment::domain::aggregates::PaymentAggregate::create_payment` which returns `Result<payment::domain::aggregates::PaymentAggregate, AppError>`
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:26:5
    |
26  | /     pub fn create_payment(
27  | |         payer_id: Uuid,
28  | |         payee_id: Uuid,
29  | |         amount: Amount,
...   |
33  | |         metadata: PaymentMetadata,
34  | |     ) -> Result<Self, AppError> {
    | |_______________________________^
help: there is a method `payment` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:266:5
    |
266 |     pub fn payment(&self) -> &Payment { &self.payment }
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0609]: no field `page` on type `&'life2 payment::domain::repository::Pagination`
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:332:33
    |
332 |         let offset = pagination.page * pagination.limit;
    |                                 ^^^^ unknown field
    |
    = note: available fields are: `offset`, `limit`

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:347:18
    |
347 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
347 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:351:47
    |
351 |             let payment = self.row_to_payment(&row)?;
    |                                -------------- ^^^^ expected `&PgRow`, found `&Record`
    |                                |
    |                                arguments to this method are incorrect
    |
    = note: expected reference `&PgRow`
               found reference `&<payment_repository::PostgreSQLPaymentRepository as payment::domain::repository::PaymentRepository>::find_by_status::{closure#0}::Record`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:480:8
    |
480 |     fn row_to_payment(&self, row: &sqlx::postgres::PgRow) -> Result<Payment, AppError> {
    |        ^^^^^^^^^^^^^^        ---------------------------

error[E0599]: no function or associated item named `from_payment` found for struct `payment::domain::aggregates::PaymentAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:352:47
    |
352 |             let aggregate = PaymentAggregate::from_payment(payment);
    |                                               ^^^^^^^^^^^^ function or associated item not found in `PaymentAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:17:1
    |
17  | pub struct PaymentAggregate {
    | --------------------------- function or associated item `from_payment` not found for this struct
    |
note: if you're trying to build a new `payment::domain::aggregates::PaymentAggregate`, consider using `payment::domain::aggregates::PaymentAggregate::create_payment` which returns `Result<payment::domain::aggregates::PaymentAggregate, AppError>`
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:26:5
    |
26  | /     pub fn create_payment(
27  | |         payer_id: Uuid,
28  | |         payee_id: Uuid,
29  | |         amount: Amount,
...   |
33  | |         metadata: PaymentMetadata,
34  | |     ) -> Result<Self, AppError> {
    | |_______________________________^
help: there is a method `payment` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:266:5
    |
266 |     pub fn payment(&self) -> &Payment { &self.payment }
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0609]: no field `page` on type `&'life1 payment::domain::repository::Pagination`
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:364:33
    |
364 |         let offset = pagination.page * pagination.limit;
    |                                 ^^^^ unknown field
    |
    = note: available fields are: `offset`, `limit`

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:373:18
    |
373 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
373 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:377:47
    |
377 |             let payment = self.row_to_payment(&row)?;
    |                                -------------- ^^^^ expected `&PgRow`, found `&Record`
    |                                |
    |                                arguments to this method are incorrect
    |
    = note: expected reference `&PgRow`
               found reference `&<payment_repository::PostgreSQLPaymentRepository as payment::domain::repository::PaymentRepository>::find_by_date_range::{closure#0}::Record`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:480:8
    |
480 |     fn row_to_payment(&self, row: &sqlx::postgres::PgRow) -> Result<Payment, AppError> {
    |        ^^^^^^^^^^^^^^        ---------------------------

error[E0599]: no function or associated item named `from_payment` found for struct `payment::domain::aggregates::PaymentAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:378:47
    |
378 |             let aggregate = PaymentAggregate::from_payment(payment);
    |                                               ^^^^^^^^^^^^ function or associated item not found in `PaymentAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:17:1
    |
17  | pub struct PaymentAggregate {
    | --------------------------- function or associated item `from_payment` not found for this struct
    |
note: if you're trying to build a new `payment::domain::aggregates::PaymentAggregate`, consider using `payment::domain::aggregates::PaymentAggregate::create_payment` which returns `Result<payment::domain::aggregates::PaymentAggregate, AppError>`
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:26:5
    |
26  | /     pub fn create_payment(
27  | |         payer_id: Uuid,
28  | |         payee_id: Uuid,
29  | |         amount: Amount,
...   |
33  | |         metadata: PaymentMetadata,
34  | |     ) -> Result<Self, AppError> {
    | |_______________________________^
help: there is a method `payment` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:266:5
    |
266 |     pub fn payment(&self) -> &Payment { &self.payment }
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:399:18
    |
399 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
399 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:403:47
    |
403 |             let payment = self.row_to_payment(&row)?;
    |                                -------------- ^^^^ expected `&PgRow`, found `&Record`
    |                                |
    |                                arguments to this method are incorrect
    |
    = note: expected reference `&PgRow`
               found reference `&<payment_repository::PostgreSQLPaymentRepository as payment::domain::repository::PaymentRepository>::find_stale_pending_payments::{closure#0}::Record`
note: method defined here
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:480:8
    |
480 |     fn row_to_payment(&self, row: &sqlx::postgres::PgRow) -> Result<Payment, AppError> {
    |        ^^^^^^^^^^^^^^        ---------------------------

error[E0599]: no function or associated item named `from_payment` found for struct `payment::domain::aggregates::PaymentAggregate` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:404:47
    |
404 |             let aggregate = PaymentAggregate::from_payment(payment);
    |                                               ^^^^^^^^^^^^ function or associated item not found in `PaymentAggregate`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:17:1
    |
17  | pub struct PaymentAggregate {
    | --------------------------- function or associated item `from_payment` not found for this struct
    |
note: if you're trying to build a new `payment::domain::aggregates::PaymentAggregate`, consider using `payment::domain::aggregates::PaymentAggregate::create_payment` which returns `Result<payment::domain::aggregates::PaymentAggregate, AppError>`
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:26:5
    |
26  | /     pub fn create_payment(
27  | |         payer_id: Uuid,
28  | |         payee_id: Uuid,
29  | |         amount: Amount,
...   |
33  | |         metadata: PaymentMetadata,
34  | |     ) -> Result<Self, AppError> {
    | |_______________________________^
help: there is a method `payment` with a similar name, but with different arguments
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:266:5
    |
266 |     pub fn payment(&self) -> &Payment { &self.payment }
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:421:18
    |
421 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
421 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:432:18
    |
432 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
432 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:445:18
    |
445 |         .map_err(AppError::DatabaseError)?;
    |          ------- ^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |          |
    |          required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:9:5
    |
9   |     DatabaseError(String),
    |     ------------- found signature defined here
    |
    = note: expected function signature `fn(sqlx::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
445 |         .map_err(|arg0: sqlx::Error| AppError::DatabaseError(/* std::string::String */))?;
    |                  +++++++++++++++++++                        +++++++++++++++++++++++++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:481:51
    |
481 |         let payment_id = PaymentId::from_uuid(row.try_get("id").map_err(AppError::DatabaseError)?);
    |                                                   ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
481 |         let payment_id = PaymentId::from_uuid(row.try_get_raw("id").map_err(AppError::DatabaseError)?);
    |                                                          ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:482:34
    |
482 |         let payer_id: Uuid = row.try_get("payer_id").map_err(AppError::DatabaseError)?;
    |                                  ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
482 |         let payer_id: Uuid = row.try_get_raw("payer_id").map_err(AppError::DatabaseError)?;
    |                                         ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:483:34
    |
483 |         let payee_id: Uuid = row.try_get("payee_id").map_err(AppError::DatabaseError)?;
    |                                  ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
483 |         let payee_id: Uuid = row.try_get_raw("payee_id").map_err(AppError::DatabaseError)?;
    |                                         ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:485:37
    |
485 |         let amount_value: f64 = row.try_get("amount_value").map_err(AppError::DatabaseError)?;
    |                                     ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
485 |         let amount_value: f64 = row.try_get_raw("amount_value").map_err(AppError::DatabaseError)?;
    |                                            ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:487:47
    |
487 |         let amount_currency_str: String = row.try_get("amount_currency").map_err(AppError::DatabaseError)?;
    |                                               ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
487 |         let amount_currency_str: String = row.try_get_raw("amount_currency").map_err(AppError::DatabaseError)?;
    |                                                      ++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:496:74
    |
496 |         let amount = Amount::new(amount_value, currency.clone()).map_err(AppError::DomainRuleViolation)?;
    |                                                                  ------- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |                                                                  |
    |                                                                  required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:19:5
    |
19  |     DomainRuleViolation(String),
    |     ------------------- found signature defined here
    |
    = note: expected function signature `fn(AppError) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
496 |         let amount = Amount::new(amount_value, currency.clone()).map_err(|arg0: AppError| AppError::DomainRuleViolation(/* std::string::String */))?;
    |                                                                          ++++++++++++++++                              +++++++++++++++++++++++++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:498:41
    |
498 |         let net_amount_value: f64 = row.try_get("net_amount_value").map_err(AppError::DatabaseError)?;
    |                                         ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
498 |         let net_amount_value: f64 = row.try_get_raw("net_amount_value").map_err(AppError::DatabaseError)?;
    |                                                ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:499:51
    |
499 |         let net_amount_currency_str: String = row.try_get("net_amount_currency").map_err(AppError::DatabaseError)?;
    |                                                   ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
499 |         let net_amount_currency_str: String = row.try_get_raw("net_amount_currency").map_err(AppError::DatabaseError)?;
    |                                                          ++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:504:78
    |
504 |         let net_amount = Amount::new(net_amount_value, net_currency).map_err(AppError::DomainRuleViolation)?;
    |                                                                      ------- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |                                                                      |
    |                                                                      required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:19:5
    |
19  |     DomainRuleViolation(String),
    |     ------------------- found signature defined here
    |
    = note: expected function signature `fn(AppError) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
504 |         let net_amount = Amount::new(net_amount_value, net_currency).map_err(|arg0: AppError| AppError::DomainRuleViolation(/* std::string::String */))?;
    |                                                                              ++++++++++++++++                              +++++++++++++++++++++++++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:507:32
    |
507 |         let platform_fee = row.try_get::<Option<f64>, _>("platform_fee_value").map_err(AppError::DatabaseError)?
    |                                ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
507 |         let platform_fee = row.try_get_raw::<Option<f64>, _>("platform_fee_value").map_err(AppError::DatabaseError)?
    |                                       ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:509:53
    |
509 |                  let fee_currency_str: String = row.try_get("platform_fee_currency").unwrap_or("USD".to_string());
    |                                                     ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
509 |                  let fee_currency_str: String = row.try_get_raw("platform_fee_currency").unwrap_or("USD".to_string());
    |                                                            ++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:512:57
    |
512 |                  Amount::new(fee, fee_currency).map_err(AppError::DomainRuleViolation)
    |                                                 ------- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |                                                 |
    |                                                 required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:19:5
    |
19  |     DomainRuleViolation(String),
    |     ------------------- found signature defined here
    |
    = note: expected function signature `fn(AppError) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
512 |                  Amount::new(fee, fee_currency).map_err(|arg0: AppError| AppError::DomainRuleViolation(/* std::string::String */))
    |                                                         ++++++++++++++++                              +++++++++++++++++++++++++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:518:17
    |
518 |             row.try_get("payment_method_details").map_err(AppError::DatabaseError)?
    |                 ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
518 |             row.try_get_raw("payment_method_details").map_err(AppError::DatabaseError)?
    |                        ++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:519:19
    |
519 |         ).map_err(AppError::SerializationError)?;
    |           ------- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |           |
    |           required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:15:5
    |
15  |     SerializationError(String),
    |     ------------------ found signature defined here
    |
    = note: expected function signature `fn(serde_json::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
519 |         ).map_err(|arg0: serde_json::Error| AppError::SerializationError(/* std::string::String */))?;
    |                   +++++++++++++++++++++++++                             +++++++++++++++++++++++++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:523:17
    |
523 |             row.try_get("purpose_details").map_err(AppError::DatabaseError)?
    |                 ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
523 |             row.try_get_raw("purpose_details").map_err(AppError::DatabaseError)?
    |                        ++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:524:19
    |
524 |         ).map_err(AppError::SerializationError)?;
    |           ------- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |           |
    |           required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:15:5
    |
15  |     SerializationError(String),
    |     ------------------ found signature defined here
    |
    = note: expected function signature `fn(serde_json::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
524 |         ).map_err(|arg0: serde_json::Error| AppError::SerializationError(/* std::string::String */))?;
    |                   +++++++++++++++++++++++++                             +++++++++++++++++++++++++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:526:38
    |
526 |         let status_str: String = row.try_get("status").map_err(AppError::DatabaseError)?;
    |                                      ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
526 |         let status_str: String = row.try_get_raw("status").map_err(AppError::DatabaseError)?;
    |                                             ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:539:35
    |
539 |         let blockchain_hash = row.try_get::<Option<String>, _>("blockchain_hash").map_err(AppError::DatabaseError)?
    |                                   ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
539 |         let blockchain_hash = row.try_get_raw::<Option<String>, _>("blockchain_hash").map_err(AppError::DatabaseError)?
    |                                          ++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:540:60
    |
540 |             .map(|hash| TransactionHash::new(hash).map_err(AppError::DomainRuleViolation))
    |                                                    ------- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |                                                    |
    |                                                    required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:19:5
    |
19  |     DomainRuleViolation(String),
    |     ------------------- found signature defined here
    |
    = note: expected function signature `fn(AppError) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
540 |             .map(|hash| TransactionHash::new(hash).map_err(|arg0: AppError| AppError::DomainRuleViolation(/* std::string::String */)))
    |                                                            ++++++++++++++++                              +++++++++++++++++++++++++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:543:45
    |
543 |         let created_at: DateTime<Utc> = row.try_get("created_at").map_err(AppError::DatabaseError)?;
    |                                             ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
543 |         let created_at: DateTime<Utc> = row.try_get_raw("created_at").map_err(AppError::DatabaseError)?;
    |                                                    ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:544:45
    |
544 |         let updated_at: DateTime<Utc> = row.try_get("updated_at").map_err(AppError::DatabaseError)?;
    |                                             ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
544 |         let updated_at: DateTime<Utc> = row.try_get_raw("updated_at").map_err(AppError::DatabaseError)?;
    |                                                    ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:545:55
    |
545 |         let completed_at: Option<DateTime<Utc>> = row.try_get("completed_at").map_err(AppError::DatabaseError)?;
    |                                                       ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
545 |         let completed_at: Option<DateTime<Utc>> = row.try_get_raw("completed_at").map_err(AppError::DatabaseError)?;
    |                                                              ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:546:50
    |
546 |         let failure_reason: Option<String> = row.try_get("failure_reason").map_err(AppError::DatabaseError)?;
    |                                                  ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
546 |         let failure_reason: Option<String> = row.try_get_raw("failure_reason").map_err(AppError::DatabaseError)?;
    |                                                         ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:548:51
    |
548 |         let metadata_val: serde_json::Value = row.try_get("metadata").map_err(AppError::DatabaseError)?;
    |                                                   ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
548 |         let metadata_val: serde_json::Value = row.try_get_raw("metadata").map_err(AppError::DatabaseError)?;
    |                                                          ++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:553:19
    |
553 |         ).map_err(AppError::SerializationError)?;
    |           ------- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |           |
    |           required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:15:5
    |
15  |     SerializationError(String),
    |     ------------------ found signature defined here
    |
    = note: expected function signature `fn(serde_json::Error) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
553 |         ).map_err(|arg0: serde_json::Error| AppError::SerializationError(/* std::string::String */))?;
    |                   +++++++++++++++++++++++++                             +++++++++++++++++++++++++++

error[E0061]: this function takes 7 arguments but 16 arguments were supplied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:555:12
    |
555 |         Ok(Payment::new(
    |            ^^^^^^^^^^^^
556 |             payment_id,
    |             ---------- expected `Uuid`, found `PaymentId`
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/entities.rs:34:12
    |
34  |     pub fn new(
    |            ^^^
35  |         payer_id: Uuid,
    |         --------------
help: remove the extra arguments
    |
556 ~             /* Uuid */,
557 |             payer_id,
558 ~             payee_id,
559 |             platform_fee,
560 |             payment_method,
561 ~             purpose,
    |

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:555:12
    |
555 |           Ok(Payment::new(
    |  _________--_^
    | |         |
    | |         arguments to this enum variant are incorrect
556 | |             payment_id,
557 | |             payer_id,
558 | |             payee_id,
...   |
571 | |             metadata,
572 | |         ))
    | |_________^ expected `Payment`, found `Result<(Payment, PaymentInitiated), ...>`
    |
    = note: expected struct `payment::domain::entities::Payment`
                 found enum `Result<(payment::domain::entities::Payment, payment::domain::events::PaymentInitiated), AppError>`
help: the type constructed contains `Result<(payment::domain::entities::Payment, payment::domain::events::PaymentInitiated), AppError>` due to the type of the argument passed
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:555:9
    |
555 |            Ok(Payment::new(
    |   _________^  -
    |  |____________|
556 | ||             payment_id,
557 | ||             payer_id,
558 | ||             payee_id,
...   ||
571 | ||             metadata,
572 | ||         ))
    | ||_________-^
    | |__________|
    |            this argument influences the type of `Ok`
note: tuple variant defined here
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:532:5

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:576:28
    |
576 |         let id: Uuid = row.try_get("id").map_err(AppError::DatabaseError)?;
    |                            ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
576 |         let id: Uuid = row.try_get_raw("id").map_err(AppError::DatabaseError)?;
    |                                   ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:577:38
    |
577 |         let batch_type: String = row.try_get("batch_type").map_err(AppError::DatabaseError)?;
    |                                      ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
577 |         let batch_type: String = row.try_get_raw("batch_type").map_err(AppError::DatabaseError)?;
    |                                             ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:578:43
    |
578 |         let total_amount_value: f64 = row.try_get("total_amount_value").map_err(AppError::DatabaseError)?;
    |                                           ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
578 |         let total_amount_value: f64 = row.try_get_raw("total_amount_value").map_err(AppError::DatabaseError)?;
    |                                                  ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:580:40
    |
580 |         let currency_str: String = row.try_get("total_amount_currency").map_err(AppError::DatabaseError)?;
    |                                        ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
580 |         let currency_str: String = row.try_get_raw("total_amount_currency").map_err(AppError::DatabaseError)?;
    |                                               ++++

error[E0631]: type mismatch in function arguments
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:584:78
    |
584 |         let total_amount = Amount::new(total_amount_value, currency).map_err(AppError::DomainRuleViolation)?;
    |                                                                      ------- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected due to this
    |                                                                      |
    |                                                                      required by a bound introduced by this call
    |
   ::: services/api-gateway/src/shared/domain/errors/mod.rs:19:5
    |
19  |     DomainRuleViolation(String),
    |     ------------------- found signature defined here
    |
    = note: expected function signature `fn(AppError) -> _`
               found function signature `fn(std::string::String) -> _`
note: required by a bound in `Result::<T, E>::map_err`
   --> /rustc/17067e9ac6d7ecb70e50f92c1944e545188d2359/library/core/src/result.rs:853:5
help: consider wrapping the function in a closure
    |
584 |         let total_amount = Amount::new(total_amount_value, currency).map_err(|arg0: AppError| AppError::DomainRuleViolation(/* std::string::String */))?;
    |                                                                              ++++++++++++++++                              +++++++++++++++++++++++++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:586:38
    |
586 |         let payment_count: i32 = row.try_get("payment_count").map_err(AppError::DatabaseError)?;
    |                                      ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
586 |         let payment_count: i32 = row.try_get_raw("payment_count").map_err(AppError::DatabaseError)?;
    |                                             ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:587:44
    |
587 |         let successful_payments: i32 = row.try_get("successful_payments").map_err(AppError::DatabaseError)?;
    |                                            ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
587 |         let successful_payments: i32 = row.try_get_raw("successful_payments").map_err(AppError::DatabaseError)?;
    |                                                   ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:588:40
    |
588 |         let failed_payments: i32 = row.try_get("failed_payments").map_err(AppError::DatabaseError)?;
    |                                        ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
588 |         let failed_payments: i32 = row.try_get_raw("failed_payments").map_err(AppError::DatabaseError)?;
    |                                               ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:589:34
    |
589 |         let status: String = row.try_get("status").map_err(AppError::DatabaseError)?;
    |                                  ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
589 |         let status: String = row.try_get_raw("status").map_err(AppError::DatabaseError)?;
    |                                         ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:591:45
    |
591 |         let created_at: DateTime<Utc> = row.try_get("created_at").map_err(AppError::DatabaseError)?;
    |                                             ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
591 |         let created_at: DateTime<Utc> = row.try_get_raw("created_at").map_err(AppError::DatabaseError)?;
    |                                                    ++++

error[E0599]: no method named `try_get` found for reference `&PgRow` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:592:55
    |
592 |         let completed_at: Option<DateTime<Utc>> = row.try_get("completed_at").map_err(AppError::DatabaseError)?;
    |                                                       ^^^^^^^
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `Row` which provides `try_get` is implemented but not in scope; perhaps you want to import it
    |
1   + use sqlx::Row;
    |
help: there is a method `try_get_raw` with a similar name
    |
592 |         let completed_at: Option<DateTime<Utc>> = row.try_get_raw("completed_at").map_err(AppError::DatabaseError)?;
    |                                                              ++++

error[E0061]: this function takes 3 arguments but 12 arguments were supplied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/repositories/payment_repository.rs:602:21
    |
602 |         let batch = PaymentBatch::new(
    |                     ^^^^^^^^^^^^^^^^^
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/payment/domain/entities.rs:365:12
    |
365 |     pub fn new(batch_type: BatchType, initial_payment: PaymentId, amount: Amount) -> Self {
    |            ^^^
help: remove the extra arguments
    |
605 -             total_amount,
606 -             vec![], // Simplified - would load from payment_batch_items
605 +             total_amount,
    |

error[E0599]: no variant or associated item named `EUR` found for enum `payment::domain::value_objects::Currency` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/stripe_gateway.rs:127:23
    |
127 |             Currency::EUR => "eur".to_string(),
    |                       ^^^ variant or associated item not found in `Currency`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:109:1
    |
109 | pub enum Currency {
    | ----------------- variant or associated item `EUR` not found for this enum

error[E0599]: no variant or associated item named `GBP` found for enum `payment::domain::value_objects::Currency` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/stripe_gateway.rs:128:23
    |
128 |             Currency::GBP => "gbp".to_string(),
    |                       ^^^ variant or associated item not found in `Currency`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:109:1
    |
109 | pub enum Currency {
    | ----------------- variant or associated item `GBP` not found for this enum

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/stripe_gateway.rs:247:56
    |
247 |                     .map_err(|e| AppError::DomainError(e))?,
    |                                  --------------------- ^- help: try using a conversion method: `.to_string()`
    |                                  |                     |
    |                                  |                     expected `String`, found `AppError`
    |                                  arguments to this function are incorrect
    |
note: associated function defined here
   --> services/api-gateway/src/shared/domain/errors/mod.rs:197:12
    |
197 |     pub fn DomainError(err: String) -> Self {
    |            ^^^^^^^^^^^ -----------

error[E0599]: no method named `user_id` found for reference `&payment::domain::entities::Payment` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/stripe_gateway.rs:267:46
    |
267 |                 "user_id": payment.payment().user_id().value(),
    |                                              ^^^^^^^ method not found in `&Payment`

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/stripe_gateway.rs:293:48
    |
293 |             .map_err(|e| AppError::DomainError(e))?;
    |                          --------------------- ^- help: try using a conversion method: `.to_string()`
    |                          |                     |
    |                          |                     expected `String`, found `AppError`
    |                          arguments to this function are incorrect
    |
note: associated function defined here
   --> services/api-gateway/src/shared/domain/errors/mod.rs:197:12
    |
197 |     pub fn DomainError(err: String) -> Self {
    |            ^^^^^^^^^^^ -----------

error[E0277]: the trait bound `CoinbaseAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/coinbase_gateway.rs:60:13
     |
60   |     crypto: CoinbaseAmount,
     |             ^^^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `CoinbaseAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `CoinbaseAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1344 others
note: required by a bound in `next_element`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1732:12
     |
1730 |     fn next_element<T>(&mut self) -> Result<Option<T>, Self::Error>
     |        ------------ required by a bound in this associated function
1731 |     where
1732 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `SeqAccess::next_element`

error[E0277]: the trait bound `CoinbaseAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/coinbase_gateway.rs:61:12
     |
61   |     local: CoinbaseAmount,
     |            ^^^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `CoinbaseAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `CoinbaseAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1344 others
note: required by a bound in `next_element`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1732:12
     |
1730 |     fn next_element<T>(&mut self) -> Result<Option<T>, Self::Error>
     |        ------------ required by a bound in this associated function
1731 |     where
1732 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `SeqAccess::next_element`

error[E0277]: the trait bound `CoinbaseAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/coinbase_gateway.rs:60:13
     |
60   |     crypto: CoinbaseAmount,
     |             ^^^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `CoinbaseAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `CoinbaseAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1344 others
note: required by a bound in `next_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1871:12
     |
1869 |     fn next_value<V>(&mut self) -> Result<V, Self::Error>
     |        ---------- required by a bound in this associated function
1870 |     where
1871 |         V: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `MapAccess::next_value`

error[E0277]: the trait bound `CoinbaseAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/coinbase_gateway.rs:61:12
     |
61   |     local: CoinbaseAmount,
     |            ^^^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `CoinbaseAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `CoinbaseAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1344 others
note: required by a bound in `next_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1871:12
     |
1869 |     fn next_value<V>(&mut self) -> Result<V, Self::Error>
     |        ---------- required by a bound in this associated function
1870 |     where
1871 |         V: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `MapAccess::next_value`

error[E0277]: the trait bound `CoinbaseAmount: Deserialize<'_>` is not satisfied
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/coinbase_gateway.rs:58:17
   |
58 | #[derive(Debug, Deserialize)]
   |                 ^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `CoinbaseAmount`
   |
   = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `CoinbaseAmount` type
   = note: for types from other crates check whether the crate offers a `serde` feature flag
   = help: the following other types implement trait `Deserialize<'de>`:
             &'a JsonRawValue
             &'a [u8]
             &'a std::path::Path
             &'a str
             ()
             (T,)
             (T0, T1)
             (T0, T1, T2)
           and 1344 others
note: required by a bound in `auth::_::_serde::__private::de::missing_field`
  --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/private/de.rs:25:8
   |
23 | pub fn missing_field<'de, V, E>(field: &'static str) -> Result<V, E>
   |        ------------- required by a bound in this function
24 | where
25 |     V: Deserialize<'de>,
   |        ^^^^^^^^^^^^^^^^ required by this bound in `missing_field`
   = note: this error originates in the derive macro `Deserialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0599]: no variant or associated item named `EUR` found for enum `payment::domain::value_objects::Currency` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/coinbase_gateway.rs:99:23
    |
99  |             Currency::EUR => "EUR".to_string(),
    |                       ^^^ variant or associated item not found in `Currency`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:109:1
    |
109 | pub enum Currency {
    | ----------------- variant or associated item `EUR` not found for this enum

error[E0599]: no variant or associated item named `GBP` found for enum `payment::domain::value_objects::Currency` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/coinbase_gateway.rs:100:23
    |
100 |             Currency::GBP => "GBP".to_string(),
    |                       ^^^ variant or associated item not found in `Currency`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:109:1
    |
109 | pub enum Currency {
    | ----------------- variant or associated item `GBP` not found for this enum

error[E0599]: no variant or associated item named `BSC` found for enum `payment::domain::value_objects::Blockchain` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/coinbase_gateway.rs:111:25
    |
111 |             Blockchain::BSC => "0x",
    |                         ^^^ variant or associated item not found in `Blockchain`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:160:1
    |
160 | pub enum Blockchain {
    | ------------------- variant or associated item `BSC` not found for this enum

error[E0599]: no variant or associated item named `BSC` found for enum `payment::domain::value_objects::Blockchain` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/coinbase_gateway.rs:122:116
    |
122 |                 matches!(blockchain, Blockchain::Ethereum | Blockchain::Solana | Blockchain::Polygon | Blockchain::BSC)
    |                                                                                                                    ^^^ variant or associated item not found in `Blockchain`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:160:1
    |
160 | pub enum Blockchain {
    | ------------------- variant or associated item `BSC` not found for this enum

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/coinbase_gateway.rs:159:56
    |
159 |                     .map_err(|e| AppError::DomainError(e))?,
    |                                  --------------------- ^- help: try using a conversion method: `.to_string()`
    |                                  |                     |
    |                                  |                     expected `String`, found `AppError`
    |                                  arguments to this function are incorrect
    |
note: associated function defined here
   --> services/api-gateway/src/shared/domain/errors/mod.rs:197:12
    |
197 |     pub fn DomainError(err: String) -> Self {
    |            ^^^^^^^^^^^ -----------

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/coinbase_gateway.rs:195:52
    |
195 |                 .map_err(|e| AppError::DomainError(e))?,
    |                              --------------------- ^- help: try using a conversion method: `.to_string()`
    |                              |                     |
    |                              |                     expected `String`, found `AppError`
    |                              arguments to this function are incorrect
    |
note: associated function defined here
   --> services/api-gateway/src/shared/domain/errors/mod.rs:197:12
    |
197 |     pub fn DomainError(err: String) -> Self {
    |            ^^^^^^^^^^^ -----------

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:106:13
     |
106  |     amount: PayPalAmount,
     |             ^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1358 others
note: required by a bound in `next_element`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1732:12
     |
1730 |     fn next_element<T>(&mut self) -> Result<Option<T>, Self::Error>
     |        ------------ required by a bound in this associated function
1731 |     where
1732 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `SeqAccess::next_element`

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:106:13
     |
106  |     amount: PayPalAmount,
     |             ^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1358 others
note: required by a bound in `next_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1871:12
     |
1869 |     fn next_value<V>(&mut self) -> Result<V, Self::Error>
     |        ---------- required by a bound in this associated function
1870 |     where
1871 |         V: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `MapAccess::next_value`

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:103:17
    |
103 | #[derive(Debug, Deserialize)]
    |                 ^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
    |
    = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
    = note: for types from other crates check whether the crate offers a `serde` feature flag
    = help: the following other types implement trait `Deserialize<'de>`:
              &'a JsonRawValue
              &'a [u8]
              &'a std::path::Path
              &'a str
              ()
              (T,)
              (T0, T1)
              (T0, T1, T2)
            and 1358 others
note: required by a bound in `auth::_::_serde::__private::de::missing_field`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/private/de.rs:25:8
    |
23  | pub fn missing_field<'de, V, E>(field: &'static str) -> Result<V, E>
    |        ------------- required by a bound in this function
24  | where
25  |     V: Deserialize<'de>,
    |        ^^^^^^^^^^^^^^^^ required by this bound in `missing_field`
    = note: this error originates in the derive macro `Deserialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:126:13
     |
126  |     amount: PayPalAmount,
     |             ^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1358 others
note: required by a bound in `next_element`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1732:12
     |
1730 |     fn next_element<T>(&mut self) -> Result<Option<T>, Self::Error>
     |        ------------ required by a bound in this associated function
1731 |     where
1732 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `SeqAccess::next_element`

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:126:13
     |
126  |     amount: PayPalAmount,
     |             ^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1358 others
note: required by a bound in `next_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1871:12
     |
1869 |     fn next_value<V>(&mut self) -> Result<V, Self::Error>
     |        ---------- required by a bound in this associated function
1870 |     where
1871 |         V: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `MapAccess::next_value`

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:122:17
    |
122 | #[derive(Debug, Deserialize)]
    |                 ^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
    |
    = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
    = note: for types from other crates check whether the crate offers a `serde` feature flag
    = help: the following other types implement trait `Deserialize<'de>`:
              &'a JsonRawValue
              &'a [u8]
              &'a std::path::Path
              &'a str
              ()
              (T,)
              (T0, T1)
              (T0, T1, T2)
            and 1358 others
note: required by a bound in `auth::_::_serde::__private::de::missing_field`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/private/de.rs:25:8
    |
23  | pub fn missing_field<'de, V, E>(field: &'static str) -> Result<V, E>
    |        ------------- required by a bound in this function
24  | where
25  |     V: Deserialize<'de>,
    |        ^^^^^^^^^^^^^^^^ required by this bound in `missing_field`
    = note: this error originates in the derive macro `Deserialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:159:13
     |
159  |     amount: PayPalAmount,
     |             ^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1358 others
note: required by a bound in `next_element`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1732:12
     |
1730 |     fn next_element<T>(&mut self) -> Result<Option<T>, Self::Error>
     |        ------------ required by a bound in this associated function
1731 |     where
1732 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `SeqAccess::next_element`

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:159:13
     |
159  |     amount: PayPalAmount,
     |             ^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1358 others
note: required by a bound in `next_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1871:12
     |
1869 |     fn next_value<V>(&mut self) -> Result<V, Self::Error>
     |        ---------- required by a bound in this associated function
1870 |     where
1871 |         V: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `MapAccess::next_value`

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:155:17
    |
155 | #[derive(Debug, Deserialize)]
    |                 ^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
    |
    = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
    = note: for types from other crates check whether the crate offers a `serde` feature flag
    = help: the following other types implement trait `Deserialize<'de>`:
              &'a JsonRawValue
              &'a [u8]
              &'a std::path::Path
              &'a str
              ()
              (T,)
              (T0, T1)
              (T0, T1, T2)
            and 1358 others
note: required by a bound in `auth::_::_serde::__private::de::missing_field`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/private/de.rs:25:8
    |
23  | pub fn missing_field<'de, V, E>(field: &'static str) -> Result<V, E>
    |        ------------- required by a bound in this function
24  | where
25  |     V: Deserialize<'de>,
    |        ^^^^^^^^^^^^^^^^ required by this bound in `missing_field`
    = note: this error originates in the derive macro `Deserialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:168:19
     |
168  |     gross_amount: PayPalAmount,
     |                   ^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1358 others
note: required by a bound in `next_element`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1732:12
     |
1730 |     fn next_element<T>(&mut self) -> Result<Option<T>, Self::Error>
     |        ------------ required by a bound in this associated function
1731 |     where
1732 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `SeqAccess::next_element`

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:169:17
     |
169  |     paypal_fee: PayPalAmount,
     |                 ^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1358 others
note: required by a bound in `next_element`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1732:12
     |
1730 |     fn next_element<T>(&mut self) -> Result<Option<T>, Self::Error>
     |        ------------ required by a bound in this associated function
1731 |     where
1732 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `SeqAccess::next_element`

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:170:17
     |
170  |     net_amount: PayPalAmount,
     |                 ^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1358 others
note: required by a bound in `next_element`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1732:12
     |
1730 |     fn next_element<T>(&mut self) -> Result<Option<T>, Self::Error>
     |        ------------ required by a bound in this associated function
1731 |     where
1732 |         T: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `SeqAccess::next_element`

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:168:19
     |
168  |     gross_amount: PayPalAmount,
     |                   ^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1358 others
note: required by a bound in `next_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1871:12
     |
1869 |     fn next_value<V>(&mut self) -> Result<V, Self::Error>
     |        ---------- required by a bound in this associated function
1870 |     where
1871 |         V: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `MapAccess::next_value`

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:169:17
     |
169  |     paypal_fee: PayPalAmount,
     |                 ^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1358 others
note: required by a bound in `next_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1871:12
     |
1869 |     fn next_value<V>(&mut self) -> Result<V, Self::Error>
     |        ---------- required by a bound in this associated function
1870 |     where
1871 |         V: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `MapAccess::next_value`

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
    --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:170:17
     |
170  |     net_amount: PayPalAmount,
     |                 ^^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
     |
     = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
     = note: for types from other crates check whether the crate offers a `serde` feature flag
     = help: the following other types implement trait `Deserialize<'de>`:
               &'a JsonRawValue
               &'a [u8]
               &'a std::path::Path
               &'a str
               ()
               (T,)
               (T0, T1)
               (T0, T1, T2)
             and 1358 others
note: required by a bound in `next_value`
    --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/de/mod.rs:1871:12
     |
1869 |     fn next_value<V>(&mut self) -> Result<V, Self::Error>
     |        ---------- required by a bound in this associated function
1870 |     where
1871 |         V: Deserialize<'de>,
     |            ^^^^^^^^^^^^^^^^ required by this bound in `MapAccess::next_value`

error[E0277]: the trait bound `PayPalAmount: Deserialize<'_>` is not satisfied
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:166:17
    |
166 | #[derive(Debug, Deserialize)]
    |                 ^^^^^^^^^^^ the trait `Deserialize<'_>` is not implemented for `PayPalAmount`
    |
    = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `PayPalAmount` type
    = note: for types from other crates check whether the crate offers a `serde` feature flag
    = help: the following other types implement trait `Deserialize<'de>`:
              &'a JsonRawValue
              &'a [u8]
              &'a std::path::Path
              &'a str
              ()
              (T,)
              (T0, T1)
              (T0, T1, T2)
            and 1358 others
note: required by a bound in `auth::_::_serde::__private::de::missing_field`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/serde-1.0.219/src/private/de.rs:25:8
    |
23  | pub fn missing_field<'de, V, E>(field: &'static str) -> Result<V, E>
    |        ------------- required by a bound in this function
24  | where
25  |     V: Deserialize<'de>,
    |        ^^^^^^^^^^^^^^^^ required by this bound in `missing_field`
    = note: this error originates in the derive macro `Deserialize` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0599]: no variant or associated item named `EUR` found for enum `payment::domain::value_objects::Currency` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:261:23
    |
261 |             Currency::EUR => "EUR".to_string(),
    |                       ^^^ variant or associated item not found in `Currency`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:109:1
    |
109 | pub enum Currency {
    | ----------------- variant or associated item `EUR` not found for this enum

error[E0599]: no variant or associated item named `GBP` found for enum `payment::domain::value_objects::Currency` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:262:23
    |
262 |             Currency::GBP => "GBP".to_string(),
    |                       ^^^ variant or associated item not found in `Currency`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:109:1
    |
109 | pub enum Currency {
    | ----------------- variant or associated item `GBP` not found for this enum

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:347:56
    |
347 |                     .map_err(|e| AppError::DomainError(e))?,
    |                                  --------------------- ^- help: try using a conversion method: `.to_string()`
    |                                  |                     |
    |                                  |                     expected `String`, found `AppError`
    |                                  arguments to this function are incorrect
    |
note: associated function defined here
   --> services/api-gateway/src/shared/domain/errors/mod.rs:197:12
    |
197 |     pub fn DomainError(err: String) -> Self {
    |            ^^^^^^^^^^^ -----------

error[E0308]: mismatched types
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:403:48
    |
403 |             .map_err(|e| AppError::DomainError(e))?;
    |                          --------------------- ^- help: try using a conversion method: `.to_string()`
    |                          |                     |
    |                          |                     expected `String`, found `AppError`
    |                          arguments to this function are incorrect
    |
note: associated function defined here
   --> services/api-gateway/src/shared/domain/errors/mod.rs:197:12
    |
197 |     pub fn DomainError(err: String) -> Self {
    |            ^^^^^^^^^^^ -----------

error[E0063]: missing field `breakdown` in initializer of `PayPalAmount`
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/gateways/paypal_gateway.rs:436:21
    |
436 |             amount: PayPalAmount {
    |                     ^^^^^^^^^^^^ missing `breakdown`

error[E0533]: expected value, found struct variant `PaymentStatus::Cancelled`
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/stripe_webhook.rs:81:27
   |
81 |             "canceled" => PaymentStatus::Cancelled,
   |                           ^^^^^^^^^^^^^^^^^^^^^^^^ not a value
   |
help: you might have meant to create a new value of the struct
   |
81 |             "canceled" => PaymentStatus::Cancelled { reason: /* value */ },
   |                                                    +++++++++++++++++++++++

error[E0533]: expected value, found struct variant `PaymentStatus::Failed`
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/stripe_webhook.rs:82:18
   |
82 |             _ => PaymentStatus::Failed,
   |                  ^^^^^^^^^^^^^^^^^^^^^ not a value
   |
help: you might have meant to create a new value of the struct
   |
82 |             _ => PaymentStatus::Failed { error_code: /* value */, error_message: /* value */ },
   |                                        +++++++++++++++++++++++++++++++++++++++++++++++++++++++

error[E0599]: no method named `verify_webhook` found for struct `Arc<StripeGateway>` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/stripe_webhook.rs:150:42
    |
150 |         let webhook_event = self.gateway.verify_webhook(payload, signature).await?;
    |                                          ^^^^^^^^^^^^^^ method not found in `Arc<StripeGateway>`
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `PaymentGateway` which provides `verify_webhook` is implemented but not in scope; perhaps you want to import it
    |
1   + use crate::bounded_contexts::payment::infrastructure::gateways::PaymentGateway;
    |

error[E0599]: no variant or associated item named `NotImplemented` found for enum `AppError` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/paypal_webhook.rs:36:23
   |
36 |         Err(AppError::NotImplemented(
   |                       ^^^^^^^^^^^^^^ variant or associated item not found in `AppError`
   |
  ::: services/api-gateway/src/shared/domain/errors/mod.rs:4:1
   |
4  | pub enum AppError {
   | ----------------- variant or associated item `NotImplemented` not found for this enum
   |
note: if you're trying to build a new `AppError` consider using one of the following associated functions:
      AppError::validation
      AppError::not_found
      AppError::authentication
      AppError::authorization
      and 9 others
  --> services/api-gateway/src/shared/domain/errors/mod.rs:68:5
   |
68 |     pub fn validation(message: impl Into<String>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
72 |     pub fn not_found(message: impl Into<String>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
76 |     pub fn authentication(message: impl Into<String>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
80 |     pub fn authorization(message: impl Into<String>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0599]: no variant or associated item named `NotImplemented` found for enum `AppError` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/infrastructure/webhooks/coinbase_webhook.rs:36:23
   |
36 |         Err(AppError::NotImplemented(
   |                       ^^^^^^^^^^^^^^ variant or associated item not found in `AppError`
   |
  ::: services/api-gateway/src/shared/domain/errors/mod.rs:4:1
   |
4  | pub enum AppError {
   | ----------------- variant or associated item `NotImplemented` not found for this enum
   |
note: if you're trying to build a new `AppError` consider using one of the following associated functions:
      AppError::validation
      AppError::not_found
      AppError::authentication
      AppError::authorization
      and 9 others
  --> services/api-gateway/src/shared/domain/errors/mod.rs:68:5
   |
68 |     pub fn validation(message: impl Into<String>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
72 |     pub fn not_found(message: impl Into<String>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
76 |     pub fn authentication(message: impl Into<String>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
80 |     pub fn authorization(message: impl Into<String>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0061]: this function takes 6 arguments but 4 arguments were supplied
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:938:14
    |
938 |       Arc::new(PaymentController::new(
    |  ______________^^^^^^^^^^^^^^^^^^^^^^-
939 | |         payment_repository,
940 | |         royalty_repository,
941 | |         wallet_repository,
942 | |         webhook_router,
943 | |     ))
    | |_____- two arguments of type `std::option::Option<Arc<WebhookQueueProcessor>>` and `Arc<PaymentCommandHandlerImpl>` are missing
    |
note: associated function defined here
   --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:106:12
    |
106 |     pub fn new(
    |            ^^^
...
111 |         webhook_queue_processor: Option<Arc<WebhookQueueProcessor>>,
    |         -----------------------------------------------------------
112 |         command_handler: Arc<PaymentCommandHandlerImpl>,
    |         -----------------------------------------------
help: provide the arguments
    |
938 -     Arc::new(PaymentController::new(
939 -         payment_repository,
940 -         royalty_repository,
941 -         wallet_repository,
942 -         webhook_router,
943 -     ))
938 +     Arc::new(PaymentController::new(payment_repository, royalty_repository, wallet_repository, webhook_router, /* std::option::Option<Arc<WebhookQueueProcessor>> */, /* Arc<PaymentCommandHandlerImpl> */))
    |

error[E0599]: no function or associated item named `initiate_payment` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:13:53
   |
13 |         .route("/payments", post(PaymentController::initiate_payment))
   |                                                     ^^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `initiate_payment` not found for this struct

error[E0599]: no function or associated item named `process_payment` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:14:65
   |
14 |         .route("/payments/:id/process", post(PaymentController::process_payment))
   |                                                                 ^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `process_payment` not found for this struct
   |
   = help: items from traits can only be used if the trait is implemented and in scope
   = note: the following traits define an item `process_payment`, perhaps you need to implement one of them:
           candidate #1: `PaymentGateway`
           candidate #2: `payment::domain::services::PaymentProcessingService`

error[E0599]: no function or associated item named `complete_payment` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:15:66
   |
15 |         .route("/payments/:id/complete", post(PaymentController::complete_payment))
   |                                                                  ^^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `complete_payment` not found for this struct

error[E0599]: no function or associated item named `cancel_payment` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:16:64
   |
16 |         .route("/payments/:id/cancel", post(PaymentController::cancel_payment))
   |                                                                ^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `cancel_payment` not found for this struct
   |
   = help: items from traits can only be used if the trait is implemented and in scope
note: `payment::domain::services::PaymentProcessingService` defines an item `cancel_payment`, perhaps you need to implement it
  --> services/api-gateway/src/bounded_contexts/payment/domain/services.rs:26:1
   |
26 | pub trait PaymentProcessingService: Send + Sync {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0599]: no function or associated item named `initiate_refund` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:17:60
   |
17 |         .route("/payments/refund", post(PaymentController::initiate_refund))
   |                                                            ^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `initiate_refund` not found for this struct

error[E0599]: no function or associated item named `get_payment` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:20:56
   |
20 |         .route("/payments/:id", get(PaymentController::get_payment))
   |                                                        ^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `get_payment` not found for this struct

error[E0599]: no function or associated item named `get_payment_by_transaction` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:21:80
   |
21 |         .route("/payments/transaction/:transaction_id", get(PaymentController::get_payment_by_transaction))
   |                                                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `get_payment_by_transaction` not found for this struct

error[E0599]: no function or associated item named `get_user_payment_history` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:22:74
   |
22 |         .route("/payments/user/:user_id/history", get(PaymentController::get_user_payment_history))
   |                                                                          ^^^^^^^^^^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `get_user_payment_history` not found for this struct

error[E0599]: no function or associated item named `get_user_payment_summary` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:23:74
   |
23 |         .route("/payments/user/:user_id/summary", get(PaymentController::get_user_payment_summary))
   |                                                                          ^^^^^^^^^^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `get_user_payment_summary` not found for this struct

error[E0599]: no function or associated item named `get_payment_statistics` found for struct `PaymentController` in the current scope
   --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:26:63
    |
26  |         .route("/payments/statistics", get(PaymentController::get_payment_statistics))
    |                                                               ^^^^^^^^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
    |
   ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
    |
96  | pub struct PaymentController {
    | ---------------------------- function or associated item `get_payment_statistics` not found for this struct
    |
    = help: items from traits can only be used if the trait is implemented and in scope
note: `payment::domain::repository::PaymentAnalyticsRepository` defines an item `get_payment_statistics`, perhaps you need to implement it
   --> services/api-gateway/src/bounded_contexts/payment/domain/repository.rs:158:1
    |
158 | pub trait PaymentAnalyticsRepository: Send + Sync {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0599]: no function or associated item named `get_payment_analytics` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:27:62
   |
27 |         .route("/payments/analytics", get(PaymentController::get_payment_analytics))
   |                                                              ^^^^^^^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `get_payment_analytics` not found for this struct

error[E0599]: no function or associated item named `distribute_royalties` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:30:65
   |
30 |         .route("/royalties/distribute", post(PaymentController::distribute_royalties))
   |                                                                 ^^^^^^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `distribute_royalties` not found for this struct

error[E0599]: no function or associated item named `process_royalty_distribution` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:31:66
   |
31 |         .route("/royalties/:id/process", post(PaymentController::process_royalty_distribution))
   |                                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `process_royalty_distribution` not found for this struct
   |
   = help: items from traits can only be used if the trait is implemented and in scope
note: `payment::domain::services::RoyaltyDistributionService` defines an item `process_royalty_distribution`, perhaps you need to implement it
  --> services/api-gateway/src/bounded_contexts/payment/domain/services.rs:72:1
   |
72 | pub trait RoyaltyDistributionService: Send + Sync {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0599]: no function or associated item named `get_royalty_distributions` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:34:53
   |
34 |         .route("/royalties", get(PaymentController::get_royalty_distributions))
   |                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `get_royalty_distributions` not found for this struct

error[E0599]: no function or associated item named `get_artist_revenue_summary` found for struct `PaymentController` in the current scope
  --> services/api-gateway/src/bounded_contexts/payment/presentation/routes.rs:35:79
   |
35 |         .route("/royalties/artist/:artist_id/summary", get(PaymentController::get_artist_revenue_summary))
   |                                                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^ function or associated item not found in `PaymentController`
   |
  ::: services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:96:1
   |
96 | pub struct PaymentController {
   | ---------------------------- function or associated item `get_artist_revenue_summary` not found for this struct

error[E0277]: the trait bound `rust_decimal::Decimal: sqlx::Decode<'_, Postgres>` is not satisfied
   --> services/api-gateway/src/shared/infrastructure/database/postgres.rs:576:67
    |
576 |             let total_rewards_earned: rust_decimal::Decimal = row.try_get("total_rewards_earned")?;
    |                                                                   ^^^^^^^ the trait `sqlx::Decode<'_, Postgres>` is not implemented for `rust_decimal::Decimal`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `&'a str` implements `sqlx::Decode<'a, sqlx::Any>`
              `&'r JsonRawValue` implements `sqlx::Decode<'r, DB>`
              `&'r [u8]` implements `sqlx::Decode<'r, Postgres>`
              `&'r [u8]` implements `sqlx::Decode<'r, sqlx::Any>`
              `&'r str` implements `sqlx::Decode<'r, Postgres>`
              `()` implements `sqlx::Decode<'r, Postgres>`
              `(T1, T2)` implements `sqlx::Decode<'r, Postgres>`
              `(T1, T2, T3)` implements `sqlx::Decode<'r, Postgres>`
            and 50 others
note: required by a bound in `try_get`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/row.rs:113:12
    |
110 |     fn try_get<'r, T, I>(&'r self, index: I) -> Result<T, Error>
    |        ------- required by a bound in this associated function
...
113 |         T: Decode<'r, Self::Database> + Type<Self::Database>,
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `Row::try_get`

error[E0277]: the trait bound `rust_decimal::Decimal: sqlx::Type<Postgres>` is not satisfied
   --> services/api-gateway/src/shared/infrastructure/database/postgres.rs:576:67
    |
576 |             let total_rewards_earned: rust_decimal::Decimal = row.try_get("total_rewards_earned")?;
    |                                                                   ^^^^^^^ the trait `sqlx::Type<Postgres>` is not implemented for `rust_decimal::Decimal`
    |
    = help: the following other types implement trait `sqlx::Type<DB>`:
              `&T` implements `sqlx::Type<DB>`
              `()` implements `sqlx::Type<Postgres>`
              `(T1, T2)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4, T5)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4, T5, T6)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4, T5, T6, T7)` implements `sqlx::Type<Postgres>`
            and 53 others
note: required by a bound in `try_get`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/row.rs:113:41
    |
110 |     fn try_get<'r, T, I>(&'r self, index: I) -> Result<T, Error>
    |        ------- required by a bound in this associated function
...
113 |         T: Decode<'r, Self::Database> + Type<Self::Database>,
    |                                         ^^^^^^^^^^^^^^^^^^^^ required by this bound in `Row::try_get`
help: use a unary tuple instead
    |
576 |             let total_rewards_earned: rust_decimal::Decimal = (row,).try_get("total_rewards_earned")?;
    |                                                               +   ++

error[E0277]: the trait bound `rust_decimal::Decimal: sqlx::Decode<'_, Postgres>` is not satisfied
   --> services/api-gateway/src/shared/infrastructure/database/postgres.rs:579:64
    |
579 |             let total_investments: rust_decimal::Decimal = row.try_get("total_investments")?;
    |                                                                ^^^^^^^ the trait `sqlx::Decode<'_, Postgres>` is not implemented for `rust_decimal::Decimal`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `&'a str` implements `sqlx::Decode<'a, sqlx::Any>`
              `&'r JsonRawValue` implements `sqlx::Decode<'r, DB>`
              `&'r [u8]` implements `sqlx::Decode<'r, Postgres>`
              `&'r [u8]` implements `sqlx::Decode<'r, sqlx::Any>`
              `&'r str` implements `sqlx::Decode<'r, Postgres>`
              `()` implements `sqlx::Decode<'r, Postgres>`
              `(T1, T2)` implements `sqlx::Decode<'r, Postgres>`
              `(T1, T2, T3)` implements `sqlx::Decode<'r, Postgres>`
            and 50 others
note: required by a bound in `try_get`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/row.rs:113:12
    |
110 |     fn try_get<'r, T, I>(&'r self, index: I) -> Result<T, Error>
    |        ------- required by a bound in this associated function
...
113 |         T: Decode<'r, Self::Database> + Type<Self::Database>,
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `Row::try_get`

error[E0277]: the trait bound `rust_decimal::Decimal: sqlx::Type<Postgres>` is not satisfied
   --> services/api-gateway/src/shared/infrastructure/database/postgres.rs:579:64
    |
579 |             let total_investments: rust_decimal::Decimal = row.try_get("total_investments")?;
    |                                                                ^^^^^^^ the trait `sqlx::Type<Postgres>` is not implemented for `rust_decimal::Decimal`
    |
    = help: the following other types implement trait `sqlx::Type<DB>`:
              `&T` implements `sqlx::Type<DB>`
              `()` implements `sqlx::Type<Postgres>`
              `(T1, T2)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4, T5)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4, T5, T6)` implements `sqlx::Type<Postgres>`
              `(T1, T2, T3, T4, T5, T6, T7)` implements `sqlx::Type<Postgres>`
            and 53 others
note: required by a bound in `try_get`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/row.rs:113:41
    |
110 |     fn try_get<'r, T, I>(&'r self, index: I) -> Result<T, Error>
    |        ------- required by a bound in this associated function
...
113 |         T: Decode<'r, Self::Database> + Type<Self::Database>,
    |                                         ^^^^^^^^^^^^^^^^^^^^ required by this bound in `Row::try_get`
help: use a unary tuple instead
    |
579 |             let total_investments: rust_decimal::Decimal = (row,).try_get("total_investments")?;
    |                                                            +   ++

error[E0308]: mismatched types
   --> services/api-gateway/src/openapi/router.rs:22:48
    |
22  |                 .url("/api-docs/openapi.json", ApiDoc::openapi())
    |                  ---                           ^^^^^^^^^^^^^^^^^ expected `utoipa::openapi::OpenApi`, found a different `utoipa::openapi::OpenApi`
    |                  |
    |                  arguments to this method are incorrect
    |
note: two different versions of crate `utoipa` are being used; two types coming from two different versions of the same crate are different types even if they look the same
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/utoipa-4.2.3/src/openapi.rs:38:1
    |
38  |  / builder! {
39  |  |     /// # Examples
40  |  |     ///
41  |  |     /// Create [`OpenApi`] using [`OpenApiBuilder`].
...    |
117 |  | }
    |  |_^ this is the found type `utoipa::openapi::OpenApi`
    |
   ::: services/api-gateway/src/bounded_contexts/listen_reward/presentation/handlers.rs:7:5
    |
7   |    use utoipa::ToSchema;
    |        ------ one version of crate `utoipa` used here, as a direct dependency of the current crate
    |
   ::: /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/utoipa-0.1.2/src/openapi.rs:35:1
    |
35  | /  builder! {
36  | |      /// # Examples
37  | |      ///
38  | |      /// Create [`OpenApi`] using [`OpenApiBuilder`].
...   |
114 | |  }
    | |__^ this is the expected type `utoipa::openapi::OpenApi`
    |
   ::: services/api-gateway/src/openapi/router.rs:12:5
    |
12  |    use utoipa_swagger_ui::SwaggerUi;
    |        ----------------- one version of crate `utoipa` used here, as a dependency of crate `utoipa_swagger_ui`
    = help: you can use `cargo tree` to explore your dependency tree
note: method defined here
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/utoipa-swagger-ui-0.1.2/src/lib.rs:131:12
    |
131 |     pub fn url<U: Into<Url<'static>>>(mut self, url: U, openapi: OpenApi) -> Self {
    |            ^^^
    = note: this error originates in the macro `builder` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0277]: the trait bound `Router<_>: From<SwaggerUi>` is not satisfied
   --> services/api-gateway/src/openapi/router.rs:21:13
    |
20  |           .merge(
    |            ----- required by a bound introduced by this call
21  | /             SwaggerUi::new("/swagger-ui")
22  | |                 .url("/api-docs/openapi.json", ApiDoc::openapi())
    | |_________________________________________________________________^ the trait `From<SwaggerUi>` is not implemented for `Router<_>`
    |
    = help: the trait `From<SwaggerUi>` is not implemented for `Router<_>`
            but trait `From<utoipa_axum::router::OpenApiRouter<_>>` is implemented for it
    = help: for that trait implementation, expected `utoipa_axum::router::OpenApiRouter<_>`, found `SwaggerUi`
    = note: required for `SwaggerUi` to implement `Into<Router<_>>`
note: required by a bound in `Router::<S>::merge`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/axum-0.7.9/src/routing/mod.rs:232:12
    |
230 |     pub fn merge<R>(self, other: R) -> Self
    |            ----- required by a bound in this associated function
231 |     where
232 |         R: Into<Router<S>>,
    |            ^^^^^^^^^^^^^^^ required by this bound in `Router::<S>::merge`
help: consider removing this method call, as the receiver has type `SwaggerUi` and `SwaggerUi: From<SwaggerUi>` trivially holds
    |
21  -             SwaggerUi::new("/swagger-ui")
22  -                 .url("/api-docs/openapi.json", ApiDoc::openapi())
21  +             SwaggerUi::new("/swagger-ui")
    |

error[E0061]: this function takes 1 argument but 2 arguments were supplied
   --> services/api-gateway/src/openapi/router.rs:26:13
    |
26  |             Redoc::new("/redoc", ApiDoc::openapi())
    |             ^^^^^^^^^^           ----------------- unexpected argument #2 of type `utoipa::openapi::OpenApi`
    |
note: associated function defined here
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/utoipa-redoc-0.1.0/src/lib.rs:285:12
    |
285 |     pub fn new(openapi: S) -> Self {
    |            ^^^
help: remove the extra argument
    |
26  -             Redoc::new("/redoc", ApiDoc::openapi())
26  +             Redoc::new("/redoc")
    |

error[E0277]: the trait bound `Router<_>: From<Redoc<'_, '_, &str>>` is not satisfied
   --> services/api-gateway/src/openapi/router.rs:26:13
    |
25  |         .merge(
    |          ----- required by a bound introduced by this call
26  |             Redoc::new("/redoc", ApiDoc::openapi())
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `From<Redoc<'_, '_, &str>>` is not implemented for `Router<_>`
    |
    = help: the trait `From<Redoc<'_, '_, &str>>` is not implemented for `Router<_>`
            but trait `From<utoipa_axum::router::OpenApiRouter<_>>` is implemented for it
    = help: for that trait implementation, expected `utoipa_axum::router::OpenApiRouter<_>`, found `Redoc<'_, '_, &str>`
    = note: required for `Redoc<'_, '_, &str>` to implement `Into<Router<_>>`
note: required by a bound in `Router::<S>::merge`
   --> /Users/domoblock/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/axum-0.7.9/src/routing/mod.rs:232:12
    |
230 |     pub fn merge<R>(self, other: R) -> Self
    |            ----- required by a bound in this associated function
231 |     where
232 |         R: Into<Router<S>>,
    |            ^^^^^^^^^^^^^^^ required by this bound in `Router::<S>::merge`

error[E0223]: ambiguous associated type
   --> services/api-gateway/src/openapi/mod.rs:242:10
    |
242 | #[derive(OpenApi)]
    |          ^^^^^^^
    |
    = note: this error originates in the derive macro `OpenApi` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unused import: `FromRow`
 --> services/api-gateway/src/bounded_contexts/campaign/infrastructure/postgres_repository.rs:3:20
  |
3 | use sqlx::{PgPool, FromRow, Row};
  |                    ^^^^^^^

warning: unused import: `crate::shared::domain::events::DomainEvent`
 --> services/api-gateway/src/bounded_contexts/campaign/infrastructure/event_publisher.rs:4:5
  |
4 | use crate::shared::domain::events::DomainEvent;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `utoipa::ToSchema`
 --> services/api-gateway/src/bounded_contexts/payment/presentation/controllers/payment_controller.rs:9:5
  |
9 | use utoipa::ToSchema;
  |     ^^^^^^^^^^^^^^^^

warning: unused import: `MessageBroker`
 --> services/api-gateway/src/handlers.rs:7:79
  |
7 | use vibestream_types::{ApiMessage, Blockchain, WalletAddress, ServiceMessage, MessageBroker};
  |                                                                               ^^^^^^^^^^^^^

warning: unused variable: `event`
  --> services/api-gateway/src/bounded_contexts/campaign/domain/aggregates.rs:40:24
   |
40 |         let (campaign, event) = Campaign::create(
   |                        ^^^^^ help: if this is intentional, prefix it with an underscore: `_event`

warning: unused variable: `campaign_id`
  --> services/api-gateway/src/bounded_contexts/campaign/application/use_cases/activate_campaign.rs:43:13
   |
43 |         let campaign_id = CampaignId::from_string(&command.campaign_id)
   |             ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_campaign_id`

warning: unused variable: `campaign_id`
  --> services/api-gateway/src/bounded_contexts/campaign/application/use_cases/purchase_nft.rs:55:13
   |
55 |         let campaign_id = CampaignId::from_string(&command.campaign_id)
   |             ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_campaign_id`

warning: unused variable: `user_id`
  --> services/api-gateway/src/bounded_contexts/campaign/application/use_cases/purchase_nft.rs:58:13
   |
58 |         let user_id = UserId::from_string(&command.user_id)
   |             ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_user_id`

warning: unused variable: `id`
   --> services/api-gateway/src/bounded_contexts/campaign/infrastructure/postgres_repository.rs:321:13
    |
321 |         let id = CampaignId::from_string(&self.id)
    |             ^^ help: if this is intentional, prefix it with an underscore: `_id`

warning: unused variable: `status`
   --> services/api-gateway/src/bounded_contexts/campaign/infrastructure/postgres_repository.rs:357:13
    |
357 |         let status = match self.status.as_str() {
    |             ^^^^^^ help: if this is intentional, prefix it with an underscore: `_status`

warning: unused variable: `nft_supply`
   --> services/api-gateway/src/bounded_contexts/campaign/infrastructure/postgres_repository.rs:376:13
    |
376 |         let nft_supply = NFTSupply::with_sold(self.max_nfts as u32, self.nfts_sold as u32);
    |             ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_nft_supply`

warning: unused variable: `target`
   --> services/api-gateway/src/bounded_contexts/campaign/infrastructure/postgres_repository.rs:378:13
    |
378 |         let target = match self.target_revenue {
    |             ^^^^^^ help: if this is intentional, prefix it with an underscore: `_target`

warning: unused variable: `tier_points`
  --> services/api-gateway/src/bounded_contexts/user/infrastructure/postgres_repository.rs:46:13
   |
46 |         let tier_points: i32 = row.try_get("tier_points").unwrap_or(0);
   |             ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_tier_points`

warning: unused variable: `total_rewards`
  --> services/api-gateway/src/bounded_contexts/user/infrastructure/postgres_repository.rs:47:13
   |
47 |         let total_rewards: f64 = row.try_get("total_rewards").unwrap_or(0.0);
   |             ^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_total_rewards`

warning: unused variable: `listen_time`
  --> services/api-gateway/src/bounded_contexts/user/infrastructure/postgres_repository.rs:48:13
   |
48 |         let listen_time: i64 = row.try_get("listen_time").unwrap_or(0);
   |             ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_listen_time`

warning: unused variable: `removed_track`
   --> services/api-gateway/src/bounded_contexts/music/domain/entities/album.rs:300:13
    |
300 |         let removed_track = self.tracks.remove(track_index);
    |             ^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_removed_track`

warning: unused variable: `id`
  --> services/api-gateway/src/bounded_contexts/music/infrastructure/repositories/postgres_song_repository.rs:22:13
   |
22 |         let id = SongId::from_uuid(
   |             ^^ help: if this is intentional, prefix it with an underscore: `_id`

warning: unused variable: `file_data`
   --> services/api-gateway/src/bounded_contexts/music/infrastructure/storage/ipfs_storage.rs:234:34
    |
234 |     fn generate_ipfs_hash(&self, file_data: &Bytes) -> String {
    |                                  ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_file_data`

warning: unused variable: `content_type`
  --> services/api-gateway/src/bounded_contexts/music/infrastructure/storage/local_storage.rs:46:69
   |
46 |     async fn upload_audio(&self, file_data: Bytes, file_name: &str, content_type: &str) -> IoResult<String> {
   |                                                                     ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_content_type`

warning: unused variable: `url`
   --> services/api-gateway/src/bounded_contexts/music/infrastructure/storage/local_storage.rs:141:31
    |
141 |     async fn get_peers(&self, url: &str) -> IoResult<Vec<String>> {
    |                               ^^^ help: if this is intentional, prefix it with an underscore: `_url`

warning: unused variable: `url`
   --> services/api-gateway/src/bounded_contexts/music/infrastructure/storage/local_storage.rs:146:41
    |
146 |     async fn announce_to_network(&self, url: &str) -> IoResult<()> {
    |                                         ^^^ help: if this is intentional, prefix it with an underscore: `_url`

warning: unused variable: `file_data`
   --> services/api-gateway/src/bounded_contexts/music/infrastructure/storage/ipfs_video_storage.rs:365:34
    |
365 |     fn generate_ipfs_hash(&self, file_data: &Bytes) -> String {
    |                                  ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_file_data`

warning: unused variable: `content_type`
  --> services/api-gateway/src/bounded_contexts/music/infrastructure/storage/cdn_storage.rs:36:69
   |
36 |     async fn upload_audio(&self, file_data: Bytes, file_name: &str, content_type: &str) -> IoResult<String> {
   |                                                                     ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_content_type`

warning: unused variable: `content_id_uuid`
  --> services/api-gateway/src/bounded_contexts/music/infrastructure/storage/cdn_storage.rs:69:13
   |
69 |         let content_id_uuid = Uuid::parse_str(content_id)
   |             ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_content_id_uuid`

warning: unused variable: `version`
   --> services/api-gateway/src/bounded_contexts/listen_reward/domain/aggregates/reward_distribution.rs:489:9
    |
489 |         version: i32,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_version`

warning: unused variable: `pool_id`
   --> services/api-gateway/src/bounded_contexts/listen_reward/application/use_cases/process_reward_distribution.rs:141:13
    |
141 |         let pool_id = crate::bounded_contexts::listen_reward::domain::value_objects::RewardPoolId::from_uuid(uuid::Uuid::new_v4());
    |             ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_pool_id`

warning: unused variable: `validation_period_hours`
   --> services/api-gateway/src/bounded_contexts/listen_reward/application/use_cases/process_reward_distribution.rs:136:9
    |
136 |         validation_period_hours: u64,
    |         ^^^^^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_validation_period_hours`

warning: unused variable: `id`
   --> services/api-gateway/src/bounded_contexts/notifications/infrastructure/postgres_repository.rs:206:38
    |
206 |     async fn mark_as_archived(&self, id: Uuid) -> Result<(), Box<dyn std::error::Error + Send + Sync>> {
    |                                      ^^ help: if this is intentional, prefix it with an underscore: `_id`

warning: unused variable: `fan_id`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/entities.rs:162:9
    |
162 |         fan_id: FanId,
    |         ^^^^^^ help: if this is intentional, prefix it with an underscore: `_fan_id`

warning: unused variable: `timestamp`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/domain/entities.rs:165:9
    |
165 |         timestamp: DateTime<Utc>,
    |         ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_timestamp`

warning: unused variable: `wristband_id`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/qr_service.rs:143:32
    |
143 |     fn verify_signature(&self, wristband_id: &WristbandId, signature: &str) -> bool {
    |                                ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_wristband_id`

warning: unused variable: `fan_wallet_address`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:316:42
    |
316 |     async fn verify_nft_ownership(&self, fan_wallet_address: &str, token_id: &str) -> Result<bool, String> {
    |                                          ^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_fan_wallet_address`

warning: unused variable: `token_id`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:316:68
    |
316 |     async fn verify_nft_ownership(&self, fan_wallet_address: &str, token_id: &str) -> Result<bool, String> {
    |                                                                    ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_token_id`

warning: unused variable: `from_address`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:322:34
    |
322 |     async fn transfer_nft(&self, from_address: &str, to_address: &str, token_id: &str) -> Result<String, String> {
    |                                  ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_from_address`

warning: unused variable: `to_address`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:322:54
    |
322 |     async fn transfer_nft(&self, from_address: &str, to_address: &str, token_id: &str) -> Result<String, String> {
    |                                                      ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_to_address`

warning: unused variable: `token_id`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:322:72
    |
322 |     async fn transfer_nft(&self, from_address: &str, to_address: &str, token_id: &str) -> Result<String, String> {
    |                                                                        ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_token_id`

warning: unused variable: `token_id`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/adapters.rs:328:38
    |
328 |     async fn get_nft_metadata(&self, token_id: &str) -> Result<Option<NftMetadata>, String> {
    |                                      ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_token_id`

warning: unused variable: `result`
  --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:47:9
   |
47 |         result: &FanVerificationResult,
   |         ^^^^^^ help: if this is intentional, prefix it with an underscore: `_result`

warning: unused variable: `proof_data`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:133:57
    |
133 |     async fn save_zk_proof(&self, proof_id: uuid::Uuid, proof_data: String) -> Result<(), AppError> {
    |                                                         ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_proof_data`

warning: unused variable: `biometric_data`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:177:59
    |
177 |     async fn verify_fan_biometrics(&self, fan_id: &FanId, biometric_data: &BiometricData) -> Result<FanVerificationResult, AppError> {
    |                                                           ^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_biometric_data`

warning: unused variable: `fan_wallet_address`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/mock_services.rs:301:66
    |
301 |     async fn mint_nft_wristband(&self, wristband: &NftWristband, fan_wallet_address: &str) -> Result<String, AppError> {
    |                                                                  ^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_fan_wallet_address`

warning: unused variable: `fan_wallet_address`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:359:58
    |
359 |     async fn mint_nft(&self, wristband_id: &WristbandId, fan_wallet_address: &str) -> Result<String, AppError> {
    |                                                          ^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_fan_wallet_address`

warning: unused variable: `fan_wallet_address`
   --> services/api-gateway/src/bounded_contexts/fan_loyalty/infrastructure/postgres_repositories.rs:383:70
    |
383 |     async fn verify_nft_ownership(&self, wristband_id: &WristbandId, fan_wallet_address: &str) -> Result<bool, AppError> {
    |                                                                      ^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_fan_wallet_address`

warning: unused variable: `alert`
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:174:17
    |
174 |             let alert = HighValueTransactionAlert::new(
    |                 ^^^^^ help: if this is intentional, prefix it with an underscore: `_alert`

warning: unused variable: `reason`
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:206:35
    |
206 |     pub fn put_on_hold(&mut self, reason: String) -> Result<(), AppError> {
    |                                   ^^^^^^ help: if this is intentional, prefix it with an underscore: `_reason`

error[E0499]: cannot borrow `*self` as mutable more than once at a time
   --> services/api-gateway/src/bounded_contexts/payment/domain/aggregates.rs:582:13
    |
541 |         for (shareholder_id, dist) in &mut self.shareholder_distributions {
    |                                       -----------------------------------
    |                                       |
    |                                       first mutable borrow occurs here
    |                                       first borrow later used here
...
582 |             self.add_event(Box::new(event));
    |             ^^^^ second mutable borrow occurs here

error[E0382]: borrow of moved value: `amount`
  --> services/api-gateway/src/bounded_contexts/payment/domain/entities.rs:72:13
   |
37 |         amount: Amount,
   |         ------ move occurs because `amount` has type `payment::domain::value_objects::Amount`, which does not implement the `Copy` trait
...
54 |             amount,
   |             ------ value moved here
...
72 |             amount.clone(),
   |             ^^^^^^ value borrowed here after move
   |
help: consider cloning the value if the performance cost is acceptable
   |
54 |             amount: amount.clone(),
   |                   ++++++++++++++++

error[E0515]: cannot return value referencing temporary value
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:658:13
    |
658 | /             match self.phase {
659 | |                 PlatformPhase::Growth => &PlatformFees::launch_phase(),
    | |                                           ---------------------------- temporary value created here
660 | |                 PlatformPhase::Scale => &PlatformFees::growth_phase(),
661 | |                 PlatformPhase::Mature => &PlatformFees::scale_phase(),
662 | |                 _ => &self.fees,
663 | |             }
    | |_____________^ returns a value referencing data owned by the current function

error[E0515]: cannot return value referencing temporary value
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:658:13
    |
658 | /             match self.phase {
659 | |                 PlatformPhase::Growth => &PlatformFees::launch_phase(),
660 | |                 PlatformPhase::Scale => &PlatformFees::growth_phase(),
    | |                                          ---------------------------- temporary value created here
661 | |                 PlatformPhase::Mature => &PlatformFees::scale_phase(),
662 | |                 _ => &self.fees,
663 | |             }
    | |_____________^ returns a value referencing data owned by the current function

error[E0515]: cannot return value referencing temporary value
   --> services/api-gateway/src/bounded_contexts/payment/domain/value_objects.rs:658:13
    |
658 | /             match self.phase {
659 | |                 PlatformPhase::Growth => &PlatformFees::launch_phase(),
660 | |                 PlatformPhase::Scale => &PlatformFees::growth_phase(),
661 | |                 PlatformPhase::Mature => &PlatformFees::scale_phase(),
    | |                                           --------------------------- temporary value created here
662 | |                 _ => &self.fees,
663 | |             }
    | |_____________^ returns a value referencing data owned by the current function

warning: unused variable: `email`
   --> services/api-gateway/src/bounded_contexts/orchestrator.rs:237:52
    |
237 |             DomainEvent::UserRegistered { user_id, email, username, .. } => {
    |                                                    ^^^^^-
    |                                                    |
    |                                                    help: try removing the field

error[E0004]: non-exhaustive patterns: `&AppError::ServiceUnavailable(_)`, `&AppError::InsufficientFundsError(_)` and `&AppError::FraudDetected(_)` not covered
  --> services/api-gateway/src/shared/domain/errors/mod.rs:38:15
   |
38 |         match self {
   |               ^^^^ patterns `&AppError::ServiceUnavailable(_)`, `&AppError::InsufficientFundsError(_)` and `&AppError::FraudDetected(_)` not covered
   |
note: `AppError` defined here
  --> services/api-gateway/src/shared/domain/errors/mod.rs:4:10
   |
4  | pub enum AppError {
   |          ^^^^^^^^
...
29 |     ServiceUnavailable(String),
   |     ------------------ not covered
30 |     InsufficientFundsError(String),
   |     ---------------------- not covered
31 |     FraudDetected(String),
   |     ------------- not covered
   = note: the matched value is of type `&AppError`
help: ensure that all possible cases are being handled by adding a match arm with a wildcard pattern, a match arm with multiple or-patterns as shown, or multiple match arms
   |
62 ~             AppError::NetworkError(msg) => write!(f, "Network error: {}", msg),
63 ~             &AppError::ServiceUnavailable(_) | &AppError::InsufficientFundsError(_) | &AppError::FraudDetected(_) => todo!(),
   |

warning: unused variable: `revenue`
   --> services/api-gateway/src/shared/infrastructure/event_bus/stream_processor.rs:609:58
    |
609 |     pub fn update_song_metrics(&mut self, song_id: Uuid, revenue: f64, _quality: f64) {
    |                                                          ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_revenue`

warning: unused variable: `profile`
   --> services/api-gateway/src/shared/infrastructure/database/postgres.rs:139:17
    |
139 |             let profile = UserProfile::new(UserId::from_uuid(row.try_get("id")?));
    |                 ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_profile`

warning: unused variable: `profile`
   --> services/api-gateway/src/shared/infrastructure/database/postgres.rs:191:17
    |
191 |             let profile = UserProfile::new(UserId::from_uuid(row.try_get("id")?));
    |                 ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_profile`

warning: unused variable: `profile`
   --> services/api-gateway/src/shared/infrastructure/database/postgres.rs:243:17
    |
243 |             let profile = UserProfile::new(UserId::from_uuid(row.try_get("id")?));
    |                 ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_profile`

warning: unused variable: `profile`
   --> services/api-gateway/src/shared/infrastructure/database/postgres.rs:344:17
    |
344 |             let profile = UserProfile::new(UserId::from_uuid(row.try_get("id")?));
    |                 ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_profile`

warning: unused variable: `criteria`
   --> services/api-gateway/src/shared/infrastructure/database/postgres.rs:413:32
    |
413 |     async fn find_users(&self, criteria: UserSearchCriteria) -> Result<Vec<UserSummary>, AppError> {
    |                                ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_criteria`

warning: unused variable: `payload`
  --> services/api-gateway/src/shared/infrastructure/websocket/service.rs:85:9
   |
85 |         payload: serde_json::Value,
   |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_payload`

warning: unused variable: `user_id`
  --> services/api-gateway/src/shared/infrastructure/websocket/service.rs:86:9
   |
86 |         user_id: Option<Uuid>,
   |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_user_id`

warning: unused variable: `endpoint`
   --> services/api-gateway/src/openapi/mod.rs:443:9
    |
443 |     for endpoint in expected_endpoints {
    |         ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_endpoint`

warning: variable does not need to be mutable
   --> services/api-gateway/src/openapi/mod.rs:383:9
    |
383 |     let mut missing_endpoints = Vec::new();
    |         ----^^^^^^^^^^^^^^^^^
    |         |
    |         help: remove this `mut`

Some errors have detailed explanations: E0004, E0046, E0050, E0053, E0061, E0063, E0195, E0223, E0277...
For more information about an error, try `rustc --explain E0004`.
warning: `api-gateway` (lib) generated 254 warnings
error: could not compile `api-gateway` (lib) due to 598 previous errors; 254 warnings emitted
